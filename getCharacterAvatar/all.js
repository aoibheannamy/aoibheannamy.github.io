(function (b, d, h) { var l = b.SVGAngle || d.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1") ? "SVG" : "VML", f, o, q = 15, z = "http://www.w3.org/2000/svg", I = ['<div class="picker-wrapper">', '<div class="picker"></div>', '<div class="picker-indicator"></div>', "</div>", '<div class="slide-wrapper">', '<div class="slide"></div>', '<div class="slide-indicator"></div>', "</div>"].join(""); function D(t) { if (b.event && b.event.contentOverflow !== h) return { x: b.event.offsetX, y: b.event.offsetY }; if (t.offsetX !== h && t.offsetY !== h) return { x: t.offsetX, y: t.offsetY }; var E = t.target.parentNode.parentNode; return { x: t.layerX - E.offsetLeft, y: t.layerY - E.offsetTop } } function B(t, E, M) { t = d.createElementNS(z, t); for (var P in E) t.setAttribute(P, E[P]); Object.prototype.toString.call(M) != "[object Array]" && (M = [M]); for (var S = 0, O = M[0] && M.length || 0; S < O; S++)t.appendChild(M[S]); return t } l == "SVG" ? (o = B("svg", { xmlns: "http://www.w3.org/2000/svg", version: "1.1", width: "100%", height: "100%" }, [B("defs", {}, B("linearGradient", { id: "gradient-hsv", x1: "0%", y1: "100%", x2: "0%", y2: "0%" }, [B("stop", { offset: "0%", "stop-color": "#FF0000", "stop-opacity": "1" }), B("stop", { offset: "13%", "stop-color": "#FF00FF", "stop-opacity": "1" }), B("stop", { offset: "25%", "stop-color": "#8000FF", "stop-opacity": "1" }), B("stop", { offset: "38%", "stop-color": "#0040FF", "stop-opacity": "1" }), B("stop", { offset: "50%", "stop-color": "#00FFFF", "stop-opacity": "1" }), B("stop", { offset: "63%", "stop-color": "#00FF40", "stop-opacity": "1" }), B("stop", { offset: "75%", "stop-color": "#0BED00", "stop-opacity": "1" }), B("stop", { offset: "88%", "stop-color": "#FFFF00", "stop-opacity": "1" }), B("stop", { offset: "100%", "stop-color": "#FF0000", "stop-opacity": "1" })])), B("rect", { x: "0", y: "0", width: "100%", height: "100%", fill: "url(#gradient-hsv)" })]), f = B("svg", { xmlns: "http://www.w3.org/2000/svg", version: "1.1", width: "100%", height: "100%" }, [B("defs", {}, [B("linearGradient", { id: "gradient-black", x1: "0%", y1: "100%", x2: "0%", y2: "0%" }, [B("stop", { offset: "0%", "stop-color": "#000000", "stop-opacity": "1" }), B("stop", { offset: "100%", "stop-color": "#CC9A81", "stop-opacity": "0" })]), B("linearGradient", { id: "gradient-white", x1: "0%", y1: "100%", x2: "100%", y2: "100%" }, [B("stop", { offset: "0%", "stop-color": "#FFFFFF", "stop-opacity": "1" }), B("stop", { offset: "100%", "stop-color": "#CC9A81", "stop-opacity": "0" })])]), B("rect", { x: "0", y: "0", width: "100%", height: "100%", fill: "url(#gradient-white)" }), B("rect", { x: "0", y: "0", width: "100%", height: "100%", fill: "url(#gradient-black)" })])) : l == "VML" && (o = ['<DIV style="position: relative; width: 100%; height: 100%">', '<v:rect style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" stroked="f" filled="t">', '<v:fill type="gradient" method="none" angle="0" color="red" color2="red" colors="8519f fuchsia;.25 #8000ff;24903f #0040ff;.5 aqua;41287f #00ff40;.75 #0bed00;57671f yellow"></v:fill>', "</v:rect>", "</DIV>"].join(""), f = ['<DIV style="position: relative; width: 100%; height: 100%">', '<v:rect style="position: absolute; left: -1px; top: -1px; width: 101%; height: 101%" stroked="f" filled="t">', '<v:fill type="gradient" method="none" angle="270" color="#FFFFFF" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>', "</v:rect>", '<v:rect style="position: absolute; left: 0px; top: 0px; width: 100%; height: 101%" stroked="f" filled="t">', '<v:fill type="gradient" method="none" angle="0" color="#000000" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>', "</v:rect>", "</DIV>"].join(""), d.namespaces.v || d.namespaces.add("v", "urn:schemas-microsoft-com:vml", "#default#VML")); function v(t) { var E, M, P, S, O, X = t.h % 360 / 60; O = t.v * t.s, S = O * (1 - Math.abs(X % 2 - 1)), E = M = P = t.v - O, X = ~~X, E += [O, S, 0, 0, S, O][X], M += [S, O, O, S, 0, 0][X], P += [0, 0, S, O, O, S][X]; var da = Math.floor(E * 255), la = Math.floor(M * 255), ta = Math.floor(P * 255); return { r: da, g: la, b: ta, hex: "#" + (16777216 | ta | la << 8 | da << 16).toString(16).slice(1) } } function J(t) { var E = t.r, M = t.g, P = t.b; (t.r > 1 || t.g > 1 || t.b > 1) && (E /= 255, M /= 255, P /= 255); var S, O, X, da; return X = Math.max(E, M, P), da = X - Math.min(E, M, P), S = da == 0 ? null : X == E ? (M - P) / da + (M < P ? 6 : 0) : X == M ? (P - E) / da + 2 : (E - M) / da + 4, S = S % 6 * 60, O = da == 0 ? 0 : da / X, { h: S, s: O, v: X } } function A(t, E, M) { return function (P) { P = P || b.event; var S = D(P); t.h = S.y / E.offsetHeight * 360 + q; var O = v({ h: t.h, s: 1, v: 1 }), X = v({ h: t.h, s: t.s, v: t.v }); M.style.backgroundColor = O.hex, t.callback && t.callback(X.hex, { h: t.h - q, s: t.s, v: t.v }, { r: X.r, g: X.g, b: X.b }, h, S) } } function N(t, E) { return function (M) { M = M || b.event; var P = D(M), S = E.offsetWidth, O = E.offsetHeight; t.s = P.x / S, t.v = (O - P.y) / O; var X = v(t); t.callback && t.callback(X.hex, { h: t.h - q, s: t.s, v: t.v }, { r: X.r, g: X.g, b: X.b }, P) } } var ba = 0; function Q(t, E, M) { if (!(this instanceof Q)) return new Q(t, E, M); this.h = 0, this.s = 1, this.v = 1; if (M) this.callback = M, this.pickerElement = E, this.slideElement = t; else { var P = t; P.innerHTML = I, this.slideElement = P.getElementsByClassName("slide")[0], this.pickerElement = P.getElementsByClassName("picker")[0]; var S = P.getElementsByClassName("slide-indicator")[0], O = P.getElementsByClassName("picker-indicator")[0]; Q.fixIndicators(S, O), this.callback = function (sa, pa, wa, za, Da) { Q.positionIndicators(S, O, Da, za), E(sa, pa, wa) } } if (l == "SVG") { var X = o.cloneNode(!0), da = f.cloneNode(!0), la = X.getElementsByTagName("defs")[0].firstChild, ta = X.getElementsByTagName("rect")[0]; la.id = "gradient-hsv-" + ba, ta.setAttribute("fill", "url(#" + la.id + ")"); var na = da.getElementsByTagName("defs")[0], oa = [na.firstChild, na.lastChild], Y = da.getElementsByTagName("rect"); oa[0].id = "gradient-black-" + ba, oa[1].id = "gradient-white-" + ba, Y[0].setAttribute("fill", "url(#" + oa[1].id + ")"), Y[1].setAttribute("fill", "url(#" + oa[0].id + ")"), this.slideElement.appendChild(X), this.pickerElement.appendChild(da), ba++ } else this.slideElement.innerHTML = o, this.pickerElement.innerHTML = f; R(this.slideElement, "click", A(this, this.slideElement, this.pickerElement)), R(this.pickerElement, "click", N(this, this.pickerElement)), ea(this, this.slideElement, A(this, this.slideElement, this.pickerElement)), ea(this, this.pickerElement, N(this, this.pickerElement)) } function R(t, E, M) { t.attachEvent ? t.attachEvent("on" + E, M) : t.addEventListener && t.addEventListener(E, M, !1) } function ea(t, E, M) { var P = !1; R(E, "mousedown", function (S) { P = !0 }), R(E, "mouseup", function (S) { P = !1 }), R(E, "mouseout", function (S) { P = !1 }), R(E, "mousemove", function (S) { P && M(S) }) } Q.hsv2rgb = function (t) { var E = v(t); return delete E.hex, E }, Q.hsv2hex = function (t) { return v(t).hex }, Q.rgb2hsv = J, Q.rgb2hex = function (t) { return v(J(t)).hex }, Q.hex2hsv = function (t) { return J(Q.hex2rgb(t)) }, Q.hex2rgb = function (t) { return { r: parseInt(t.substr(1, 2), 16), g: parseInt(t.substr(3, 2), 16), b: parseInt(t.substr(5, 2), 16) } }; function $(t, E, M, P) { t.h = E.h % 360, t.s = E.s, t.v = E.v; var S = v(t), O = { y: t.h * t.slideElement.offsetHeight / 360, x: 0 }, X = t.pickerElement.offsetHeight, da = { x: t.s * t.pickerElement.offsetWidth, y: X - t.v * X }; return t.pickerElement.style.backgroundColor = v({ h: t.h, s: 1, v: 1 }).hex, t.callback && t.callback(P || S.hex, { h: t.h, s: t.s, v: t.v }, M || { r: S.r, g: S.g, b: S.b }, da, O), t } Q.prototype.setHsv = function (t) { return $(this, t) }, Q.prototype.setRgb = function (t) { return $(this, J(t), t) }, Q.prototype.setHex = function (t) { return $(this, Q.hex2hsv(t), h, t) }, Q.positionIndicators = function (t, E, M, P) { M && (t.style.top = M.y - t.offsetHeight / 2 + "px"), P && (E.style.top = P.y - E.offsetHeight / 2 + "px", E.style.left = P.x - E.offsetWidth / 2 + "px") }, Q.fixIndicators = function (t, E) { E.style.pointerEvents = "none", t.style.pointerEvents = "none" }, b.ColorPicker = Q })(window, window.document); function consolelog() { window.location.protocol === "http:" && console.log(arguments) } (function (b, d) { "use strict"; var h = function () { var l = function () { for (var o = b.location.hash ? b.location.hash.substr(1).split("&") : [], q = {}, z = 0; z < o.length; z++) { var I = o[z].split("="); q[I[0]] = decodeURIComponent(I[1]) } return q }, f = function (o) { var q = []; for (var z in o) q.push(z + "=" + encodeURIComponent(o[z])); b.location.hash = q.join("&") }; return { get: function (o) { var q = l(); return o ? q[o] : q }, add: function (o) { var q = l(); for (var z in o) q[z] = o[z]; f(q) }, remove: function (o) { o = typeof o == "string" ? [o] : o; for (var q = l(), z = 0; z < o.length; z++)delete q[o[z]]; f(q) }, clear: function () { f({}) } } }(); b.hash = h })(window), !function (b) { var d, h, l = "0.4.2", f = "hasOwnProperty", o = /[\.\/]/, q = "*", z = function () { }, I = function (v, J) { return v - J }, D = { n: {} }, B = function (v, J) { v = String(v); var A, N = h, ba = Array.prototype.slice.call(arguments, 2), Q = B.listeners(v), R = 0, ea = [], $ = {}, t = [], E = d; d = v, h = 0; for (var M = 0, P = Q.length; P > M; M++)"zIndex" in Q[M] && (ea.push(Q[M].zIndex), Q[M].zIndex < 0 && ($[Q[M].zIndex] = Q[M])); for (ea.sort(I); ea[R] < 0;)if (A = $[ea[R++]], t.push(A.apply(J, ba)), h) return h = N, t; for (M = 0; P > M; M++)if (A = Q[M], "zIndex" in A) if (A.zIndex == ea[R]) { if (t.push(A.apply(J, ba)), h) break; do if (R++, A = $[ea[R]], A && t.push(A.apply(J, ba)), h) break; while (A) } else $[A.zIndex] = A; else if (t.push(A.apply(J, ba)), h) break; return h = N, d = E, t.length ? t : null }; B._events = D, B.listeners = function (v) { var J, A, N, ba, Q, R, ea, $, t = v.split(o), E = D, M = [E], P = []; for (ba = 0, Q = t.length; Q > ba; ba++) { for ($ = [], R = 0, ea = M.length; ea > R; R++)for (E = M[R].n, A = [E[t[ba]], E[q]], N = 2; N--;)J = A[N], J && ($.push(J), P = P.concat(J.f || [])); M = $ } return P }, B.on = function (v, J) { if (v = String(v), "function" != typeof J) return function () { }; for (var A = v.split(o), N = D, ba = 0, Q = A.length; Q > ba; ba++)N = N.n, N = N.hasOwnProperty(A[ba]) && N[A[ba]] || (N[A[ba]] = { n: {} }); for (N.f = N.f || [], ba = 0, Q = N.f.length; Q > ba; ba++)if (N.f[ba] == J) return z; return N.f.push(J), function (R) { +R == +R && (J.zIndex = +R) } }, B.f = function (v) { var J = [].slice.call(arguments, 1); return function () { B.apply(null, [v, null].concat(J).concat([].slice.call(arguments, 0))) } }, B.stop = function () { h = 1 }, B.nt = function (v) { return v ? new RegExp("(?:\\.|\\/|^)" + v + "(?:\\.|\\/|$)").test(d) : d }, B.nts = function () { return d.split(o) }, B.off = B.unbind = function (v, J) { if (!v) return B._events = D = { n: {} }, void 0; var A, N, ba, Q, R, ea, $, t = v.split(o), E = [D]; for (Q = 0, R = t.length; R > Q; Q++)for (ea = 0; ea < E.length; ea += ba.length - 2) { if (ba = [ea, 1], A = E[ea].n, t[Q] != q) A[t[Q]] && ba.push(A[t[Q]]); else for (N in A) A[f](N) && ba.push(A[N]); E.splice.apply(E, ba) } for (Q = 0, R = E.length; R > Q; Q++)for (A = E[Q]; A.n;) { if (J) { if (A.f) { for (ea = 0, $ = A.f.length; $ > ea; ea++)if (A.f[ea] == J) { A.f.splice(ea, 1); break } !A.f.length && delete A.f } for (N in A.n) if (A.n[f](N) && A.n[N].f) { var M = A.n[N].f; for (ea = 0, $ = M.length; $ > ea; ea++)if (M[ea] == J) { M.splice(ea, 1); break } !M.length && delete A.n[N].f } } else { delete A.f; for (N in A.n) A.n[f](N) && A.n[N].f && delete A.n[N].f } A = A.n } }, B.once = function (v, J) { var A = function () { return B.unbind(v, A), J.apply(this, arguments) }; return B.on(v, A) }, B.version = l, B.toString = function () { return "You are running Eve " + l }, "undefined" != typeof module && module.exports ? module.exports = B : "undefined" != typeof define ? define("eve", [], function () { return B }) : b.eve = B }(this), function (b, d) { "function" == typeof define && define.amd ? define(["eve"], function (h) { return d(b, h) }) : d(b, b.eve) }(this, function (b, d) {
    var h = function (f) { var o = {}, q = b.requestAnimationFrame || b.webkitRequestAnimationFrame || b.mozRequestAnimationFrame || b.oRequestAnimationFrame || b.msRequestAnimationFrame || function (t) { setTimeout(t, 16) }, z = Array.isArray || function (t) { return t instanceof Array || "[object Array]" == Object.prototype.toString.call(t) }, I = 0, D = "M" + (+new Date()).toString(36), B = function () { return D + (I++).toString(36) }, v = Date.now || function () { return +new Date() }, J = function (t) { var E = this; if (null == t) return E.s; var M = E.s - t; E.b += E.dur * M, E.B += E.dur * M, E.s = t }, A = function (t) { var E = this; return null == t ? E.spd : (E.spd = t, void 0) }, N = function (t) { var E = this; return null == t ? E.dur : (E.s = E.s * t / E.dur, E.dur = t, void 0) }, ba = function () { var t = this; delete o[t.id], f("mina.stop." + t.id, t) }, Q = function () { var t = this; t.pdif || (delete o[t.id], t.pdif = t.get() - t.b) }, R = function () { var t = this; t.pdif && (t.b = t.get() - t.pdif, delete t.pdif, o[t.id] = t) }, ea = function () { var t = 0; for (var E in o) if (o.hasOwnProperty(E)) { var M, P = o[E], S = P.get(); if (t++, P.s = (S - P.b) / (P.dur / P.spd), P.s >= 1 && (delete o[E], P.s = 1, t--, function (da) { setTimeout(function () { f("mina.finish." + da.id, da) }) }(P)), z(P.start)) { M = []; for (var O = 0, X = P.start.length; X > O; O++)M[O] = +P.start[O] + (P.end[O] - P.start[O]) * P.easing(P.s) } else M = +P.start + (P.end - P.start) * P.easing(P.s); P.set(M) } t && q(ea) }, $ = function (t, E, M, P, S, O, X) { var da = { id: B(), start: t, end: E, b: M, s: 0, dur: P - M, spd: 1, get: S, set: O, easing: X || $.linear, status: J, speed: A, duration: N, stop: ba, pause: Q, resume: R }; o[da.id] = da; var la, ta = 0; for (la in o) if (o.hasOwnProperty(la) && (ta++, 2 == ta)) break; return 1 == ta && q(ea), da }; return $.time = v, $.getById = function (t) { return o[t] || null }, $.linear = function (t) { return t }, $.easeout = function (t) { return Math.pow(t, 1.7) }, $.easein = function (t) { return Math.pow(t, .48) }, $.easeinout = function (t) { if (1 == t) return 1; if (0 == t) return 0; var E = .48 - t / 1.04, M = Math.sqrt(.1734 + E * E), P = M - E, S = Math.pow(Math.abs(P), 1 / 3) * (0 > P ? -1 : 1), O = -M - E, X = Math.pow(Math.abs(O), 1 / 3) * (0 > O ? -1 : 1), da = S + X + .5; return 3 * (1 - da) * da * da + da * da * da }, $.backin = function (t) { if (1 == t) return 1; var E = 1.70158; return t * t * ((E + 1) * t - E) }, $.backout = function (t) { if (0 == t) return 0; t -= 1; var E = 1.70158; return t * t * ((E + 1) * t + E) + 1 }, $.elastic = function (t) { return t == !!t ? t : Math.pow(2, -10 * t) * Math.sin((t - .075) * 2 * Math.PI / .3) + 1 }, $.bounce = function (t) { var E, M = 7.5625, P = 2.75; return 1 / P > t ? E = M * t * t : 2 / P > t ? (t -= 1.5 / P, E = M * t * t + .75) : 2.5 / P > t ? (t -= 2.25 / P, E = M * t * t + .9375) : (t -= 2.625 / P, E = M * t * t + .984375), E }, b.mina = $, $ }("undefined" == typeof d ? function () { } : d), l = function () {
        function f(e, j) { if (e) { if (e.tagName) return O(e); if (e instanceof t) return e; if (null == j) return e = pa.doc.querySelector(e), O(e) } return e = null == e ? "100%" : e, j = null == j ? "100%" : j, new S(e, j) } function o(e, j) { if (j) { if ("string" == typeof e && (e = o(e)), "string" == typeof j) return "xlink:" == j.substring(0, 6) ? e.getAttributeNS(H, j.substring(6)) : "xml:" == j.substring(0, 4) ? e.getAttributeNS(L, j.substring(4)) : e.getAttribute(j); for (var p in j) if (j[wa](p)) { var m = za(j[p]); m ? "xlink:" == p.substring(0, 6) ? e.setAttributeNS(H, p.substring(6), m) : "xml:" == p.substring(0, 4) ? e.setAttributeNS(L, p.substring(4), m) : e.setAttribute(p, m) : e.removeAttribute(p) } } else e = pa.doc.createElementNS(L, e); return e } function q(e, j) { return j = za.prototype.toLowerCase.call(j), "finite" == j ? isFinite(e) : "array" == j && (e instanceof Array || Array.isArray && Array.isArray(e)) ? !0 : "null" == j && null === e || j == typeof e && null !== e || "object" == j && e === Object(e) || Ka.call(e).slice(8, -1).toLowerCase() == j } function z(e) { if ("function" == typeof e || Object(e) !== e) return e; var j = new e.constructor(); for (var p in e) e[wa](p) && (j[p] = z(e[p])); return j } function I(e, j) { for (var p = 0, m = e.length; m > p; p++)if (e[p] === j) return e.push(e.splice(p, 1)[0]) } function D(e, j, p) { function m() { var r = Array.prototype.slice.call(arguments, 0), y = r.join("â€"), F = m.cache = m.cache || {}, s = m.count = m.count || []; return F[wa](y) ? (I(s, y), p ? p(F[y]) : F[y]) : (s.length >= 1e3 && delete F[s.shift()], s.push(y), F[y] = e.apply(j, r), p ? p(F[y]) : F[y]) } return m } function B(e, j, p, m, r, y) { if (null == r) { var F = e - p, s = j - m; return F || s ? (180 + 180 * xa.atan2(-s, -F) / Pa + 360) % 360 : 0 } return B(e, j, r, y) - B(p, m, r, y) } function v(e) { return e % 360 * Pa / 180 } function J(e) { return 180 * e / Pa % 360 } function A(e, j, p, m, r, y) { return null == j && "[object SVGMatrix]" == Ka.call(e) ? (this.a = e.a, this.b = e.b, this.c = e.c, this.d = e.d, this.e = e.e, this.f = e.f, void 0) : (null != e ? (this.a = +e, this.b = +j, this.c = +p, this.d = +m, this.e = +r, this.f = +y) : (this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.e = 0, this.f = 0), void 0) } function N(e) { var j = []; return e = e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g, function (p, m, r) { return r = r.split(/\s*,\s*|\s+/), "rotate" == m && 1 == r.length && r.push(0, 0), "scale" == m && (2 == r.length && r.push(0, 0), 1 == r.length && r.push(r[0], 0, 0)), "skewX" == m ? j.push(["m", 1, 0, xa.tan(v(r[0])), 1, 0, 0]) : "skewY" == m ? j.push(["m", 1, xa.tan(v(r[0])), 0, 1, 0, 0]) : j.push([m.charAt(0)].concat(r)), p }), j } function ba(e, j) { var p = ma(e), m = new A(); if (p) for (var r = 0, y = p.length; y > r; r++) { var F, s, G, T, Z, U = p[r], ra = U.length, ua = za(U[0]).toLowerCase(), Aa = U[0] != ua, ya = Aa ? m.invert() : 0; "t" == ua && 2 == ra ? m.translate(U[1], 0) : "t" == ua && 3 == ra ? Aa ? (F = ya.x(0, 0), s = ya.y(0, 0), G = ya.x(U[1], U[2]), T = ya.y(U[1], U[2]), m.translate(G - F, T - s)) : m.translate(U[1], U[2]) : "r" == ua ? 2 == ra ? (Z = Z || j, m.rotate(U[1], Z.x + Z.width / 2, Z.y + Z.height / 2)) : 4 == ra && (Aa ? (G = ya.x(U[2], U[3]), T = ya.y(U[2], U[3]), m.rotate(U[1], G, T)) : m.rotate(U[1], U[2], U[3])) : "s" == ua ? 2 == ra || 3 == ra ? (Z = Z || j, m.scale(U[1], U[ra - 1], Z.x + Z.width / 2, Z.y + Z.height / 2)) : 4 == ra ? Aa ? (G = ya.x(U[2], U[3]), T = ya.y(U[2], U[3]), m.scale(U[1], U[1], G, T)) : m.scale(U[1], U[1], U[2], U[3]) : 5 == ra && (Aa ? (G = ya.x(U[3], U[4]), T = ya.y(U[3], U[4]), m.scale(U[1], U[2], G, T)) : m.scale(U[1], U[2], U[3], U[4])) : "m" == ua && 7 == ra && m.add(U[1], U[2], U[3], U[4], U[5], U[6]) } return m } function Q(e, j) { if (null == j) { var p = !0; if (j = "linearGradient" == e.type || "radialGradient" == e.type ? e.node.getAttribute("gradientTransform") : "pattern" == e.type ? e.node.getAttribute("patternTransform") : e.node.getAttribute("transform"), !j) return new A(); j = N(j) } else j = f._.rgTransform.test(j) ? za(j).replace(/\.{3}|\u2026/g, e._.transform || qa) : N(j), q(j, "array") && (j = f.path ? f.path.toString.call(j) : za(j)), e._.transform = j; var m = ba(j, e.getBBox(1)); return p ? m : (e.matrix = m, void 0) } function R(e) { var j = f._.someDefs; if (j && ia(j.ownerDocument.documentElement, j)) return j; var p = e.node.ownerSVGElement && O(e.node.ownerSVGElement) || e.node.parentNode && O(e.node.parentNode) || f.select("svg") || f(0, 0), m = p.select("defs"), r = null == m ? !1 : m.node; return r || (r = P("defs", p.node).node), f._.someDefs = r, r } function ea(e, j, p) { function m(T) { return null == T ? qa : T == +T ? T : (o(G, { width: T }), G.getBBox().width) } function r(T) { return null == T ? qa : T == +T ? T : (o(G, { height: T }), G.getBBox().height) } function y(T, Z) { null == j ? s[T] = Z(e.attr(T)) : T == j && (s = Z(null == p ? e.attr(T) : p)) } var F = R(e), s = {}, G = F.querySelector(".svg---mgr"); switch (G || (G = o("rect"), o(G, { width: 10, height: 10, class: "svg---mgr" }), F.appendChild(G)), e.type) { case "rect": y("rx", m), y("ry", r); case "image": y("width", m), y("height", r); case "text": y("x", m), y("y", r); break; case "circle": y("cx", m), y("cy", r), y("r", m); break; case "ellipse": y("cx", m), y("cy", r), y("rx", m), y("ry", r); break; case "line": y("x1", m), y("x2", m), y("y1", r), y("y2", r); break; case "marker": y("refX", m), y("markerWidth", m), y("refY", r), y("markerHeight", r); break; case "radialGradient": y("fx", m), y("fy", r); break; case "tspan": y("dx", m), y("dy", r); break; default: y(j, m) }return s } function $(e) { q(e, "array") || (e = Array.prototype.slice.call(arguments, 0)); for (var j = 0, p = 0, m = this.node; this[j];)delete this[j++]; for (j = 0; j < e.length; j++)"set" == e[j].type ? e[j].forEach(function (y) { m.appendChild(y.node) }) : m.appendChild(e[j].node); var r = m.childNodes; for (j = 0; j < r.length; j++)this[p++] = O(r[j]); return this } function t(e) { if (e.snap in _) return _[e.snap]; var j, p = this.id = x(); try { j = e.ownerSVGElement } catch (r) { } if (this.node = e, j && (this.paper = new S(j)), this.type = e.tagName, this.anims = {}, this._ = { transform: [] }, e.snap = p, _[p] = this, "g" == this.type) { this.add = $; for (var m in S.prototype) S.prototype[wa](m) && (this[m] = S.prototype[m]) } } function E(e) { for (var j, p = 0, m = e.length; m > p; p++)if (j = j || e[p]) return j } function M(e) { this.node = e } function P(e, j) { var p = o(e); j.appendChild(p); var m = O(p); return m.type = e, m } function S(e, j) { var p, m, r, y = S.prototype; if (e && "svg" == e.tagName) { if (e.snap in _) return _[e.snap]; p = new t(e), m = e.getElementsByTagName("desc")[0], r = e.getElementsByTagName("defs")[0], m || (m = o("desc"), m.appendChild(pa.doc.createTextNode("Created with Snap")), p.node.appendChild(m)), r || (r = o("defs"), p.node.appendChild(r)), p.defs = r; for (var F in y) y[wa](F) && (p[F] = y[F]); p.paper = p.root = p } else p = P("svg", pa.doc.body), o(p.node, { height: j, version: 1.1, width: e, xmlns: L }); return p } function O(e) { return e ? e instanceof t || e instanceof M ? e : "svg" == e.tagName ? new S(e) : new t(e) : e } function X() { return this.selectAll("stop") } function da(e, j) { var p = o("stop"), m = { offset: +j + "%" }; return e = f.color(e), m["stop-color"] = e.hex, e.opacity < 1 && (m["stop-opacity"] = e.opacity), o(p, m), this.node.appendChild(p), this } function la() { if ("linearGradient" == this.type) { var e = o(this.node, "x1") || 0, j = o(this.node, "x2") || 1, p = o(this.node, "y1") || 0, m = o(this.node, "y2") || 0; return f._.box(e, p, xa.abs(j - e), xa.abs(m - p)) } var r = this.node.cx || .5, y = this.node.cy || .5, F = this.node.r || 0; return f._.box(r - F, y - F, 2 * F, 2 * F) } function ta(e, j) { function p(U, ra) { for (var ua = (ra - s) / (U - G), Aa = G; U > Aa; Aa++)y[Aa].offset = +(+s + ua * (Aa - G)).toFixed(2); G = U, s = ra } var m, r = E(d("snap.util.grad.parse", null, j)); if (!r) return null; r.params.unshift(e), m = "l" == r.type.toLowerCase() ? na.apply(0, r.params) : oa.apply(0, r.params), r.type != r.type.toLowerCase() && o(m.node, { gradientUnits: "userSpaceOnUse" }); var y = r.stops, F = y.length, s = 0, G = 0; F--; for (var T = 0; F > T; T++)"offset" in y[T] && p(T, y[T].offset); for (y[F].offset = y[F].offset || 100, p(F, y[F].offset), T = 0; F >= T; T++) { var Z = y[T]; m.addStop(Z.color, Z.offset) } return m } function na(e, j, p, m, r) { var y = P("linearGradient", e); return y.stops = X, y.addStop = da, y.getBBox = la, null != j && o(y.node, { x1: j, y1: p, x2: m, y2: r }), y } function oa(e, j, p, m, r, y) { var F = P("radialGradient", e); return F.stops = X, F.addStop = da, F.getBBox = la, null != j && o(F.node, { cx: j, cy: p, r: m }), null != r && null != y && o(F.node, { fx: r, fy: y }), F } function Y(e) { return function (j) { if (d.stop(), j instanceof M && 1 == j.node.childNodes.length && ("radialGradient" == j.node.firstChild.tagName || "linearGradient" == j.node.firstChild.tagName || "pattern" == j.node.firstChild.tagName) && (j = j.node.firstChild, R(this).appendChild(j), j = O(j)), j instanceof t) if ("radialGradient" == j.type || "linearGradient" == j.type || "pattern" == j.type) { j.node.id || o(j.node, { id: j.id }); var p = aa(j.node.id) } else p = j.attr(e); else if (p = f.color(j), p.error) { var m = ta(R(this), j); m ? (m.node.id || o(m.node, { id: m.id }), p = aa(m.node.id)) : p = j } else p = za(p); var r = {}; r[e] = p, o(this.node, r), this.node.style[e] = qa } } function sa(e) { for (var j = [], p = e.childNodes, m = 0, r = p.length; r > m; m++) { var y = p[m]; 3 == y.nodeType && j.push(y.nodeValue), "tspan" == y.tagName && (1 == y.childNodes.length && 3 == y.firstChild.nodeType ? j.push(y.firstChild.nodeValue) : j.push(sa(y))) } return j } f.version = "0.2.0", f.toString = function () { return "Snap v" + this.version }, f._ = {}; var pa = { win: b, doc: b.document }; f._.glob = pa; var wa = "hasOwnProperty", za = String, Da = parseFloat, Ma = parseInt, xa = Math, Ra = xa.max, Oa = xa.min, Ua = xa.abs, Pa = (xa.pow, xa.PI), qa = (xa.round, ""), Ja = " ", Ka = Object.prototype.toString, Ga = /^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i, Sa = /^url\(#?([^)]+)\)$/, Ca = `	
\v\f\r Â áš€á Žâ€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€\u2028\u2029`, _a = new RegExp("[," + Ca + "]+"), Wa = (new RegExp("[" + Ca + "]", "g"), new RegExp("[" + Ca + "]*,[" + Ca + "]*")), Za = { hs: 1, rg: 1 }, Xa = new RegExp("([a-z])[" + Ca + ",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[" + Ca + "]*,?[" + Ca + "]*)+)", "ig"), $a = new RegExp("([rstm])[" + Ca + ",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[" + Ca + "]*,?[" + Ca + "]*)+)", "ig"), u = new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[" + Ca + "]*,?[" + Ca + "]*", "ig"), w = 0, C = "S" + (+new Date()).toString(36), x = function () { return C + (w++).toString(36) }, H = "http://www.w3.org/1999/xlink", L = "http://www.w3.org/2000/svg", _ = {}, aa = f.url = function (e) { return "url('#" + e + "')" }; f._.$ = o, f._.id = x, f.format = function () { var e = /\{([^\}]+)\}/g, j = /(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g, p = function (m, r, y) { var F = y; return r.replace(j, function (s, G, T, Z, U) { G = G || Z, F && (G in F && (F = F[G]), "function" == typeof F && U && (F = F())) }), F = (null == F || F == y ? m : F) + "" }; return function (m, r) { return za(m).replace(e, function (y, F) { return p(y, F, r) }) } }(); var K = function () { function e() { this.parentNode.removeChild(this) } return function (j, p) { var m = pa.doc.createElement("img"), r = pa.doc.body; m.style.cssText = "position:absolute;left:-9999em;top:-9999em", m.onload = function () { p.call(m), m.onload = m.onerror = null, r.removeChild(m) }, m.onerror = e, r.appendChild(m), m.src = j } }(); f._.clone = z, f._.cacher = D, f.rad = v, f.deg = J, f.angle = B, f.is = q, f.snapTo = function (e, j, p) { if (p = q(p, "finite") ? p : 10, q(e, "array")) { for (var m = e.length; m--;)if (Ua(e[m] - j) <= p) return e[m] } else { e = +e; var r = j % e; if (p > r) return j - r; if (r > e - p) return j - r + e } return j }, function (e) { function j(m) { return m[0] * m[0] + m[1] * m[1] } function p(m) { var r = xa.sqrt(j(m)); m[0] && (m[0] /= r), m[1] && (m[1] /= r) } e.add = function (m, r, y, F, s, G) { var T, Z, U, ra, ua = [[], [], []], Aa = [[this.a, this.c, this.e], [this.b, this.d, this.f], [0, 0, 1]], ya = [[m, y, s], [r, F, G], [0, 0, 1]]; for (m && m instanceof A && (ya = [[m.a, m.c, m.e], [m.b, m.d, m.f], [0, 0, 1]]), T = 0; 3 > T; T++)for (Z = 0; 3 > Z; Z++) { for (ra = 0, U = 0; 3 > U; U++)ra += Aa[T][U] * ya[U][Z]; ua[T][Z] = ra } return this.a = ua[0][0], this.b = ua[1][0], this.c = ua[0][1], this.d = ua[1][1], this.e = ua[0][2], this.f = ua[1][2], this }, e.invert = function () { var m = this, r = m.a * m.d - m.b * m.c; return new A(m.d / r, -m.b / r, -m.c / r, m.a / r, (m.c * m.f - m.d * m.e) / r, (m.b * m.e - m.a * m.f) / r) }, e.clone = function () { return new A(this.a, this.b, this.c, this.d, this.e, this.f) }, e.translate = function (m, r) { return this.add(1, 0, 0, 1, m, r) }, e.scale = function (m, r, y, F) { return null == r && (r = m), (y || F) && this.add(1, 0, 0, 1, y, F), this.add(m, 0, 0, r, 0, 0), (y || F) && this.add(1, 0, 0, 1, -y, -F), this }, e.rotate = function (m, r, y) { m = v(m), r = r || 0, y = y || 0; var F = +xa.cos(m).toFixed(9), s = +xa.sin(m).toFixed(9); return this.add(F, s, -s, F, r, y), this.add(1, 0, 0, 1, -r, -y) }, e.x = function (m, r) { return m * this.a + r * this.c + this.e }, e.y = function (m, r) { return m * this.b + r * this.d + this.f }, e.get = function (m) { return +this[za.fromCharCode(97 + m)].toFixed(4) }, e.toString = function () { return "matrix(" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + ")" }, e.offset = function () { return [this.e.toFixed(4), this.f.toFixed(4)] }, e.split = function () { var m = {}; m.dx = this.e, m.dy = this.f; var r = [[this.a, this.c], [this.b, this.d]]; m.scalex = xa.sqrt(j(r[0])), p(r[0]), m.shear = r[0][0] * r[1][0] + r[0][1] * r[1][1], r[1] = [r[1][0] - r[0][0] * m.shear, r[1][1] - r[0][1] * m.shear], m.scaley = xa.sqrt(j(r[1])), p(r[1]), m.shear /= m.scaley; var y = -r[0][1], F = r[1][1]; return 0 > F ? (m.rotate = J(xa.acos(F)), 0 > y && (m.rotate = 360 - m.rotate)) : m.rotate = J(xa.asin(y)), m.isSimple = !(+m.shear.toFixed(9) || m.scalex.toFixed(9) != m.scaley.toFixed(9) && m.rotate), m.isSuperSimple = !+m.shear.toFixed(9) && m.scalex.toFixed(9) == m.scaley.toFixed(9) && !m.rotate, m.noRotation = !+m.shear.toFixed(9) && !m.rotate, m }, e.toTransformString = function (m) { var r = m || this.split(); return r.isSimple ? (r.scalex = +r.scalex.toFixed(4), r.scaley = +r.scaley.toFixed(4), r.rotate = +r.rotate.toFixed(4), (r.dx || r.dy ? "t" + [+r.dx.toFixed(4), +r.dy.toFixed(4)] : qa) + (1 != r.scalex || 1 != r.scaley ? "s" + [r.scalex, r.scaley, 0, 0] : qa) + (r.rotate ? "r" + [+r.rotate.toFixed(4), 0, 0] : qa)) : "m" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)] } }(A.prototype), f.Matrix = A, f.getRGB = D(function (e) { if (!e || (e = za(e)).indexOf("-") + 1) return { r: -1, g: -1, b: -1, hex: "none", error: 1, toString: fa }; if ("none" == e) return { r: -1, g: -1, b: -1, hex: "none", toString: fa }; if (!(Za[wa](e.toLowerCase().substring(0, 2)) || "#" == e.charAt()) && (e = V(e)), !e) return { r: -1, g: -1, b: -1, hex: "none", error: 1, toString: fa }; var j, p, m, r, y, F, s = e.match(Ga); return s ? (s[2] && (m = Ma(s[2].substring(5), 16), p = Ma(s[2].substring(3, 5), 16), j = Ma(s[2].substring(1, 3), 16)), s[3] && (m = Ma((y = s[3].charAt(3)) + y, 16), p = Ma((y = s[3].charAt(2)) + y, 16), j = Ma((y = s[3].charAt(1)) + y, 16)), s[4] && (F = s[4].split(Wa), j = Da(F[0]), "%" == F[0].slice(-1) && (j *= 2.55), p = Da(F[1]), "%" == F[1].slice(-1) && (p *= 2.55), m = Da(F[2]), "%" == F[2].slice(-1) && (m *= 2.55), "rgba" == s[1].toLowerCase().slice(0, 4) && (r = Da(F[3])), F[3] && "%" == F[3].slice(-1) && (r /= 100)), s[5] ? (F = s[5].split(Wa), j = Da(F[0]), "%" == F[0].slice(-1) && (j /= 100), p = Da(F[1]), "%" == F[1].slice(-1) && (p /= 100), m = Da(F[2]), "%" == F[2].slice(-1) && (m /= 100), ("deg" == F[0].slice(-3) || "Â°" == F[0].slice(-1)) && (j /= 360), "hsba" == s[1].toLowerCase().slice(0, 4) && (r = Da(F[3])), F[3] && "%" == F[3].slice(-1) && (r /= 100), f.hsb2rgb(j, p, m, r)) : s[6] ? (F = s[6].split(Wa), j = Da(F[0]), "%" == F[0].slice(-1) && (j /= 100), p = Da(F[1]), "%" == F[1].slice(-1) && (p /= 100), m = Da(F[2]), "%" == F[2].slice(-1) && (m /= 100), ("deg" == F[0].slice(-3) || "Â°" == F[0].slice(-1)) && (j /= 360), "hsla" == s[1].toLowerCase().slice(0, 4) && (r = Da(F[3])), F[3] && "%" == F[3].slice(-1) && (r /= 100), f.hsl2rgb(j, p, m, r)) : (j = Oa(xa.round(j), 255), p = Oa(xa.round(p), 255), m = Oa(xa.round(m), 255), r = Oa(Ra(r, 0), 1), s = { r: j, g: p, b: m, toString: fa }, s.hex = "#" + (16777216 | m | p << 8 | j << 16).toString(16).slice(1), s.opacity = q(r, "finite") ? r : 1, s)) : { r: -1, g: -1, b: -1, hex: "none", error: 1, toString: fa } }, f), f.hsb = D(function (e, j, p) { return f.hsb2rgb(e, j, p).hex }), f.hsl = D(function (e, j, p) { return f.hsl2rgb(e, j, p).hex }), f.rgb = D(function (e, j, p, m) { if (q(m, "finite")) { var r = xa.round; return "rgba(" + [r(e), r(j), r(p), +m.toFixed(2)] + ")" } return "#" + (16777216 | p | j << 8 | e << 16).toString(16).slice(1) }); var V = function (e) { var j = pa.doc.getElementsByTagName("head")[0], p = "rgb(255, 0, 0)"; return V = D(function (m) { if ("red" == m.toLowerCase()) return p; j.style.color = p, j.style.color = m; var r = pa.doc.defaultView.getComputedStyle(j, qa).getPropertyValue("color"); return r == p ? null : r }), V(e) }, W = function () { return "hsb(" + [this.h, this.s, this.b] + ")" }, ka = function () { return "hsl(" + [this.h, this.s, this.l] + ")" }, fa = function () { return 1 == this.opacity || null == this.opacity ? this.hex : "rgba(" + [this.r, this.g, this.b, this.opacity] + ")" }, ha = function (e, j, p) { if (null == j && q(e, "object") && "r" in e && "g" in e && "b" in e && (p = e.b, j = e.g, e = e.r), null == j && q(e, string)) { var m = f.getRGB(e); e = m.r, j = m.g, p = m.b } return (e > 1 || j > 1 || p > 1) && (e /= 255, j /= 255, p /= 255), [e, j, p] }, ja = function (e, j, p, m) { e = xa.round(255 * e), j = xa.round(255 * j), p = xa.round(255 * p); var r = { r: e, g: j, b: p, opacity: q(m, "finite") ? m : 1, hex: f.rgb(e, j, p), toString: fa }; return q(m, "finite") && (r.opacity = m), r }; f.color = function (e) { var j; return q(e, "object") && "h" in e && "s" in e && "b" in e ? (j = f.hsb2rgb(e), e.r = j.r, e.g = j.g, e.b = j.b, e.opacity = 1, e.hex = j.hex) : q(e, "object") && "h" in e && "s" in e && "l" in e ? (j = f.hsl2rgb(e), e.r = j.r, e.g = j.g, e.b = j.b, e.opacity = 1, e.hex = j.hex) : (q(e, "string") && (e = f.getRGB(e)), q(e, "object") && "r" in e && "g" in e && "b" in e && !("error" in e) ? (j = f.rgb2hsl(e), e.h = j.h, e.s = j.s, e.l = j.l, j = f.rgb2hsb(e), e.v = j.b) : (e = { hex: "none" }, e.r = e.g = e.b = e.h = e.s = e.v = e.l = -1, e.error = 1)), e.toString = fa, e }, f.hsb2rgb = function (e, j, p, m) { q(e, "object") && "h" in e && "s" in e && "b" in e && (p = e.b, j = e.s, e = e.h, m = e.o), e *= 360; var r, y, F, s, G; return e = e % 360 / 60, G = p * j, s = G * (1 - Ua(e % 2 - 1)), r = y = F = p - G, e = ~~e, r += [G, s, 0, 0, s, G][e], y += [s, G, G, s, 0, 0][e], F += [0, 0, s, G, G, s][e], ja(r, y, F, m) }, f.hsl2rgb = function (e, j, p, m) { q(e, "object") && "h" in e && "s" in e && "l" in e && (p = e.l, j = e.s, e = e.h), (e > 1 || j > 1 || p > 1) && (e /= 360, j /= 100, p /= 100), e *= 360; var r, y, F, s, G; return e = e % 360 / 60, G = 2 * j * (.5 > p ? p : 1 - p), s = G * (1 - Ua(e % 2 - 1)), r = y = F = p - G / 2, e = ~~e, r += [G, s, 0, 0, s, G][e], y += [s, G, G, s, 0, 0][e], F += [0, 0, s, G, G, s][e], ja(r, y, F, m) }, f.rgb2hsb = function (e, j, p) { p = ha(e, j, p), e = p[0], j = p[1], p = p[2]; var m, r, y, F; return y = Ra(e, j, p), F = y - Oa(e, j, p), m = 0 == F ? null : y == e ? (j - p) / F : y == j ? (p - e) / F + 2 : (e - j) / F + 4, m = 60 * ((m + 360) % 6) / 360, r = 0 == F ? 0 : F / y, { h: m, s: r, b: y, toString: W } }, f.rgb2hsl = function (e, j, p) { p = ha(e, j, p), e = p[0], j = p[1], p = p[2]; var m, r, y, F, s, G; return F = Ra(e, j, p), s = Oa(e, j, p), G = F - s, m = 0 == G ? null : F == e ? (j - p) / G : F == j ? (p - e) / G + 2 : (e - j) / G + 4, m = 60 * ((m + 360) % 6) / 360, y = (F + s) / 2, r = 0 == G ? 0 : .5 > y ? G / (2 * y) : G / (2 - 2 * y), { h: m, s: r, l: y, toString: ka } }, f.parsePathString = function (e) { if (!e) return null; var j = f.path(e); if (j.arr) return f.path.clone(j.arr); var p = { a: 7, c: 6, o: 2, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, u: 3, z: 0 }, m = []; return q(e, "array") && q(e[0], "array") && (m = f.path.clone(e)), m.length || za(e).replace(Xa, function (r, y, F) { var s = [], G = y.toLowerCase(); if (F.replace(u, function (T, Z) { Z && s.push(+Z) }), "m" == G && s.length > 2 && (m.push([y].concat(s.splice(0, 2))), G = "l", y = "m" == y ? "l" : "L"), "o" == G && 1 == s.length && m.push([y, s[0]]), "r" == G) m.push([y].concat(s)); else for (; s.length >= p[G] && (m.push([y].concat(s.splice(0, p[G]))), p[G]);); }), m.toString = f.path.toString, j.arr = f.path.clone(m), m }; var ma = f.parseTransformString = function (e) { if (!e) return null; var j = []; return q(e, "array") && q(e[0], "array") && (j = f.path.clone(e)), j.length || za(e).replace($a, function (p, m, r) { var y = []; m.toLowerCase(), r.replace(u, function (F, s) { s && y.push(+s) }), j.push([m].concat(y)) }), j.toString = f.path.toString, j }; f._.svgTransform2string = N, f._.rgTransform = new RegExp("^[a-z][" + Ca + "]*-?\\.?\\d", "i"), f._.transform2matrix = ba, f._unit2px = ea; var ia = pa.doc.contains || pa.doc.compareDocumentPosition ? function (e, j) { var p = 9 == e.nodeType ? e.documentElement : e, m = j && j.parentNode; return e == m || !(!m || 1 != m.nodeType || !(p.contains ? p.contains(m) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(m))) } : function (e, j) { if (j) { for (; j;)if (j = j.parentNode, j == e) return !0 } return !1 }; f._.getSomeDefs = R, f.select = function (e) { return O(pa.doc.querySelector(e)) }, f.selectAll = function (e) { for (var j = pa.doc.querySelectorAll(e), p = (f.set || Array)(), m = 0; m < j.length; m++)p.push(O(j[m])); return p }, function (e) { function j(s) { function G(Ha, Ea) { var Fa = o(Ha.node, Ea); Fa = Fa && Fa.match(ra), Fa = Fa && Fa[2], Fa && "#" == Fa.charAt() && (Fa = Fa.substring(1), Fa && (Aa[Fa] = (Aa[Fa] || []).concat(function (Va) { var Qa = {}; Qa[Ea] = aa(Va), o(Ha.node, Qa) }))) } function T(Ha) { var Ea = o(Ha.node, "xlink:href"); Ea && "#" == Ea.charAt() && (Ea = Ea.substring(1), Ea && (Aa[Ea] = (Aa[Ea] || []).concat(function (Fa) { Ha.attr("xlink:href", "#" + Fa) }))) } for (var Z, U = s.selectAll("*"), ra = /^\s*url\(("|'|)(.*)\1\)\s*$/, ua = [], Aa = {}, ya = 0, Ta = U.length; Ta > ya; ya++) { Z = U[ya], G(Z, "fill"), G(Z, "stroke"), G(Z, "filter"), G(Z, "mask"), G(Z, "clip-path"), T(Z); var La = o(Z.node, "id"); La && (o(Z.node, { id: Z.id }), ua.push({ old: La, id: Z.id })) } for (ya = 0, Ta = ua.length; Ta > ya; ya++) { var Ia = Aa[ua[ya].old]; if (Ia) for (var Na = 0, Ya = Ia.length; Ya > Na; Na++)Ia[Na](ua[ya].id) } } function p(s, G, T) { return function (Z) { var U = Z.slice(s, G); return 1 == U.length && (U = U[0]), T ? T(U) : U } } function m(s) { return function () { var G = s ? "<" + this.type : "", T = this.node.attributes, Z = this.node.childNodes; if (s) for (var U = 0, ra = T.length; ra > U; U++)G += " " + T[U].name + '="' + T[U].value.replace(/"/g, '\\"') + '"'; if (Z.length) { for (s && (G += ">"), U = 0, ra = Z.length; ra > U; U++)3 == Z[U].nodeType ? G += Z[U].nodeValue : 1 == Z[U].nodeType && (G += O(Z[U]).toString()); s && (G += "</" + this.type + ">") } else s && (G += "/>"); return G } } e.attr = function (s, G) { var T = this; if (T.node, !s) return T; if (q(s, "string")) { if (!(arguments.length > 1)) return E(d("snap.util.getattr." + s, T)); var Z = {}; Z[s] = G, s = Z } for (var U in s) s[wa](U) && d("snap.util.attr." + U, T, s[U]); return T }, e.getBBox = function (s) { var G = this; if ("use" == G.type && (G = G.original), G.removed) return {}; var T = G._; return s ? (T.bboxwt = f.path.get[G.type] ? f.path.getBBox(G.realPath = f.path.get[G.type](G)) : f._.box(G.node.getBBox()), f._.box(T.bboxwt)) : (G.realPath = (f.path.get[G.type] || f.path.get.deflt)(G), T.bbox = f.path.getBBox(f.path.map(G.realPath, G.matrix)), f._.box(T.bbox)) }; var r = function () { return this.string }; e.transform = function (s) { var G = this._; if (null == s) { var T = new A(this.node.getCTM()), Z = Q(this), U = Z.toTransformString(), ra = za(Z) == za(this.matrix) ? G.transform : U; return { string: ra, globalMatrix: T, localMatrix: Z, diffMatrix: T.clone().add(Z.invert()), global: T.toTransformString(), local: U, toString: r } } return s instanceof A && (s = s.toTransformString()), Q(this, s), this.node && ("linearGradient" == this.type || "radialGradient" == this.type ? o(this.node, { gradientTransform: this.matrix }) : "pattern" == this.type ? o(this.node, { patternTransform: this.matrix }) : o(this.node, { transform: this.matrix })), this }, e.parent = function () { return O(this.node.parentNode) }, e.append = e.add = function (s) { if (s) { if ("set" == s.type) { var G = this; return s.forEach(function (T) { G.add(T) }), this } s = O(s), this.node.appendChild(s.node), s.paper = this.paper } return this }, e.appendTo = function (s) { return s && (s = O(s), s.append(this)), this }, e.prepend = function (s) { if (s) { s = O(s); var G = s.parent(); this.node.insertBefore(s.node, this.node.firstChild), this.add && this.add(), s.paper = this.paper, this.parent() && this.parent().add(), G && G.add() } return this }, e.prependTo = function (s) { return s = O(s), s.prepend(this), this }, e.before = function (s) { if ("set" == s.type) { var G = this; return s.forEach(function (Z) { var U = Z.parent(); G.node.parentNode.insertBefore(Z.node, G.node), U && U.add() }), this.parent().add(), this } s = O(s); var T = s.parent(); return this.node.parentNode.insertBefore(s.node, this.node), this.parent() && this.parent().add(), T && T.add(), s.paper = this.paper, this }, e.after = function (s) { s = O(s); var G = s.parent(); return this.node.nextSibling ? this.node.parentNode.insertBefore(s.node, this.node.nextSibling) : this.node.parentNode.appendChild(s.node), this.parent() && this.parent().add(), G && G.add(), s.paper = this.paper, this }, e.insertBefore = function (s) { s = O(s); var G = this.parent(); return s.node.parentNode.insertBefore(this.node, s.node), this.paper = s.paper, G && G.add(), s.parent() && s.parent().add(), this }, e.insertAfter = function (s) { s = O(s); var G = this.parent(); return s.node.parentNode.insertBefore(this.node, s.node.nextSibling), this.paper = s.paper, G && G.add(), s.parent() && s.parent().add(), this }, e.remove = function () { var s = this.parent(); return this.node.parentNode && this.node.parentNode.removeChild(this.node), delete this.paper, this.removed = !0, s && s.add(), this }, e.select = function (s) { return O(this.node.querySelector(s)) }, e.selectAll = function (s) { for (var G = this.node.querySelectorAll(s), T = (f.set || Array)(), Z = 0; Z < G.length; Z++)T.push(O(G[Z])); return T }, e.asPX = function (s, G) { return null == G && (G = this.attr(s)), +ea(this, s, G) }, e.use = function () { var s, G = this.node.id; return G || (G = this.id, o(this.node, { id: G })), s = "linearGradient" == this.type || "radialGradient" == this.type || "pattern" == this.type ? P(this.type, this.node.parentNode) : P("use", this.node.parentNode), o(s.node, { "xlink:href": "#" + G }), s.original = this, s }, e.clone = function () { var s = O(this.node.cloneNode(!0)); return o(s.node, "id") && o(s.node, { id: s.id }), j(s), s.insertAfter(this), s }, e.toDefs = function () { var s = R(this); return s.appendChild(this.node), this }, e.pattern = function (s, G, T, Z) { var U = P("pattern", R(this)); return null == s && (s = this.getBBox()), q(s, "object") && "x" in s && (G = s.y, T = s.width, Z = s.height, s = s.x), o(U.node, { x: s, y: G, width: T, height: Z, patternUnits: "userSpaceOnUse", id: U.id, viewBox: [s, G, T, Z].join(" ") }), U.node.appendChild(this.node), U }, e.marker = function (s, G, T, Z, U, ra) { var ua = P("marker", R(this)); return null == s && (s = this.getBBox()), q(s, "object") && "x" in s && (G = s.y, T = s.width, Z = s.height, U = s.refX || s.cx, ra = s.refY || s.cy, s = s.x), o(ua.node, { viewBox: [s, G, T, Z].join(Ja), markerWidth: T, markerHeight: Z, orient: "auto", refX: U || 0, refY: ra || 0, id: ua.id }), ua.node.appendChild(this.node), ua }; var y = function (s, G, T, Z) { "function" != typeof T || T.length || (Z = T, T = h.linear), this.attr = s, this.dur = G, T && (this.easing = T), Z && (this.callback = Z) }; f.animation = function (s, G, T, Z) { return new y(s, G, T, Z) }, e.inAnim = function () { var s = this, G = []; for (var T in s.anims) s.anims[wa](T) && !function (Z) { G.push({ anim: new y(Z._attrs, Z.dur, Z.easing, Z._callback), curStatus: Z.status(), status: function (U) { return Z.status(U) }, stop: function () { Z.stop() } }) }(s.anims[T]); return G }, f.animate = function (s, G, T, Z, U, ra) { "function" != typeof U || U.length || (ra = U, U = h.linear); var ua = h.time(), Aa = h(s, G, ua, ua + Z, h.time, T, U); return ra && d.once("mina.finish." + Aa.id, ra), Aa }, e.stop = function () { for (var s = this.inAnim(), G = 0, T = s.length; T > G; G++)s[G].stop(); return this }, e.animate = function (s, G, T, Z) { "function" != typeof T || T.length || (Z = T, T = h.linear), s instanceof y && (Z = s.callback, T = s.easing, G = T.dur, s = s.attr); var U, ra, ua, Aa, ya = [], Ta = [], La = {}, Ia = this; for (var Na in s) if (s[wa](Na)) { Ia.equal ? (Aa = Ia.equal(Na, za(s[Na])), U = Aa.from, ra = Aa.to, ua = Aa.f) : (U = +Ia.attr(Na), ra = +s[Na]); var Ya = q(U, "array") ? U.length : 1; La[Na] = p(ya.length, ya.length + Ya, ua), ya = ya.concat(U), Ta = Ta.concat(ra) } var Ha = h.time(), Ea = h(ya, Ta, Ha, Ha + G, h.time, function (Fa) { var Va = {}; for (var Qa in La) La[wa](Qa) && (Va[Qa] = La[Qa](Fa)); Ia.attr(Va) }, T); return Ia.anims[Ea.id] = Ea, Ea._attrs = s, Ea._callback = Z, d.once("mina.finish." + Ea.id, function () { delete Ia.anims[Ea.id], Z && Z.call(Ia) }), d.once("mina.stop." + Ea.id, function () { delete Ia.anims[Ea.id] }), Ia }; var F = {}; e.data = function (s, G) { var T = F[this.id] = F[this.id] || {}; if (0 == arguments.length) return d("snap.data.get." + this.id, this, T, null), T; if (1 == arguments.length) { if (f.is(s, "object")) { for (var Z in s) s[wa](Z) && this.data(Z, s[Z]); return this } return d("snap.data.get." + this.id, this, T[s], s), T[s] } return T[s] = G, d("snap.data.set." + this.id, this, G, s), this }, e.removeData = function (s) { return null == s ? F[this.id] = {} : F[this.id] && delete F[this.id][s], this }, e.outerSVG = e.toString = m(1), e.innerSVG = m() }(t.prototype), f.parse = function (e) { var j = pa.doc.createDocumentFragment(), p = !0, m = pa.doc.createElement("div"); if (e = za(e), e.match(/^\s*<\s*svg(?:\s|>)/) || (e = "<svg>" + e + "</svg>", p = !1), m.innerHTML = e, e = m.getElementsByTagName("svg")[0]) if (p) j = e; else for (; e.firstChild;)j.appendChild(e.firstChild); return m.innerHTML = qa, new M(j) }, M.prototype.select = t.prototype.select, M.prototype.selectAll = t.prototype.selectAll, f.fragment = function () { for (var e = Array.prototype.slice.call(arguments, 0), j = pa.doc.createDocumentFragment(), p = 0, m = e.length; m > p; p++) { var r = e[p]; r.node && r.node.nodeType && j.appendChild(r.node), r.nodeType && j.appendChild(r), "string" == typeof r && j.appendChild(f.parse(r).node) } return new M(j) }, function (e) { e.el = function (j, p) { return P(j, this.node).attr(p) }, e.rect = function (j, p, m, r, y, F) { var s; return null == F && (F = y), q(j, "object") && "x" in j ? s = j : null != j && (s = { x: j, y: p, width: m, height: r }, null != y && (s.rx = y, s.ry = F)), this.el("rect", s) }, e.circle = function (j, p, m) { var r; return q(j, "object") && "cx" in j ? r = j : null != j && (r = { cx: j, cy: p, r: m }), this.el("circle", r) }, e.image = function (j, p, m, r, y) { var F = P("image", this.node); if (q(j, "object") && "src" in j) F.attr(j); else if (null != j) { var s = { "xlink:href": j, preserveAspectRatio: "none" }; null != p && null != m && (s.x = p, s.y = m), null != r && null != y ? (s.width = r, s.height = y) : K(j, function () { o(F.node, { width: this.offsetWidth, height: this.offsetHeight }) }), o(F.node, s) } return F }, e.ellipse = function (j, p, m, r) { var y = P("ellipse", this.node); return q(j, "object") && "cx" in j ? y.attr(j) : null != j && y.attr({ cx: j, cy: p, rx: m, ry: r }), y }, e.path = function (j) { var p = P("path", this.node); return q(j, "object") && !q(j, "array") ? p.attr(j) : j && p.attr({ d: j }), p }, e.group = e.g = function (j) { var p = P("g", this.node); p.add = $; for (var m in e) e[wa](m) && (p[m] = e[m]); return 1 == arguments.length && j && !j.type ? p.attr(j) : arguments.length && p.add(Array.prototype.slice.call(arguments, 0)), p }, e.text = function (j, p, m) { var r = P("text", this.node); return q(j, "object") ? r.attr(j) : null != j && r.attr({ x: j, y: p, text: m || "" }), r }, e.line = function (j, p, m, r) { var y = P("line", this.node); return q(j, "object") ? y.attr(j) : null != j && y.attr({ x1: j, x2: m, y1: p, y2: r }), y }, e.polyline = function (j) { arguments.length > 1 && (j = Array.prototype.slice.call(arguments, 0)); var p = P("polyline", this.node); return q(j, "object") && !q(j, "array") ? p.attr(j) : null != j && p.attr({ points: j }), p }, e.polygon = function (j) { arguments.length > 1 && (j = Array.prototype.slice.call(arguments, 0)); var p = P("polygon", this.node); return q(j, "object") && !q(j, "array") ? p.attr(j) : null != j && p.attr({ points: j }), p }, function () { e.gradient = function (j) { return ta(this.defs, j) }, e.gradientLinear = function (j, p, m, r) { return na(this.defs, j, p, m, r) }, e.gradientRadial = function (j, p, m, r, y) { return oa(this.defs, j, p, m, r, y) }, e.toString = function () { var j, p = pa.doc.createDocumentFragment(), m = pa.doc.createElement("div"), r = this.node.cloneNode(!0); return p.appendChild(m), m.appendChild(r), o(r, { xmlns: L }), j = m.innerHTML, p.removeChild(p.firstChild), j }, e.clear = function () { for (var j, p = this.node.firstChild; p;)j = p.nextSibling, "defs" != p.tagName && p.parentNode.removeChild(p), p = j } }() }(S.prototype), f.ajax = function (e, j, p, m) { var r = new XMLHttpRequest(), y = x(); if (r) { if (q(j, "function")) m = p, p = j, j = null; else if (q(j, "object")) { var F = []; for (var s in j) j.hasOwnProperty(s) && F.push(encodeURIComponent(s) + "=" + encodeURIComponent(j[s])); j = F.join("&") } return r.open(j ? "POST" : "GET", e, !0), r.setRequestHeader("X-Requested-With", "XMLHttpRequest"), j && r.setRequestHeader("Content-type", "application/x-www-form-urlencoded"), p && (d.once("snap.ajax." + y + ".0", p), d.once("snap.ajax." + y + ".200", p), d.once("snap.ajax." + y + ".304", p)), r.onreadystatechange = function () { 4 == r.readyState && d("snap.ajax." + y + "." + r.status, m, r) }, 4 == r.readyState ? r : (r.send(j), r) } }, f.load = function (e, j, p) { f.ajax(e, function (m) { var r = f.parse(m.responseText); p ? j.call(p, r) : j(r) }) }, d.on("snap.util.attr.mask", function (e) { if (e instanceof t || e instanceof M) { if (d.stop(), e instanceof M && 1 == e.node.childNodes.length && (e = e.node.firstChild, R(this).appendChild(e), e = O(e)), "mask" == e.type) var j = e; else j = P("mask", R(this)), j.node.appendChild(e.node), !j.node.id && o(j.node, { id: j.id }); o(this.node, { mask: aa(j.id) }) } }), function (e) { d.on("snap.util.attr.clip", e), d.on("snap.util.attr.clip-path", e), d.on("snap.util.attr.clipPath", e) }(function (e) { if (e instanceof t || e instanceof M) { if (d.stop(), "clipPath" == e.type) var j = e; else j = P("clipPath", R(this)), j.node.appendChild(e.node), !j.node.id && o(j.node, { id: j.id }); o(this.node, { "clip-path": aa(j.id) }) } }), d.on("snap.util.attr.fill", Y("fill")), d.on("snap.util.attr.stroke", Y("stroke")); var ca = /^([lr])(?:\(([^)]*)\))?(.*)$/i; d.on("snap.util.grad.parse", function (e) { e = za(e); var j = e.match(ca); if (!j) return null; var p = j[1], m = j[2], r = j[3]; return m = m.split(/\s*,\s*/).map(function (y) { return +y == y ? +y : y }), 1 == m.length && 0 == m[0] && (m = []), r = r.split("-"), r = r.map(function (y) { y = y.split(":"); var F = { color: y[0] }; return y[1] && (F.offset = y[1]), F }), { type: p, params: m, stops: r } }), d.on("snap.util.attr.d", function (e) { d.stop(), q(e, "array") && q(e[0], "array") && (e = f.path.toString.call(e)), e = za(e), e.match(/[ruo]/i) && (e = f.path.toAbsolute(e)), o(this.node, { d: e }) })(-1), d.on("snap.util.attr.#text", function (e) { d.stop(), e = za(e); for (var j = pa.doc.createTextNode(e); this.node.firstChild;)this.node.removeChild(this.node.firstChild); this.node.appendChild(j) })(-1), d.on("snap.util.attr.path", function (e) { d.stop(), this.attr({ d: e }) })(-1), d.on("snap.util.attr.viewBox", function (e) { var j; j = q(e, "object") && "x" in e ? [e.x, e.y, e.width, e.height].join(" ") : q(e, "array") ? e.join(" ") : e, o(this.node, { viewBox: j }), d.stop() })(-1), d.on("snap.util.attr.transform", function (e) { this.transform(e), d.stop() })(-1), d.on("snap.util.attr.r", function (e) { "rect" == this.type && (d.stop(), o(this.node, { rx: e, ry: e })) })(-1), d.on("snap.util.attr.textpath", function (e) { if (d.stop(), "text" == this.type) { var j, p, m; if (!e && this.textPath) { for (p = this.textPath; p.node.firstChild;)this.node.appendChild(p.node.firstChild); return p.remove(), delete this.textPath, void 0 } if (q(e, "string")) { var r = R(this), y = O(r.parentNode).path(e); r.appendChild(y.node), j = y.id, y.attr({ id: j }) } else e = O(e), e instanceof t && (j = e.attr("id"), j || (j = e.id, e.attr({ id: j }))); if (j) if (p = this.textPath, m = this.node, p) p.attr({ "xlink:href": "#" + j }); else { for (p = o("textPath", { "xlink:href": "#" + j }); m.firstChild;)p.appendChild(m.firstChild); m.appendChild(p), this.textPath = O(p) } } })(-1), d.on("snap.util.attr.text", function (e) { if ("text" == this.type) { for (var j = this.node, p = function (r) { var y = o("tspan"); if (q(r, "array")) for (var F = 0; F < r.length; F++)y.appendChild(p(r[F])); else y.appendChild(pa.doc.createTextNode(r)); return y.normalize && y.normalize(), y }; j.firstChild;)j.removeChild(j.firstChild); for (var m = p(e); m.firstChild;)j.appendChild(m.firstChild) } d.stop() })(-1); var va = { "alignment-baseline": 0, "baseline-shift": 0, clip: 0, "clip-path": 0, "clip-rule": 0, color: 0, "color-interpolation": 0, "color-interpolation-filters": 0, "color-profile": 0, "color-rendering": 0, cursor: 0, direction: 0, display: 0, "dominant-baseline": 0, "enable-background": 0, fill: 0, "fill-opacity": 0, "fill-rule": 0, filter: 0, "flood-color": 0, "flood-opacity": 0, font: 0, "font-family": 0, "font-size": 0, "font-size-adjust": 0, "font-stretch": 0, "font-style": 0, "font-variant": 0, "font-weight": 0, "glyph-orientation-horizontal": 0, "glyph-orientation-vertical": 0, "image-rendering": 0, kerning: 0, "letter-spacing": 0, "lighting-color": 0, marker: 0, "marker-end": 0, "marker-mid": 0, "marker-start": 0, mask: 0, opacity: 0, overflow: 0, "pointer-events": 0, "shape-rendering": 0, "stop-color": 0, "stop-opacity": 0, stroke: 0, "stroke-dasharray": 0, "stroke-dashoffset": 0, "stroke-linecap": 0, "stroke-linejoin": 0, "stroke-miterlimit": 0, "stroke-opacity": 0, "stroke-width": 0, "text-anchor": 0, "text-decoration": 0, "text-rendering": 0, "unicode-bidi": 0, visibility: 0, "word-spacing": 0, "writing-mode": 0 }; d.on("snap.util.attr", function (e) { var j = d.nt(), p = {}; j = j.substring(j.lastIndexOf(".") + 1), p[j] = e; var m = j.replace(/-(\w)/gi, function (y, F) { return F.toUpperCase() }), r = j.replace(/[A-Z]/g, function (y) { return "-" + y.toLowerCase() }); va[wa](r) ? this.node.style[m] = null == e ? qa : e : o(this.node, p) }), d.on("snap.util.getattr.transform", function () { return d.stop(), this.transform() })(-1), d.on("snap.util.getattr.textpath", function () { return d.stop(), this.textPath })(-1), function () { function e(p) { return function () { d.stop(); var m = pa.doc.defaultView.getComputedStyle(this.node, null).getPropertyValue("marker-" + p); return "none" == m ? m : f(pa.doc.getElementById(m.match(Sa)[1])) } } function j(p) { return function (m) { d.stop(); var r = "marker" + p.charAt(0).toUpperCase() + p.substring(1); if ("" == m || !m) return this.node.style[r] = "none", void 0; if ("marker" == m.type) { var y = m.node.id; return y || o(m.node, { id: m.id }), this.node.style[r] = aa(y), void 0 } } } d.on("snap.util.getattr.marker-end", e("end"))(-1), d.on("snap.util.getattr.markerEnd", e("end"))(-1), d.on("snap.util.getattr.marker-start", e("start"))(-1), d.on("snap.util.getattr.markerStart", e("start"))(-1), d.on("snap.util.getattr.marker-mid", e("mid"))(-1), d.on("snap.util.getattr.markerMid", e("mid"))(-1), d.on("snap.util.attr.marker-end", j("end"))(-1), d.on("snap.util.attr.markerEnd", j("end"))(-1), d.on("snap.util.attr.marker-start", j("start"))(-1), d.on("snap.util.attr.markerStart", j("start"))(-1), d.on("snap.util.attr.marker-mid", j("mid"))(-1), d.on("snap.util.attr.markerMid", j("mid"))(-1) }(), d.on("snap.util.getattr.r", function () { return "rect" == this.type && o(this.node, "rx") == o(this.node, "ry") ? (d.stop(), o(this.node, "rx")) : void 0 })(-1), d.on("snap.util.getattr.text", function () { if ("text" == this.type || "tspan" == this.type) { d.stop(); var e = sa(this.node); return 1 == e.length ? e[0] : e } })(-1), d.on("snap.util.getattr.#text", function () { return this.node.textContent })(-1), d.on("snap.util.getattr.viewBox", function () { d.stop(); var e = o(this.node, "viewBox").split(_a); return f._.box(+e[0], +e[1], +e[2], +e[3]) })(-1), d.on("snap.util.getattr.points", function () { var e = o(this.node, "points"); return d.stop(), e.split(_a) }), d.on("snap.util.getattr.path", function () { var e = o(this.node, "d"); return d.stop(), e }), d.on("snap.util.getattr", function () { var e = d.nt(); e = e.substring(e.lastIndexOf(".") + 1); var j = e.replace(/[A-Z]/g, function (p) { return "-" + p.toLowerCase() }); return va[wa](j) ? pa.doc.defaultView.getComputedStyle(this.node, null).getPropertyValue(j) : o(this.node, e) }); var Ba = function (e) { var j = e.getBoundingClientRect(), p = e.ownerDocument, m = p.body, r = p.documentElement, y = r.clientTop || m.clientTop || 0, F = r.clientLeft || m.clientLeft || 0, s = j.top + (g.win.pageYOffset || r.scrollTop || m.scrollTop) - y, G = j.left + (g.win.pageXOffset || r.scrollLeft || m.scrollLeft) - F; return { y: s, x: G } }; return f.getElementByPoint = function (e, j) { var p = this, m = (p.canvas, pa.doc.elementFromPoint(e, j)); if (pa.win.opera && "svg" == m.tagName) { var r = Ba(m), y = m.createSVGRect(); y.x = e - r.x, y.y = j - r.y, y.width = y.height = 1; var F = m.getIntersectionList(y, null); F.length && (m = F[F.length - 1]) } return m ? O(m) : null }, f.plugin = function (e) { e(f, t, S, pa) }, pa.win.Snap = f, f
    }(); return l.plugin(function (f, o) { function q(u) { var w = q.ps = q.ps || {}; return w[u] ? w[u].sleep = 100 : w[u] = { sleep: 100 }, setTimeout(function () { for (var C in w) w[Oa](C) && C != u && (w[C].sleep--, !w[C].sleep && delete w[C]) }), w[u] } function z(u, w, C, x) { return null == u && (u = w = C = x = 0), null == w && (w = u.y, C = u.width, x = u.height, u = u.x), { x: u, y: w, width: C, w: C, height: x, h: x, x2: u + C, y2: w + x, cx: u + C / 2, cy: w + x / 2, r1: qa.min(C, x) / 2, r2: qa.max(C, x) / 2, r0: qa.sqrt(C * C + x * x) / 2, path: X(u, w, C, x), vb: [u, w, C, x].join(" ") } } function I() { return this.join(",").replace(Ua, "$1") } function D(u) { var w = Ra(u); return w.toString = I, w } function B(u, w, C, x, H, L, _, aa, K) { return null == K ? R(u, w, C, x, H, L, _, aa) : J(u, w, C, x, H, L, _, aa, ea(u, w, C, x, H, L, _, aa, K)) } function v(u, w) { function C(x) { return +(+x).toFixed(3) } return f._.cacher(function (x, H, L) { x instanceof o && (x = x.attr("d")), x = wa(x); for (var _, aa, K, V, W, ka = "", fa = {}, ha = 0, ja = 0, ma = x.length; ma > ja; ja++) { if (K = x[ja], "M" == K[0]) _ = +K[1], aa = +K[2]; else { if (V = B(_, aa, K[1], K[2], K[3], K[4], K[5], K[6]), ha + V > H) { if (w && !fa.start) { if (W = B(_, aa, K[1], K[2], K[3], K[4], K[5], K[6], H - ha), ka += ["C" + C(W.start.x), C(W.start.y), C(W.m.x), C(W.m.y), C(W.x), C(W.y)], L) return ka; fa.start = ka, ka = ["M" + C(W.x), C(W.y) + "C" + C(W.n.x), C(W.n.y), C(W.end.x), C(W.end.y), C(K[5]), C(K[6])].join(), ha += V, _ = +K[5], aa = +K[6]; continue } if (!u && !w) return W = B(_, aa, K[1], K[2], K[3], K[4], K[5], K[6], H - ha) } ha += V, _ = +K[5], aa = +K[6] } ka += K.shift() + K } return fa.end = ka, W = u ? ha : w ? fa : J(_, aa, K[0], K[1], K[2], K[3], K[4], K[5], 1) }, null, f._.clone) } function J(u, w, C, x, H, L, _, aa, K) { var V = 1 - K, W = Sa(V, 3), ka = Sa(V, 2), fa = K * K, ha = fa * K, ja = W * u + 3 * ka * K * C + 3 * V * K * K * H + ha * _, ma = W * w + 3 * ka * K * x + 3 * V * K * K * L + ha * aa, ia = u + 2 * K * (C - u) + fa * (H - 2 * C + u), ca = w + 2 * K * (x - w) + fa * (L - 2 * x + w), va = C + 2 * K * (H - C) + fa * (_ - 2 * H + C), Ba = x + 2 * K * (L - x) + fa * (aa - 2 * L + x), e = V * u + K * C, j = V * w + K * x, p = V * H + K * _, m = V * L + K * aa, r = 90 - 180 * qa.atan2(ia - va, ca - Ba) / Ja; return { x: ja, y: ma, m: { x: ia, y: ca }, n: { x: va, y: Ba }, start: { x: e, y: j }, end: { x: p, y: m }, alpha: r } } function A(u, w, C, x, H, L, _, aa) { f.is(u, "array") || (u = [u, w, C, x, H, L, _, aa]); var K = pa.apply(null, u); return z(K.min.x, K.min.y, K.max.x - K.min.x, K.max.y - K.min.y) } function N(u, w, C) { return w >= u.x && w <= u.x + u.width && C >= u.y && C <= u.y + u.height } function ba(u, w) { return u = z(u), w = z(w), N(w, u.x, u.y) || N(w, u.x2, u.y) || N(w, u.x, u.y2) || N(w, u.x2, u.y2) || N(u, w.x, w.y) || N(u, w.x2, w.y) || N(u, w.x, w.y2) || N(u, w.x2, w.y2) || (u.x < w.x2 && u.x > w.x || w.x < u.x2 && w.x > u.x) && (u.y < w.y2 && u.y > w.y || w.y < u.y2 && w.y > u.y) } function Q(u, w, C, x, H) { var L = -3 * w + 9 * C - 9 * x + 3 * H, _ = u * L + 6 * w - 12 * C + 6 * x; return u * _ - 3 * w + 3 * C } function R(u, w, C, x, H, L, _, aa, K) { null == K && (K = 1), K = K > 1 ? 1 : 0 > K ? 0 : K; for (var V = K / 2, W = 12, ka = [-.1252, .1252, -.3678, .3678, -.5873, .5873, -.7699, .7699, -.9041, .9041, -.9816, .9816], fa = [.2491, .2491, .2335, .2335, .2032, .2032, .1601, .1601, .1069, .1069, .0472, .0472], ha = 0, ja = 0; W > ja; ja++) { var ma = V * ka[ja] + V, ia = Q(ma, u, C, H, _), ca = Q(ma, w, x, L, aa), va = ia * ia + ca * ca; ha += fa[ja] * qa.sqrt(va) } return V * ha } function ea(u, w, C, x, H, L, _, aa, K) { if (!(0 > K || R(u, w, C, x, H, L, _, aa) < K)) { var V, W = 1, ka = W / 2, fa = W - ka, ha = .01; for (V = R(u, w, C, x, H, L, _, aa, fa); Ca(V - K) > ha;)ka /= 2, fa += (K > V ? 1 : -1) * ka, V = R(u, w, C, x, H, L, _, aa, fa); return fa } } function $(u, w, C, x, H, L, _, aa) { if (!(Ga(u, C) < Ka(H, _) || Ka(u, C) > Ga(H, _) || Ga(w, x) < Ka(L, aa) || Ka(w, x) > Ga(L, aa))) { var K = (u * x - w * C) * (H - _) - (u - C) * (H * aa - L * _), V = (u * x - w * C) * (L - aa) - (w - x) * (H * aa - L * _), W = (u - C) * (L - aa) - (w - x) * (H - _); if (W) { var ka = K / W, fa = V / W, ha = +ka.toFixed(2), ja = +fa.toFixed(2); if (!(ha < +Ka(u, C).toFixed(2) || ha > +Ga(u, C).toFixed(2) || ha < +Ka(H, _).toFixed(2) || ha > +Ga(H, _).toFixed(2) || ja < +Ka(w, x).toFixed(2) || ja > +Ga(w, x).toFixed(2) || ja < +Ka(L, aa).toFixed(2) || ja > +Ga(L, aa).toFixed(2))) return { x: ka, y: fa } } } } function t(u, w, C) { var x = A(u), H = A(w); if (!ba(x, H)) return C ? 0 : []; for (var L = R.apply(0, u), _ = R.apply(0, w), aa = ~~(L / 5), K = ~~(_ / 5), V = [], W = [], ka = {}, fa = C ? 0 : [], ha = 0; aa + 1 > ha; ha++) { var ja = J.apply(0, u.concat(ha / aa)); V.push({ x: ja.x, y: ja.y, t: ha / aa }) } for (ha = 0; K + 1 > ha; ha++)ja = J.apply(0, w.concat(ha / K)), W.push({ x: ja.x, y: ja.y, t: ha / K }); for (ha = 0; aa > ha; ha++)for (var ma = 0; K > ma; ma++) { var ia = V[ha], ca = V[ha + 1], va = W[ma], Ba = W[ma + 1], e = Ca(ca.x - ia.x) < .001 ? "y" : "x", j = Ca(Ba.x - va.x) < .001 ? "y" : "x", p = $(ia.x, ia.y, ca.x, ca.y, va.x, va.y, Ba.x, Ba.y); if (p) { if (ka[p.x.toFixed(4)] == p.y.toFixed(4)) continue; ka[p.x.toFixed(4)] = p.y.toFixed(4); var m = ia.t + Ca((p[e] - ia[e]) / (ca[e] - ia[e])) * (ca.t - ia.t), r = va.t + Ca((p[j] - va[j]) / (Ba[j] - va[j])) * (Ba.t - va.t); m >= 0 && 1 >= m && r >= 0 && 1 >= r && (C ? fa++ : fa.push({ x: p.x, y: p.y, t1: m, t2: r })) } } return fa } function E(u, w) { return P(u, w) } function M(u, w) { return P(u, w, 1) } function P(u, w, C) { u = wa(u), w = wa(w); for (var x, H, L, _, aa, K, V, W, ka, fa, ha = C ? 0 : [], ja = 0, ma = u.length; ma > ja; ja++) { var ia = u[ja]; if ("M" == ia[0]) x = aa = ia[1], H = K = ia[2]; else { "C" == ia[0] ? (ka = [x, H].concat(ia.slice(1)), x = ka[6], H = ka[7]) : (ka = [x, H, x, H, aa, K, aa, K], x = aa, H = K); for (var ca = 0, va = w.length; va > ca; ca++) { var Ba = w[ca]; if ("M" == Ba[0]) L = V = Ba[1], _ = W = Ba[2]; else { "C" == Ba[0] ? (fa = [L, _].concat(Ba.slice(1)), L = fa[6], _ = fa[7]) : (fa = [L, _, L, _, V, W, V, W], L = V, _ = W); var e = t(ka, fa, C); if (C) ha += e; else { for (var j = 0, p = e.length; p > j; j++)e[j].segment1 = ja, e[j].segment2 = ca, e[j].bez1 = ka, e[j].bez2 = fa; ha = ha.concat(e) } } } } } return ha } function S(u, w, C) { var x = O(u); return N(x, w, C) && 1 == P(u, [["M", w, C], ["H", x.x2 + 10]], 1) % 2 } function O(u) { var w = q(u); if (w.bbox) return Ra(w.bbox); if (!u) return z(); u = wa(u); for (var C, x = 0, H = 0, L = [], _ = [], aa = 0, K = u.length; K > aa; aa++)if (C = u[aa], "M" == C[0]) x = C[1], H = C[2], L.push(x), _.push(H); else { var V = pa(x, H, C[1], C[2], C[3], C[4], C[5], C[6]); L = L.concat(V.min.x, V.max.x), _ = _.concat(V.min.y, V.max.y), x = C[5], H = C[6] } var W = Ka.apply(0, L), ka = Ka.apply(0, _), fa = Ga.apply(0, L), ha = Ga.apply(0, _), ja = z(W, ka, fa - W, ha - ka); return w.bbox = Ra(ja), ja } function X(u, w, C, x, H) { if (H) return [["M", u + H, w], ["l", C - 2 * H, 0], ["a", H, H, 0, 0, 1, H, H], ["l", 0, x - 2 * H], ["a", H, H, 0, 0, 1, -H, H], ["l", 2 * H - C, 0], ["a", H, H, 0, 0, 1, -H, -H], ["l", 0, 2 * H - x], ["a", H, H, 0, 0, 1, H, -H], ["z"]]; var L = [["M", u, w], ["l", C, 0], ["l", 0, x], ["l", -C, 0], ["z"]]; return L.toString = I, L } function da(u, w, C, x, H) { if (null == H && null == x && (x = C), null != H) var L = Math.PI / 180, _ = u + C * Math.cos(-x * L), aa = u + C * Math.cos(-H * L), K = w + C * Math.sin(-x * L), V = w + C * Math.sin(-H * L), W = [["M", _, K], ["A", C, C, 0, +(H - x > 180), 0, aa, V]]; else W = [["M", u, w], ["m", 0, -x], ["a", C, x, 0, 1, 1, 0, 2 * x], ["a", C, x, 0, 1, 1, 0, -2 * x], ["z"]]; return W.toString = I, W } function la(u) { var w = q(u), C = String.prototype.toLowerCase; if (w.rel) return D(w.rel); f.is(u, "array") && f.is(u && u[0], "array") || (u = f.parsePathString(u)); var x = [], H = 0, L = 0, _ = 0, aa = 0, K = 0; "M" == u[0][0] && (H = u[0][1], L = u[0][2], _ = H, aa = L, K++, x.push(["M", H, L])); for (var V = K, W = u.length; W > V; V++) { var ka = x[V] = [], fa = u[V]; if (fa[0] != C.call(fa[0])) switch (ka[0] = C.call(fa[0]), ka[0]) { case "a": ka[1] = fa[1], ka[2] = fa[2], ka[3] = fa[3], ka[4] = fa[4], ka[5] = fa[5], ka[6] = +(fa[6] - H).toFixed(3), ka[7] = +(fa[7] - L).toFixed(3); break; case "v": ka[1] = +(fa[1] - L).toFixed(3); break; case "m": _ = fa[1], aa = fa[2]; default: for (var ha = 1, ja = fa.length; ja > ha; ha++)ka[ha] = +(fa[ha] - (ha % 2 ? H : L)).toFixed(3) } else { ka = x[V] = [], "m" == fa[0] && (_ = fa[1] + H, aa = fa[2] + L); for (var ma = 0, ia = fa.length; ia > ma; ma++)x[V][ma] = fa[ma] } var ca = x[V].length; switch (x[V][0]) { case "z": H = _, L = aa; break; case "h": H += +x[V][ca - 1]; break; case "v": L += +x[V][ca - 1]; break; default: H += +x[V][ca - 2], L += +x[V][ca - 1] } } return x.toString = I, w.rel = D(x), x } function ta(u) { var w = q(u); if (w.abs) return D(w.abs); if (xa(u, "array") && xa(u && u[0], "array") || (u = f.parsePathString(u)), !u || !u.length) return [["M", 0, 0]]; var C, x = [], H = 0, L = 0, _ = 0, aa = 0, K = 0; "M" == u[0][0] && (H = +u[0][1], L = +u[0][2], _ = H, aa = L, K++, x[0] = ["M", H, L]); for (var V, W, ka = 3 == u.length && "M" == u[0][0] && "R" == u[1][0].toUpperCase() && "Z" == u[2][0].toUpperCase(), fa = K, ha = u.length; ha > fa; fa++) { if (x.push(V = []), W = u[fa], C = W[0], C != C.toUpperCase()) switch (V[0] = C.toUpperCase(), V[0]) { case "A": V[1] = W[1], V[2] = W[2], V[3] = W[3], V[4] = W[4], V[5] = W[5], V[6] = +(W[6] + H), V[7] = +(W[7] + L); break; case "V": V[1] = +W[1] + L; break; case "H": V[1] = +W[1] + H; break; case "R": for (var ja = [H, L].concat(W.slice(1)), ma = 2, ia = ja.length; ia > ma; ma++)ja[ma] = +ja[ma] + H, ja[++ma] = +ja[ma] + L; x.pop(), x = x.concat(Da(ja, ka)); break; case "O": x.pop(), ja = da(H, L, W[1], W[2]), ja.push(ja[0]), x = x.concat(ja); break; case "U": x.pop(), x = x.concat(da(H, L, W[1], W[2], W[3])), V = ["U"].concat(x[x.length - 1].slice(-2)); break; case "M": _ = +W[1] + H, aa = +W[2] + L; default: for (ma = 1, ia = W.length; ia > ma; ma++)V[ma] = +W[ma] + (ma % 2 ? H : L) } else if ("R" == C) ja = [H, L].concat(W.slice(1)), x.pop(), x = x.concat(Da(ja, ka)), V = ["R"].concat(W.slice(-2)); else if ("O" == C) x.pop(), ja = da(H, L, W[1], W[2]), ja.push(ja[0]), x = x.concat(ja); else if ("U" == C) x.pop(), x = x.concat(da(H, L, W[1], W[2], W[3])), V = ["U"].concat(x[x.length - 1].slice(-2)); else for (var ca = 0, va = W.length; va > ca; ca++)V[ca] = W[ca]; if (C = C.toUpperCase(), "O" != C) switch (V[0]) { case "Z": H = _, L = aa; break; case "H": H = V[1]; break; case "V": L = V[1]; break; case "M": _ = V[V.length - 2], aa = V[V.length - 1]; default: H = V[V.length - 2], L = V[V.length - 1] } } return x.toString = I, w.abs = D(x), x } function na(u, w, C, x) { return [u, w, C, x, C, x] } function oa(u, w, C, x, H, L) { var _ = 1 / 3, aa = 2 / 3; return [_ * u + aa * C, _ * w + aa * x, _ * H + aa * C, _ * L + aa * x, H, L] } function Y(u, w, C, x, H, L, _, aa, K, V) { var W, ka = 120 * Ja / 180, fa = Ja / 180 * (+H || 0), ha = [], ja = f._.cacher(function (Fa, Va, Qa) { var ab = Fa * qa.cos(Qa) - Va * qa.sin(Qa), bb = Fa * qa.sin(Qa) + Va * qa.cos(Qa); return { x: ab, y: bb } }); if (V) m = V[0], r = V[1], j = V[2], p = V[3]; else { W = ja(u, w, -fa), u = W.x, w = W.y, W = ja(aa, K, -fa), aa = W.x, K = W.y; var ma = (qa.cos(Ja / 180 * H), qa.sin(Ja / 180 * H), (u - aa) / 2), ia = (w - K) / 2, ca = ma * ma / (C * C) + ia * ia / (x * x); ca > 1 && (ca = qa.sqrt(ca), C = ca * C, x = ca * x); var va = C * C, Ba = x * x, e = (L == _ ? -1 : 1) * qa.sqrt(Ca((va * Ba - va * ia * ia - Ba * ma * ma) / (va * ia * ia + Ba * ma * ma))), j = e * C * ia / x + (u + aa) / 2, p = e * -x * ma / C + (w + K) / 2, m = qa.asin(((w - p) / x).toFixed(9)), r = qa.asin(((K - p) / x).toFixed(9)); m = j > u ? Ja - m : m, r = j > aa ? Ja - r : r, 0 > m && (m = 2 * Ja + m), 0 > r && (r = 2 * Ja + r), _ && m > r && (m -= 2 * Ja), !_ && r > m && (r -= 2 * Ja) } var y = r - m; if (Ca(y) > ka) { var F = r, s = aa, G = K; r = m + ka * (_ && r > m ? 1 : -1), aa = j + C * qa.cos(r), K = p + x * qa.sin(r), ha = Y(aa, K, C, x, H, 0, _, s, G, [r, F, j, p]) } y = r - m; var T = qa.cos(m), Z = qa.sin(m), U = qa.cos(r), ra = qa.sin(r), ua = qa.tan(y / 4), Aa = 4 / 3 * C * ua, ya = 4 / 3 * x * ua, Ta = [u, w], La = [u + Aa * Z, w - ya * T], Ia = [aa + Aa * ra, K - ya * U], Na = [aa, K]; if (La[0] = 2 * Ta[0] - La[0], La[1] = 2 * Ta[1] - La[1], V) return [La, Ia, Na].concat(ha); ha = [La, Ia, Na].concat(ha).join().split(","); for (var Ya = [], Ha = 0, Ea = ha.length; Ea > Ha; Ha++)Ya[Ha] = Ha % 2 ? ja(ha[Ha - 1], ha[Ha], fa).y : ja(ha[Ha], ha[Ha + 1], fa).x; return Ya } function sa(u, w, C, x, H, L, _, aa, K) { var V = 1 - K; return { x: Sa(V, 3) * u + 3 * Sa(V, 2) * K * C + 3 * V * K * K * H + Sa(K, 3) * _, y: Sa(V, 3) * w + 3 * Sa(V, 2) * K * x + 3 * V * K * K * L + Sa(K, 3) * aa } } function pa(u, w, C, x, H, L, _, aa) { var K, V = H - 2 * C + u - (_ - 2 * H + C), W = 2 * (C - u) - 2 * (H - C), ka = u - C, fa = (-W + qa.sqrt(W * W - 4 * V * ka)) / 2 / V, ha = (-W - qa.sqrt(W * W - 4 * V * ka)) / 2 / V, ja = [w, aa], ma = [u, _]; return Ca(fa) > "1e12" && (fa = .5), Ca(ha) > "1e12" && (ha = .5), fa > 0 && 1 > fa && (K = sa(u, w, C, x, H, L, _, aa, fa), ma.push(K.x), ja.push(K.y)), ha > 0 && 1 > ha && (K = sa(u, w, C, x, H, L, _, aa, ha), ma.push(K.x), ja.push(K.y)), V = L - 2 * x + w - (aa - 2 * L + x), W = 2 * (x - w) - 2 * (L - x), ka = w - x, fa = (-W + qa.sqrt(W * W - 4 * V * ka)) / 2 / V, ha = (-W - qa.sqrt(W * W - 4 * V * ka)) / 2 / V, Ca(fa) > "1e12" && (fa = .5), Ca(ha) > "1e12" && (ha = .5), fa > 0 && 1 > fa && (K = sa(u, w, C, x, H, L, _, aa, fa), ma.push(K.x), ja.push(K.y)), ha > 0 && 1 > ha && (K = sa(u, w, C, x, H, L, _, aa, ha), ma.push(K.x), ja.push(K.y)), { min: { x: Ka.apply(0, ma), y: Ka.apply(0, ja) }, max: { x: Ga.apply(0, ma), y: Ga.apply(0, ja) } } } function wa(u, w) { var C = !w && q(u); if (!w && C.curve) return D(C.curve); for (var x = ta(u), H = w && ta(w), L = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, _ = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, aa = function (ia, ca) { var va, Ba; if (!ia) return ["C", ca.x, ca.y, ca.x, ca.y, ca.x, ca.y]; switch (!(ia[0] in { T: 1, Q: 1 }) && (ca.qx = ca.qy = null), ia[0]) { case "M": ca.X = ia[1], ca.Y = ia[2]; break; case "A": ia = ["C"].concat(Y.apply(0, [ca.x, ca.y].concat(ia.slice(1)))); break; case "S": va = ca.x + (ca.x - (ca.bx || ca.x)), Ba = ca.y + (ca.y - (ca.by || ca.y)), ia = ["C", va, Ba].concat(ia.slice(1)); break; case "T": ca.qx = ca.x + (ca.x - (ca.qx || ca.x)), ca.qy = ca.y + (ca.y - (ca.qy || ca.y)), ia = ["C"].concat(oa(ca.x, ca.y, ca.qx, ca.qy, ia[1], ia[2])); break; case "Q": ca.qx = ia[1], ca.qy = ia[2], ia = ["C"].concat(oa(ca.x, ca.y, ia[1], ia[2], ia[3], ia[4])); break; case "L": ia = ["C"].concat(na(ca.x, ca.y, ia[1], ia[2])); break; case "H": ia = ["C"].concat(na(ca.x, ca.y, ia[1], ca.y)); break; case "V": ia = ["C"].concat(na(ca.x, ca.y, ca.x, ia[1])); break; case "Z": ia = ["C"].concat(na(ca.x, ca.y, ca.X, ca.Y)) }return ia }, K = function (ia, ca) { if (ia[ca].length > 7) { ia[ca].shift(); for (var va = ia[ca]; va.length;)ia.splice(ca++, 0, ["C"].concat(va.splice(0, 6))); ia.splice(ca, 1), ka = Ga(x.length, H && H.length || 0) } }, V = function (ia, ca, va, Ba, e) { ia && ca && "M" == ia[e][0] && "M" != ca[e][0] && (ca.splice(e, 0, ["M", Ba.x, Ba.y]), va.bx = 0, va.by = 0, va.x = ia[e][1], va.y = ia[e][2], ka = Ga(x.length, H && H.length || 0)) }, W = 0, ka = Ga(x.length, H && H.length || 0); ka > W; W++) { x[W] = aa(x[W], L), K(x, W), H && (H[W] = aa(H[W], _)), H && K(H, W), V(x, H, L, _, W), V(H, x, _, L, W); var fa = x[W], ha = H && H[W], ja = fa.length, ma = H && ha.length; L.x = fa[ja - 2], L.y = fa[ja - 1], L.bx = Pa(fa[ja - 4]) || L.x, L.by = Pa(fa[ja - 3]) || L.y, _.bx = H && (Pa(ha[ma - 4]) || _.x), _.by = H && (Pa(ha[ma - 3]) || _.y), _.x = H && ha[ma - 2], _.y = H && ha[ma - 1] } return H || (C.curve = D(x)), H ? [x, H] : x } function za(u, w) { if (!w) return u; var C, x, H, L, _, aa, K; for (u = wa(u), H = 0, _ = u.length; _ > H; H++)for (K = u[H], L = 1, aa = K.length; aa > L; L += 2)C = w.x(K[L], K[L + 1]), x = w.y(K[L], K[L + 1]), K[L] = C, K[L + 1] = x; return u } function Da(u, w) { for (var C = [], x = 0, H = u.length; H - 2 * !w > x; x += 2) { var L = [{ x: +u[x - 2], y: +u[x - 1] }, { x: +u[x], y: +u[x + 1] }, { x: +u[x + 2], y: +u[x + 3] }, { x: +u[x + 4], y: +u[x + 5] }]; w ? x ? H - 4 == x ? L[3] = { x: +u[0], y: +u[1] } : H - 2 == x && (L[2] = { x: +u[0], y: +u[1] }, L[3] = { x: +u[2], y: +u[3] }) : L[0] = { x: +u[H - 2], y: +u[H - 1] } : H - 4 == x ? L[3] = L[2] : x || (L[0] = { x: +u[x], y: +u[x + 1] }), C.push(["C", (-L[0].x + 6 * L[1].x + L[2].x) / 6, (-L[0].y + 6 * L[1].y + L[2].y) / 6, (L[1].x + 6 * L[2].x - L[3].x) / 6, (L[1].y + 6 * L[2].y - L[3].y) / 6, L[2].x, L[2].y]) } return C } var Ma = o.prototype, xa = f.is, Ra = f._.clone, Oa = "hasOwnProperty", Ua = /,?([a-z]),?/gi, Pa = parseFloat, qa = Math, Ja = qa.PI, Ka = qa.min, Ga = qa.max, Sa = qa.pow, Ca = qa.abs, _a = v(1), Wa = v(), Za = v(0, 1), Xa = f._unit2px, $a = { path: function (u) { return u.attr("path") }, circle: function (u) { var w = Xa(u); return da(w.cx, w.cy, w.r) }, ellipse: function (u) { var w = Xa(u); return da(w.cx, w.cy, w.rx, w.ry) }, rect: function (u) { var w = Xa(u); return X(w.x, w.y, w.width, w.height, w.rx, w.ry) }, image: function (u) { var w = Xa(u); return X(w.x, w.y, w.width, w.height) }, text: function (u) { var w = u.node.getBBox(); return X(w.x, w.y, w.width, w.height) }, g: function (u) { var w = u.node.getBBox(); return X(w.x, w.y, w.width, w.height) }, symbol: function (u) { var w = u.getBBox(); return X(w.x, w.y, w.width, w.height) }, line: function (u) { return "M" + [u.attr("x1"), u.attr("y1"), u.attr("x2"), u.attr("y2")] }, polyline: function (u) { return "M" + u.attr("points") }, polygon: function (u) { return "M" + u.attr("points") + "z" }, svg: function (u) { var w = u.node.getBBox(); return X(w.x, w.y, w.width, w.height) }, deflt: function (u) { var w = u.node.getBBox(); return X(w.x, w.y, w.width, w.height) } }; f.path = q, f.path.getTotalLength = _a, f.path.getPointAtLength = Wa, f.path.getSubpath = function (u, w, C) { if (this.getTotalLength(u) - C < 1e-6) return Za(u, w).end; var x = Za(u, C, 1); return w ? Za(x, w).end : x }, Ma.getTotalLength = function () { return this.node.getTotalLength ? this.node.getTotalLength() : void 0 }, Ma.getPointAtLength = function (u) { return Wa(this.attr("d"), u) }, Ma.getSubpath = function (u, w) { return f.path.getSubpath(this.attr("d"), u, w) }, f._.box = z, f.path.findDotsAtSegment = J, f.path.bezierBBox = A, f.path.isPointInsideBBox = N, f.path.isBBoxIntersect = ba, f.path.intersection = E, f.path.intersectionNumber = M, f.path.isPointInside = S, f.path.getBBox = O, f.path.get = $a, f.path.toRelative = la, f.path.toAbsolute = ta, f.path.toCubic = wa, f.path.map = za, f.path.toString = I, f.path.clone = D }), l.plugin(function (f) { var o = Math.max, q = Math.min, z = function (D) { if (this.items = [], this.length = 0, this.type = "set", D) for (var B = 0, v = D.length; v > B; B++)D[B] && (this[this.items.length] = this.items[this.items.length] = D[B], this.length++) }, I = z.prototype; I.push = function () { for (var D, B, v = 0, J = arguments.length; J > v; v++)D = arguments[v], D && (B = this.items.length, this[B] = this.items[B] = D, this.length++); return this }, I.pop = function () { return this.length && delete this[this.length--], this.items.pop() }, I.forEach = function (D, B) { for (var v = 0, J = this.items.length; J > v; v++)if (D.call(B, this.items[v], v) === !1) return this; return this }, I.remove = function () { for (; this.length;)this.pop().remove(); return this }, I.attr = function (D) { for (var B = 0, v = this.items.length; v > B; B++)this.items[B].attr(D); return this }, I.clear = function () { for (; this.length;)this.pop() }, I.splice = function (D, B) { D = 0 > D ? o(this.length + D, 0) : D, B = o(0, q(this.length - D, B)); var v, J = [], A = [], N = []; for (v = 2; v < arguments.length; v++)N.push(arguments[v]); for (v = 0; B > v; v++)A.push(this[D + v]); for (; v < this.length - D; v++)J.push(this[D + v]); var ba = N.length; for (v = 0; v < ba + J.length; v++)this.items[D + v] = this[D + v] = ba > v ? N[v] : J[v - ba]; for (v = this.items.length = this.length -= B - ba; this[v];)delete this[v++]; return new z(A) }, I.exclude = function (D) { for (var B = 0, v = this.length; v > B; B++)if (this[B] == D) return this.splice(B, 1), !0; return !1 }, I.insertAfter = function (D) { for (var B = this.items.length; B--;)this.items[B].insertAfter(D); return this }, I.getBBox = function () { for (var D = [], B = [], v = [], J = [], A = this.items.length; A--;)if (!this.items[A].removed) { var N = this.items[A].getBBox(); D.push(N.x), B.push(N.y), v.push(N.x + N.width), J.push(N.y + N.height) } return D = q.apply(0, D), B = q.apply(0, B), v = o.apply(0, v), J = o.apply(0, J), { x: D, y: B, x2: v, y2: J, width: v - D, height: J - B, cx: D + (v - D) / 2, cy: B + (J - B) / 2 } }, I.clone = function (D) { D = new z(); for (var B = 0, v = this.items.length; v > B; B++)D.push(this.items[B].clone()); return D }, I.toString = function () { return "Snapâ€˜s set" }, I.type = "set", f.set = function () { var D = new z(); return arguments.length && D.push.apply(D, Array.prototype.slice.call(arguments, 0)), D } }), l.plugin(function (f, o) { function q(Q) { var R = Q[0]; switch (R.toLowerCase()) { case "t": return [R, 0, 0]; case "m": return [R, 1, 0, 0, 1, 0, 0]; case "r": return 4 == Q.length ? [R, 0, Q[2], Q[3]] : [R, 0]; case "s": return 5 == Q.length ? [R, 1, 1, Q[3], Q[4]] : 3 == Q.length ? [R, 1, 1] : [R, 1] } } function z(Q, R, ea) { R = ba(R).replace(/\.{3}|\u2026/g, Q), Q = f.parseTransformString(Q) || [], R = f.parseTransformString(R) || []; for (var $, t, E, M, P = Math.max(Q.length, R.length), S = [], O = [], X = 0; P > X; X++) { if (E = Q[X] || q(R[X]), M = R[X] || q(E), E[0] != M[0] || "r" == E[0].toLowerCase() && (E[2] != M[2] || E[3] != M[3]) || "s" == E[0].toLowerCase() && (E[3] != M[3] || E[4] != M[4])) { Q = f._.transform2matrix(Q, ea()), R = f._.transform2matrix(R, ea()), S = [["m", Q.a, Q.b, Q.c, Q.d, Q.e, Q.f]], O = [["m", R.a, R.b, R.c, R.d, R.e, R.f]]; break } for (S[X] = [], O[X] = [], $ = 0, t = Math.max(E.length, M.length); t > $; $++)$ in E && (S[X][$] = E[$]), $ in M && (O[X][$] = M[$]) } return { from: J(S), to: J(O), f: v(S) } } function I(Q) { return Q } function D(Q) { return function (R) { return +R.toFixed(3) + Q } } function B(Q) { return f.rgb(Q[0], Q[1], Q[2]) } function v(Q) { var R, ea, $, t, E, M, P = 0, S = []; for (R = 0, ea = Q.length; ea > R; R++) { for (E = "[", M = ['"' + Q[R][0] + '"'], $ = 1, t = Q[R].length; t > $; $++)M[$] = "val[" + P++ + "]"; E += M + "]", S[R] = E } return Function("val", "return Snap.path.toString.call([" + S + "])") } function J(Q) { for (var R = [], ea = 0, $ = Q.length; $ > ea; ea++)for (var t = 1, E = Q[ea].length; E > t; t++)R.push(Q[ea][t]); return R } var A = {}, N = /[a-z]+$/i, ba = String; A.stroke = A.fill = "colour", o.prototype.equal = function (Q, R) { var ea, $, t = ba(this.attr(Q) || ""), E = this; if (t == +t && R == +R) return { from: +t, to: +R, f: I }; if ("colour" == A[Q]) return ea = f.color(t), $ = f.color(R), { from: [ea.r, ea.g, ea.b, ea.opacity], to: [$.r, $.g, $.b, $.opacity], f: B }; if ("transform" == Q || "gradientTransform" == Q || "patternTransform" == Q) return R instanceof f.Matrix && (R = R.toTransformString()), f._.rgTransform.test(R) || (R = f._.svgTransform2string(R)), z(t, R, function () { return E.getBBox(1) }); if ("d" == Q || "path" == Q) return ea = f.path.toCubic(t, R), { from: J(ea[0]), to: J(ea[1]), f: v(ea[0]) }; if ("points" == Q) return ea = ba(t).split(","), $ = ba(R).split(","), { from: ea, to: $, f: function (S) { return S } }; var M = t.match(N), P = ba(R).match(N); return M && M == P ? { from: parseFloat(t), to: parseFloat(R), f: D(M) } : { from: this.asPX(Q), to: this.asPX(Q, R), f: I } } }), l.plugin(function (f, o, q, z) { for (var I = o.prototype, D = "hasOwnProperty", B = ("createTouch" in z.doc), v = ["click", "dblclick", "mousedown", "mousemove", "mouseout", "mouseover", "mouseup", "touchstart", "touchmove", "touchend", "touchcancel"], J = { mousedown: "touchstart", mousemove: "touchmove", mouseup: "touchend" }, A = function (S) { var O = "y" == S ? "scrollTop" : "scrollLeft"; return z.doc.documentElement[O] || z.doc.body[O] }, N = function () { this.returnValue = !1 }, ba = function () { return this.originalEvent.preventDefault() }, Q = function () { this.cancelBubble = !0 }, R = function () { return this.originalEvent.stopPropagation() }, ea = function () { return z.doc.addEventListener ? function (S, O, X, da) { var la = B && J[O] ? J[O] : O, ta = function (na) { var oa = A("y"), Y = A("x"); if (B && J[D](O)) { for (var sa = 0, pa = na.targetTouches && na.targetTouches.length; pa > sa; sa++)if (na.targetTouches[sa].target == S || S.contains(na.targetTouches[sa].target)) { var wa = na; na = na.targetTouches[sa], na.originalEvent = wa, na.preventDefault = ba, na.stopPropagation = R; break } } var za = na.clientX + Y, Da = na.clientY + oa; return X.call(da, na, za, Da) }; return O !== la && S.addEventListener(O, ta, !1), S.addEventListener(la, ta, !1), function () { return O !== la && S.removeEventListener(O, ta, !1), S.removeEventListener(la, ta, !1), !0 } } : z.doc.attachEvent ? function (S, O, X, da) { var la = function (na) { na = na || z.win.event; var oa = A("y"), Y = A("x"), sa = na.clientX + Y, pa = na.clientY + oa; return na.preventDefault = na.preventDefault || N, na.stopPropagation = na.stopPropagation || Q, X.call(da, na, sa, pa) }; S.attachEvent("on" + O, la); var ta = function () { return S.detachEvent("on" + O, la), !0 }; return ta } : void 0 }(), $ = [], t = function (S) { for (var O, X = S.clientX, da = S.clientY, la = A("y"), ta = A("x"), na = $.length; na--;) { if (O = $[na], B) { for (var oa, Y = S.touches && S.touches.length; Y--;)if (oa = S.touches[Y], oa.identifier == O.el._drag.id || O.el.node.contains(oa.target)) { X = oa.clientX, da = oa.clientY, (S.originalEvent ? S.originalEvent : S).preventDefault(); break } } else S.preventDefault(); var sa = O.el.node; f._.glob, sa.nextSibling, sa.parentNode, sa.style.display, X += ta, da += la, d("snap.drag.move." + O.el.id, O.move_scope || O.el, X - O.el._drag.x, da - O.el._drag.y, X, da, S) } }, E = function (S) { f.unmousemove(t).unmouseup(E); for (var O, X = $.length; X--;)O = $[X], O.el._drag = {}, d("snap.drag.end." + O.el.id, O.end_scope || O.start_scope || O.move_scope || O.el, S); $ = [] }, M = v.length; M--;)!function (S) { f[S] = I[S] = function (O, X) { return f.is(O, "function") && (this.events = this.events || [], this.events.push({ name: S, f: O, unbind: ea(this.shape || this.node || z.doc, S, O, X || this) })), this }, f["un" + S] = I["un" + S] = function (O) { for (var X = this.events || [], da = X.length; da--;)if (X[da].name == S && (X[da].f == O || !O)) return X[da].unbind(), X.splice(da, 1), !X.length && delete this.events, this; return this } }(v[M]); I.hover = function (S, O, X, da) { return this.mouseover(S, X).mouseout(O, da || X) }, I.unhover = function (S, O) { return this.unmouseover(S).unmouseout(O) }; var P = []; I.drag = function (S, O, X, da, la, ta) { function na(Y, sa, pa) { (Y.originalEvent || Y).preventDefault(), this._drag.x = sa, this._drag.y = pa, this._drag.id = Y.identifier, !$.length && f.mousemove(t).mouseup(E), $.push({ el: this, move_scope: da, start_scope: la, end_scope: ta }), O && d.on("snap.drag.start." + this.id, O), S && d.on("snap.drag.move." + this.id, S), X && d.on("snap.drag.end." + this.id, X), d("snap.drag.start." + this.id, la || da || this, sa, pa, Y) } if (!arguments.length) { var oa; return this.drag(function (Y, sa) { this.attr({ transform: oa + (oa ? "T" : "t") + [Y, sa] }) }, function () { oa = this.transform().local }) } return this._drag = {}, P.push({ el: this, start: na }), this.mousedown(na), this }, I.undrag = function () { for (var S = P.length; S--;)P[S].el == this && (this.unmousedown(P[S].start), P.splice(S, 1), d.unbind("snap.drag.*." + this.id)); return !P.length && f.unmousemove(t).unmouseup(E), this } }), l.plugin(function (f, o, q) { var z = (o.prototype, q.prototype), I = /^\s*url\((.+)\)/, D = String, B = f._.$; f.filter = {}, z.filter = function (v) { var J = this; "svg" != J.type && (J = J.paper); var A = f.parse(D(v)), N = f._.id(), ba = (J.node.offsetWidth, J.node.offsetHeight, B("filter")); return B(ba, { id: N, filterUnits: "userSpaceOnUse" }), ba.appendChild(A.node), J.defs.appendChild(ba), new o(ba) }, d.on("snap.util.getattr.filter", function () { d.stop(); var v = B(this.node, "filter"); if (v) { var J = D(v).match(I); return J && f.select(J[1]) } }), d.on("snap.util.attr.filter", function (v) { if (v instanceof o && "filter" == v.type) { d.stop(); var J = v.node.id; J || (B(v.node, { id: v.id }), J = v.id), B(this.node, { filter: f.url(J) }) } v && "none" != v || (d.stop(), this.node.removeAttribute("filter")) }), f.filter.blur = function (v, J) { null == v && (v = 2); var A = null == J ? v : [v, J]; return f.format('<feGaussianBlur stdDeviation="{def}"/>', { def: A }) }, f.filter.blur.toString = function () { return this() }, f.filter.shadow = function (v, J, A, N) { return N = N || "#000", null == A && (A = 4), "string" == typeof A && (N = A, A = 4), null == v && (v = 0, J = 2), null == J && (J = v), N = f.color(N), f.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>', { color: N, dx: v, dy: J, blur: A }) }, f.filter.shadow.toString = function () { return this() }, f.filter.grayscale = function (v) { return null == v && (v = 1), f.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>', { a: .2126 + .7874 * (1 - v), b: .7152 - .7152 * (1 - v), c: .0722 - .0722 * (1 - v), d: .2126 - .2126 * (1 - v), e: .7152 + .2848 * (1 - v), f: .0722 - .0722 * (1 - v), g: .2126 - .2126 * (1 - v), h: .0722 + .9278 * (1 - v) }) }, f.filter.grayscale.toString = function () { return this() }, f.filter.sepia = function (v) { return null == v && (v = 1), f.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>', { a: .393 + .607 * (1 - v), b: .769 - .769 * (1 - v), c: .189 - .189 * (1 - v), d: .349 - .349 * (1 - v), e: .686 + .314 * (1 - v), f: .168 - .168 * (1 - v), g: .272 - .272 * (1 - v), h: .534 - .534 * (1 - v), i: .131 + .869 * (1 - v) }) }, f.filter.sepia.toString = function () { return this() }, f.filter.saturate = function (v) { return null == v && (v = 1), f.format('<feColorMatrix type="saturate" values="{amount}"/>', { amount: 1 - v }) }, f.filter.saturate.toString = function () { return this() }, f.filter.hueRotate = function (v) { return v = v || 0, f.format('<feColorMatrix type="hueRotate" values="{angle}"/>', { angle: v }) }, f.filter.hueRotate.toString = function () { return this() }, f.filter.invert = function (v) { return null == v && (v = 1), f.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>', { amount: v, amount2: 1 - v }) }, f.filter.invert.toString = function () { return this() }, f.filter.brightness = function (v) { return null == v && (v = 1), f.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>', { amount: v }) }, f.filter.brightness.toString = function () { return this() }, f.filter.contrast = function (v) { return null == v && (v = 1), f.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>', { amount: v, amount2: .5 - v / 2 }) }, f.filter.contrast.toString = function () { return this() } }), l
}); function gaga(b, d, h, l, f, o, q) { typeof ga === "function" && ga(b, d, h, l, f, o, q) } function newChar() { var b = document.querySelector(".js-new-card"), d = b.querySelector(".first-input"); b.classList.add("overlay__char-new--create"), d.focus() } function createChar(b) { b && b.preventDefault(); var d = this, h = document.querySelector(".overlay__char-new--create"), l = d.parentNode.querySelector(".js-new-char-name"), f = l.value; h.classList.remove("overlay__char-new--create"); var o = f; if (!o) return; currentUser.cc || (currentUser.cc = {}), currentUser.cc.personnageActuel || (currentUser.cc.personnageActuel = o), currentUser.cc.personnages || (currentUser.cc.personnages = {}), currentUser.cc.personnages[o] = window.hash.get(), Object.assign(currentUser.cc.personnages, personnages), updateDbUser(currentUser).then(function (q) { currentUser._rev = q.rev, gaga("send", "event", { eventCategory: "Navigation", eventAction: "New", eventLabel: "Save new character" }) }), manageCharacters() } function deleteChar() { var b = this, d = b.parentNode.parentNode.querySelector(".overlay__char-name").innerHTML; delete currentUser.cc.personnages[d], updateDbUser(currentUser).then(function (h) { currentUser._rev = h.rev, gaga("send", "event", { eventCategory: "Navigation", eventAction: "Delete", eventLabel: "Delete character" }) }), manageCharacters() } function saveChar() { var b = document.querySelector(".save-btn"); b.classList.remove("save--enabled"); var d = currentUser.cc.personnageActuel; if (!myUsername || !currentUser) return; if (!currentUser) return; if (!d) return; currentUser.cc || (currentUser.cc = {}), currentUser.cc.personnageActuel || (currentUser.cc.personnageActuel = d), currentUser.cc.personnages || (currentUser.cc.personnages = {}), currentUser.cc.personnages[d] = window.hash.get(), Object.assign(currentUser.cc.personnages, personnages), updateDbUser(currentUser).then(function (h) { currentUser._rev = h.rev, gaga("send", "event", { eventCategory: "Navigation", eventAction: "Save", eventLabel: "Save character" }) }) } function changeClipPathOnEyes(b) { var d = b.slice(1).split("_")[1], h = document.querySelector("#svg1 .character-container"), l = h.querySelector("#eye_right"), f = h.querySelector("#eye_left"); l && f && (l.setAttribute("clip-path", "url(" + b + "--right)"), f.setAttribute("clip-path", "url(" + b + "--left)")) } function applyClipPath() { setTimeout(function () { changeClipPathOnEyes("#eyes_" + c.choices.emotion) }, 150) } function defaultEyeColor(b) { var d = { "#ffdfc4": "#6F918A", "#f0d5be": "#FF6600", "#eeceb3": "#A0892C", "#e1b899": "#784421", "#e5c298": "#784421", "#ffdcb2": "#784421", "#e5b887": "#784421", "#e5a073": "#784421", "#e79e6d": "#784421", "#db9065": "#784421", "#ce967c": "#784421", "#c67856": "#784421", "#ba6c49": "#784421", "#a57257": "#784421", "#f0c8c9": "#37ABC8", "#dda8a0": "#AAD400", "#b97c6d": "#552200", "#a8756c": "#552200", "#ad6452": "#552200", "#5c3836": "#552200", "#cb8442": "#552200", "#bd723c": "#552200", "#704139": "#552200", "#a3866a": "#552200" }, h = d[b]; c.choices.irisColor = h, hash.add({ irisColor: h }) } function defaultHairColor(b) { var d = { "#ffdfc4": "#803300", "#f0d5be": "#803300", "#eeceb3": "#803300", "#e1b899": "#1a1a1a", "#e5c298": "#1a1a1a", "#ffdcb2": "#1a1a1a", "#e5b887": "#1a1a1a", "#e5a073": "#1a1a1a", "#e79e6d": "#1a1a1a", "#db9065": "#1a1a1a", "#ce967c": "#1a1a1a", "#c67856": "#1a1a1a", "#ba6c49": "#1a1a1a", "#a57257": "#1a1a1a", "#f0c8c9": "#ffcc00", "#dda8a0": "#ff6600", "#b97c6d": "#1a1a1a", "#a8756c": "#1a1a1a", "#ad6452": "#1a1a1a", "#5c3836": "#1a1a1a", "#cb8442": "#1a1a1a", "#bd723c": "#1a1a1a", "#704139": "#1a1a1a", "#a3866a": "#1a1a1a" }, h = d[b]; c.choices.hairColor = h, hash.add({ hairColor: h }) } function shadeColor(b, d) { var h = parseInt(b.slice(1), 16), l = Math.round(2.55 * d), f = (h >> 16) + l, o = (h >> 8 & 255) + l, q = (h & 255) + l; return "#" + (16777216 + (f < 255 ? f < 1 ? 0 : f : 255) * 65536 + (o < 255 ? o < 1 ? 0 : o : 255) * 256 + (q < 255 ? q < 1 ? 0 : q : 255)).toString(16).slice(1) } function ColorLuminance(b, d) { b = String(b).replace(/[^0-9a-f]/gi, ""), b.length < 6 && (b = b[0] + b[0] + b[1] + b[1] + b[2] + b[2]), d = d || 0; var h = "#", l, f; for (f = 0; f < 3; f++)l = parseInt(b.substr(f * 2, 2), 16), l = Math.round(Math.min(Math.max(0, l + l * d), 255)).toString(16), h += ("00" + l).substr(l.length); return h } function colorizeByClass(b, d) { for (var h = document.querySelectorAll("." + b), l = h.length, f = l; f--;)h[l - (f + 1)].style.fill = d } function colorSkin(b) { colorizeByClass("upperlip", shadeColor(b, -10)), colorizeByClass("lowerlip", shadeColor(b, 10)) } function colorElement(b) { var d = b.id.split("_"), h = d[0], l = d[1], f, o, q, z, I, D = "alpha", B; return h === "eyeballs" && (h = "iris"), f = c.choices[h + "Color"], o = c.choices[h + "Color-bet"], q = c.choices[h + "Color-gam"], z = c.choices[h + "Color-del"], I = c.choices[h + "Color-eps"], (processSection(h, l) === "skin" || processSection(h, l) === "mouth") && c.choices.skinColor != void 0 ? b = colorElementLoop(b, "skin", c.choices.skinColor) : processSection(h, l) === "hair" && (b = colorElementLoop(b, "alpha", c.choices.hairColor)), f != void 0 && (b = colorElementLoop(b, D, f, !1), h === "mouth" && (b = colorElementLoop(b, "lips", f, !0))), o != void 0 && (b = colorElementLoop(b, "beta", o, !1)), q != void 0 && (b = colorElementLoop(b, "gamma", q, !1)), z != void 0 && (b = colorElementLoop(b, "delta", z, !1)), I != void 0 && (b = colorElementLoop(b, "epsilon", I, !1)), b } function colorElementLoop(b, d, h, l) { var f = ["dark", "light"], o = f.length, q = ["er", "est"], z, I, D, B = getColorList(h), v, J, A = "."; l && (A = ".lips."), I = b.querySelectorAll("." + d), D = I.length, d === "lips" && (d = "skin"); if (D > 0) for (v = 3, J = getColorPair(B, v); D--;)I[D] = applyColorToChild(I[D], J); for (; o--;) { I = b.querySelectorAll(A + d + "--" + f[o]), D = I.length; if (D > 0) for (f[o] === "light" && (v = 4), f[o] === "dark" && (v = 2), J = getColorPair(B, v); D--;)I[D] = applyColorToChild(I[D], J); for (z = q.length; z--;) { I = b.querySelectorAll("." + d + "--" + f[o] + q[z]), D = I.length; if (D > 0) for (f[o] + q[z] === "darkest" && (v = 0), f[o] + q[z] === "darker" && (v = 1), f[o] + q[z] === "lighter" && (v = 5), f[o] + q[z] === "lightest" && (v = 6), J = getColorPair(B, v); D--;)I[D] = applyColorToChild(I[D], J) } } return b } function applyColorToChild(b, d) { return b.style.fill != "none" && b.style.fill != "" && (b.style.fill = d[0]), b.style.stroke != "none" && b.style.stroke != "" && (b.style.stroke = d[1]), b } function getColorPair(b, d) { var h = b[d], l, f = []; return f.push(h), d - 2 < 0 ? l = b[0] : l = b[d - 2], f.push(l), f } function getColorList(b) { var d = 10, h = []; return h.push(shadeColor(b, -1 * (3 * d))), h.push(shadeColor(b, -1 * (2 * d))), h.push(shadeColor(b, -1 * d)), h.push(b), h.push(shadeColor(b, d)), h.push(shadeColor(b, 2 * d)), h.push(shadeColor(b, 3 * d)), h } function getColorClassPrefix(b) { var d, h = document.querySelector(".section-pallette"); return h.querySelector("input:checked") ? d = h.querySelector("input:checked").value : b === "body" || b === "body_head" || b === "ears" || b === "nose" || b === "age" || b === "eyes" || b === "freckles" || b === "sockets" ? d = "skin" : d = "alpha", d } function colorize(b, d) { var h = getMultiLayer(), l = getSkinLayers(), f = 10, o = window.forms, q = b, z = [], I = shadeColor(d, f), D = shadeColor(d, 2 * f), B = shadeColor(d, 3 * f), v = shadeColor(d, -1 * f), J = shadeColor(d, -1 * (2 * f)), A = shadeColor(d, -1 * (3 * f)), N = getColorClassPrefix(b), ba = document.querySelector('.section-pallette input[type="radio"]:checked+label'), Q = "--lightest", R = "--lighter", ea = "--light", $ = "--dark", t = "--darker", E = "--darkest", M = " ."; ba && (ba.style.background = d); for (var P in o) { var S = Object.keys(o[P]); for (var O in S) if (S[O].toLowerCase() === q) { var X = q.replace(/^[a-z]/, function (Ja) { return Ja.toUpperCase() }); if (N === "skin" && (q === "body" || q === "body_head" || q === "ears" || q === "nose" || q === "age" || q === "eyes" || q === "freckles" || q === "sockets")) { z = l; var da = "skinColor" } else if (q === "facialhair" || q === "hair") { z = getHairLayers(); var da = "hairColor" } else if (q === "iris") { z = ["eyeballs_default"]; var da = "irisColor" } else { z = []; var da = q + "Color"; N != "skin" && N != "alpha" && N != "lips" && (da = da + "-" + N.slice(0, 3)); if (da === "irisColor" || da === "browsColor" || da === "lashesColor" || da === "socketsColor" || da === "mouthColor") { for (i in o[0].Emotion) { var la = o[0].Emotion[i]; la != "" && z.push(q + "_" + la) } da === "mouthColor" && (N = "skin") } else for (i in o[P][X]) { var la = o[P][X][i]; la != "" && z.push(q + "_" + la) } } origList = z, z = getAffectedListFromOrig(origList, h); var ta = d.toString(), na = new Array(); na[da] = ta, hash.add(na), modCharacter(da, ta); for (n in z) { fullId = "#" + z[n], q === "mouth" && (M = " .lips."); for (var oa = document.querySelectorAll(fullId + M + N), Y = document.querySelectorAll(fullId + M + N + ea), sa = document.querySelectorAll(fullId + M + N + R), pa = document.querySelectorAll(fullId + M + N + Q), wa = document.querySelectorAll(fullId + M + N + $), za = document.querySelectorAll(fullId + M + N + t), Da = document.querySelectorAll(fullId + M + N + E), Ma = oa.length, xa = Y.length, Ra = sa.length, Oa = pa.length, Ua = wa.length, Pa = za.length, qa = Da.length; Ma--;)colorPaths(oa[Ma], d, J); for (; xa--;)colorPaths(Y[xa], I, v); for (; Ra--;)colorPaths(sa[Ra], D, d); for (; Oa--;)colorPaths(pa[Oa], B, I); for (; Ua--;)colorPaths(wa[Ua], v, J); for (; Pa--;)colorPaths(za[Pa], J, A); for (; qa--;)colorPaths(Da[qa], A, A) } } } } function colorPaths(b, d, h) { b.style.fill != "none" && b.style.fill != "" && (b.style.fill = d), b.style.stroke != "none" && b.style.stroke != "" && (b.style.stroke = h) } function getAffectedListFromOrig(b, d) { var h = [], l; for (a in b) { l = isInMultiLayerArray(b[a], d); if (l > 0) for (var f = 1; f <= l; f++)idOf = b[a] + "_" + f + "_of_" + l, h.push(idOf); else h.push(b[a]) } return h } function replacementStyle(b, d) { var h = b.style, l = ""; for (n in Object.keys(h)) { var f = Object.keys(h)[n]; if (f === "fill") if (h[f] != "none") if (b.style["stroke-width"] === void 0) var o = ColorLuminance(d, -.12); else var o = d; else var o = h[f]; else if (f === "stroke") if (h[f] != "none") { if (b.style["stroke-width"] != void 0) var o = ColorLuminance(d, -.2) } else var o = h[f]; else var o = h[f]; var q = f + ": " + o + "; "; l = l.concat(q) } return l } function addColorPicker() { var b = document.querySelector(".section--selected").innerHTML.toLowerCase(); getColor(b) } function hideColorPicker() { var b = document.querySelector(".colorpicker-wrapper"); b && !b.classList.contains("section--hide") && b.classList.add("section--hide") } function getPallette(b) { var d = {}, h = [], l, f, o, q = ["skin", "lips", "alpha", "beta", "gamma", "delta", "epsilon"], z; if (b === "body") h = getAllBodyLayers(); else if (b === "mouth") for (o = getSectionLayersList("emotion"), l = o.length; l--;)h.push(b + "_" + o[l]); else h = getSectionLayersList(b), h = replaceMultilayer(h, b); for (l = h.length; l--;)for (z = q.length; z--;)f = document.querySelector("#svg1 .character-container #" + h[l] + " ." + q[z]), f != null && f.style != null && f.style.fill != null && (d[q[z]] = f.style.fill); drawPallette(d) } function drawPallette(b) { for (var d = document.querySelector(".section-pallette"), h, l, f = Object.keys(b), o = f.length; o--;)h = document.createElement("INPUT"), l = document.createElement("LABEL"), l.setAttribute("for", "btn-" + [f[o]]), h.type = "radio", h.id = "btn-" + [f[o]], h.name = "btn-pallette", h.value = [f[o]], h.setAttribute("checked", "checked"), h.classList = [f[o]], l.style.background = b[f[o]], d.appendChild(h), d.appendChild(l) } function getColor(b) { clearPicker(); var d = b, h = document.getElementById("slide"), l = document.getElementById("picker"), f = document.querySelector(".section-id"); f.innerHTML = d, getPallette(b); try { ColorPicker(h, l, function (o, q, z) { colorize(d, o) }) } catch (o) { console.error(o) } } function emptyPicker() { var b = document.querySelector(".colorpicker-wrapper"); b.innerHTML = "" } function clearPicker() { var b = document.querySelector(".colorpicker-wrapper"); b.innerHTML = '<div class="colorpicker-controls"><span class="section-id"></span><div class="section-pallette"></div></div><div class="colorpicker-align"><div id="picker" style="background-color:rgb(255,0,0);"></div><div id="slide"></div></div>' } function rollCredits(b) { b && b.preventDefault(); var d = document.querySelector(".js-credits"), h = d.querySelector(".close-btn"); closeAllOverlays(), d.classList.add("overlay--show"), d.addEventListener("click", closeCredits, !0), setTimeout(function () { closeAllOverlays() }, 52e3) } function initEyes() { var b = document.querySelector("#svg1"), d = document.querySelector("#body_head_default"), h = document.querySelector("#eyes_neutral"), l = document.querySelector("#eye_left"), f = document.querySelector("#eye_right"), o = document.querySelector("#eyeball_left"), q = document.querySelector("#eyeball_right"), z = {}, I = {}, D = {}, B, v; J(); function J() { var ba = .4243902439, Q = getPosition(b), R = d.getBoundingClientRect(), ea = o.getBoundingClientRect(), $ = q.getBoundingClientRect(); B = R.width / 41, z.y = Q.y + R.height * ba, I.x = $.x + $.width / 2, D.x = ea.x + ea.width / 2 } document.onmousemove = N; function A() { q.style.transform = "scale(1, 1)", o.style.transform = "scale(1, 1)", h.style.transform = "translateY(0)", l.style.transform = "translateX(0)", f.style.transform = "translateX(0)" } function N(ba) { var Q = .08333333333, R, ea, $, t, E, M, P, S, O, X, da, la, ta, na, oa, Y, sa, pa, wa, za; ba = ba || window.event, ba.pageX == null && ba.clientX != null && (R = ba.target && ba.target.ownerDocument || document, ea = R.documentElement, $ = R.body, ba.pageX = ba.clientX + (ea && ea.scrollLeft || $ && $.scrollLeft || 0) - (ea && ea.clientLeft || $ && $.clientLeft || 0), ba.pageY = ba.clientY + (ea && ea.scrollTop || $ && $.scrollTop || 0) - (ea && ea.clientTop || $ && $.clientTop || 0)), E = ba.pageX - I.x, t = ba.pageX - D.x, M = ba.pageY - z.y, P = t < 0 ? t * -1 : t, S = E < 0 ? E * -1 : E, O = M < 0 ? M * -1 : M, S > O ? (E > 3 * B ? X = 3 : E < -3 * B ? X = -3 : X = E / B, la = 3 * O / S, M < 0 && (la = la * -1)) : (M > 0 ? la = 3 : la = -3, X = 3 * S / O, E < 0 && (X = X * -1)), P > O ? (t > 0 ? da = 3 : da = -3, la = 3 * O / P, M < 0 && (la = la * -1)) : (M > 0 ? la = 3 : la = -3, da = 3 * P / O, t < 0 && (da = da * -1)), da < 0 ? na = da * -1 : na = da, X < 0 ? oa = X * -1 : oa = X, la < 0 ? Y = la * -1 : Y = la, za = 1 - Y * Q, sa = 1 - ta * Q, wa = 1 - oa * Q, pa = 1 - na * Q, M < 0 && (X < 0 && (X = X + la * -2 / 3, X > 0 && (X = 0)), da > 0 && (da = da - la * -2 / 3, da < 0 && (da = 0))), o.style.transform = "translateX(" + da + "px)", q.style.transform = "translateX(" + X + "px)", clearTimeout(v), v = setTimeout(A, 1500) } } function createForm(b, d) {
    var h = "", l = document.querySelector("#content_1"); l.innerHTML = ""; var b = b || c.choices.sex, d = d || window.forms, f = ["Head", "Accessories", "Torso", "Body", "Legs", "Feet"], o = '<h2 class="sidebar__title"><svg class="icon"><use xlink:href="#icon-coathanger"></use></svg>Categories</h2>'; o += '<ul class="section__list">'; for (var q in d) {
        var z = document.querySelector("#content_1"), I = "", D = 0; o += '<section class="accordeon__section-label"><span class="accordeon__section-title"><svg class="icon"><use xlink:href="#' + getIconId(f[q], b) + '"></use></svg><span class="accordeon__section-title__text">' + f[q] + '</span></span><div class="accordeon__svg-container section-btn--hide"><svg width="1em" height="1em"><use xlink:href="#accordeon_btn"/></svg></div></section><div class="accordeon__content section--hide">'; var B = d.length, v = B; for (var J in d[q]) {
            o += '    <a class="section__link"><li class="sbl__option" tabindex="0">' + J + "</li></a>"; var A = J, N = A.toLowerCase(); I += '    <div class="Row options__container options__' + N + '"><span class="svg__section__title">' + N + '</span><div class="thumbnails__container">'; var ba = hash.get(N), Q = d[q][J].map(function (la, ta) { var na = "#" + N + "_" + la, oa = window.multiLayer, Y = getSectionsFromIdMultiLayer(oa, na); if (N === "emotion") { var Y = [], sa = GetEmotionGetLayers(la); for (emo in sa) { var pa = "#" + sa[emo] + "_" + la; Y.push(pa) } } var wa = getViewBox(N, la); la === "" ? h = '<use xlink:href="#icon-none"></use>' : h = "", I += '    <div class="option__container option__' + N + "_" + la + '" tabindex="0"><svg viewBox="' + wa + '" class="svg__option ' + N + "_" + la + '">' + h + '</svg><span class="option__label">' + la + "</span></div>" }).join(`
`), R = hash.get(J); if (R !== void 0) var ea = 'selected="' + R + '" '; else var ea = ""; htagc = J.toLowerCase() + "Color"; var $ = hash.get(htagc); if ($ !== void 0) var t = $; else var t = "#ffffff"; I += "    </div>", I += "</div>", D++
        } o += "</div>"; var E = document.createElement("div"); E.innerHTML = I, z.appendChild(E)
    } o += "</ul>"; var M = document.querySelector("#sidebar-left"), P = document.createElement("div"); P.innerHTML = o, M.innerHTML = "", M.appendChild(P); var S = document.querySelectorAll(".sbl__option"), O = document.querySelectorAll(".option__container"), X = document.querySelectorAll(".accordeon__section-label"), da = document.querySelectorAll(".section__color"); addEventListenerList(S, "mouseover", showThumbOptions), addEventListenerList(S, "focus", showThumbOptions), addEventListenerList(S, "click", openThumbs), addEventListenerList(O, "click", changeOption), addEventListenerList(X, "click", toggleSection), addEventListenerList(da, "click", addColorPicker)
} function getSectionsFromIdMultiLayer(b, d) { var h = [], l = isInMultiLayerArray(d.slice(1), b); if (l > 0) for (var f = 1; f <= l; f++)newLayer = d + "_" + f + "_of_" + l, h.push(newLayer); else h = [d]; return h } function getSectionLayersList(b) { var d = c.choices.sex, h, l, f; for (b = capitalizeFirstLetter(b), d === "m" ? h = window.maleFormList : h = window.femaleFormList, l = h.length; l--;)b in h[l] && (f = h[l][b]); return f } function replaceMultilayer(b, d) { var h = getMultiLayer(), l = c.choices.sex, f = b.length, h = getMultiLayer(), o, q = [], z, I, D, B; if (d != void 0) for (; f--;)b[f] != "" && q.push(d + "_" + b[f]); else for (f = b.length; f--;)b[f].slice(-1) != "_" && q.push(b[f]); for (o = h.length; o--;) { z = h[o][0]; if (isInArray(z, q)) for (D = q.indexOf(z), q.splice(D, 1), I = h[o][1], B = I; B--;)q.push(z + "_" + (B + 1) + "_of_" + I) } return q } function loadSectionLayers(b, d, h, l) { var f = [], o; o = d.length; if (b === "emotion") { for (; o--;)f = f.concat(fromEmotionGetLayers(d[o])); d = f } else if (b === "pupils") d = ["eyeballs_default"]; else if (b === "body") { for (; o--;)f = f.concat(bodyTypesToLayers(d[o])); d = f } else d = replaceMultilayer(d, b); loadFilesFromList(d, h, l) } function loadFilesFromList(b, d, h) { var l, f = c.choices.sex, o, q, z, I; for (f === "m" ? (l = "../male/", I = window.layersMale) : (l = "../female/", I = window.layersFemale), z = b.length; z--;) { q = b[z]; if (I.indexOf(q) === -1) continue; o = l + q + ".svg", fetch(o).then(function (D) { return D.text() }).then(function (D) { var B = document.createElementNS("http://www.w3.org/2000/svg", "svg"), v, J, A, N, ba, Q = document.querySelector("#svg1 .character-container"), R = Q.querySelector("#outline"); return B.innerHTML = D, v = B.querySelector("g"), h && (v.style.opacity = 0, v.style.pointerEvents = "none"), v = colorElement(v), A = v.id, A === "eyeballs_default" && (J = getPupilShape(), v = showPupilObject(v, J)), N = A.split("_"), ba = findNextLayerInDom(A), Q.querySelector("#" + A) === null && (ba != null ? ba.parentNode.insertBefore(v, ba) : R ? R.parentNode.insertBefore(v, R) : document.querySelector("#svg1 .character-container").appendChild(v)), v }).then(function (D) { var B; d && typeof d === "function" && h && (B = D.querySelector("#eyeball_right"), B && (D = B), d(D)) }) } } function getPupilShape() { return c.choices.pupils || "round" } function addEventListenerList(b, d, h) { for (var l = b.length, f = l, o; f--;)o = l - f - 1, b[o].addEventListener(d, h, !1) } function closeSections(b) { for (var d = document.querySelectorAll(".accordeon__section-label"), h = document.querySelectorAll(".accordeon__svg-container"), l = d.length; l--;) { var f = d[l]; if (f !== b && f.parentNode.parentNode.parentNode.classList.contains("sidebar-left")) { var o = h[l], q = f.nextSibling; q.classList === void 0 && q.nextSibling.classList != void 0 && (q = q.nextSibling), q.classList.contains("section--hide") || q.classList.toggle("section--hide"), o.classList.contains("section-btn--hide") || o.classList.toggle("section-btn--hide") } } } function toggleSection(b) { var d = b.target, h, l, f = getParent(d, ".accordeon__section-label"); l = f.querySelector(".accordeon__section-title__text"), l != null && (h = l.innerHTML, sectionZoom(h)); var o = this; this.parentNode.parentNode.parentNode.classList.contains("sidebar-left") && closeSections(o), removeAlert(o), showSection(o) } function showSection(b) { var d = b.nextSibling, h, l; d.classList === void 0 && d.nextSibling.classList != void 0 && (d = d.nextSibling), h = d.clientHeight, l = b.querySelector(".accordeon__svg-container"), d.classList.contains("accordeon__content") && (d.classList.contains("section--hide") || (d.style.maxHeight = h), d.classList.toggle("section--hide"), l.classList.toggle("section-btn--hide")) } function removeAlert(b) { var d = document.querySelector(".alert"); d != null && d.classList.remove("alert"), b.classList.contains("alert") && b.classList.remove("alert") } function changeOption() { var b = this.parentNode.parentNode.firstChild.innerHTML, d = this.lastChild.innerHTML, h = document.querySelector(".colorpicker-wrapper").previousSibling; h.classList === void 0 && h.previousSibling.classList != void 0 && (h = h.previousSibling), show(d, b), h.classList.add("alert") } function getIconId(b, d) { var h = { Head: "icon-face", Accessories: "icon-glasses", Torso: "icon-shirt", Body: "icon-underwear", Legs: "icon-pants", Feet: "icon-shoes" }, l = { Head: "icon-face", Accessories: "icon-glasses", Torso: "icon-shirt", Body: "icon-underwear", Legs: "icon-dress", Feet: "icon-shoes" }; return d === "f" ? l[b] : d === "m" ? h[b] : "icon-face" } var maleForm1 = { Iris: ["default"], Facialhair: ["", "beard_boxed", "beard_guru", "goatee", "moustache", "muttonchops"], Hair: ["", "afro", "balding", "crewcut", "down", "emo", "spider", "gelled", "wavy", "manga"], Emotion: ["neutral", "alertness", "amusement", "anger", "anxiety", "aversion", "betrayal", "caged", "concern", "cruel", "dejection", "desperation", "disdain", "disgust", "eeww", "fear", "grief", "horror", "indignation", "joy", "laughing", "melancholy", "omg", "outrage", "pain", "rage", "revulsion", "sadness", "satisfaction", "shock", "sterness", "surprise", "terror", "wonder", "wtf"] }, maleForm2 = { Earings: ["", "gold_rings", "gold_ring_right", "gold_ring_left"], Hat: ["", "baseball", "cap", "cowboy", "top", "police"], Glasses: ["", "hipster", "rayban", "wayrafer"] }, maleForm3 = { Shirt: ["", "colar", "tshirt"], Tie: ["", "neck", "bow"], Vest: ["", "vest"] }, maleForm4 = { Body: ["default"], Scar: ["", "horizontal_neck", "horizontal_nose", , "vertical_left", "vertical_right"], Tatoo: ["", "aum_chest", "aum_left", "aum_right", "chaos_chest", "chaos_left", "chaos_right"], Jacket: ["", "suit"] }, maleForm5 = { Pants: ["", "suit", "jeans"] }, maleForm6 = { Shoes: ["", "hightops", "leather"] }, femaleForm1 = { Iris: ["default"], Hair: ["", "afro", "bangs", "down", "flowing", "manga", "mohawk", "pigtails", "ponytail", "short", "short_slick", "starlet", "odango", "emo", "punky", "spider", "wreckingball"], Emotion: ["neutral", "alertness", "amusement", "anger", "aversion", "dejection", "disdain", "disgust", "grief", "indignation", "joy", "laughter", "melancholy", "rage", "sadness", "sterness", "surprise", "shock", "wonder"] }, femaleForm2 = { Makeup: ["", "gothic_eyeliner"], Earings: ["", "double-drop", "gold_rings"], Glasses: ["", "hipster", "rayban", "wayrafer"], Hat: ["", "baseball", "beach", "police", "tiara"] }, femaleForm3 = { Bra: [""], Shirt: ["", "sweat"] }, femaleForm4 = { Body: ["default"], Tatoo:["","chaos_chest","chaos_left","chaos_right","archeopteryx_left"],Blouse: ["", "cherry"], Dress: ["", "accolade", "corset", "suit", "parisian_fall", "german_expression"] }, femaleForm5 = { Skirt: ["", "a-line", "draped", "school"], Pants: ["", "jeans"] }, femaleForm6 = { Shoes: ["", "hightops", "highheels"] }, fabricPallette = ["#25282f", "#494a52", "#323346", "#6f7581", "#c3c3c5", "#ece9ec", "#f3e3d4", "#434d71", "#f4e2c1", "#ba855e", "#b19f92", "#9e9888"], layerDirectoryFemale = "../female/", layerDirectoryMale = "../male/", size = function (b) { var d = 0, h; for (h in b) b.hasOwnProperty(h) && d++; return d }; window.maleFormList = [maleForm1, maleForm2, maleForm3, maleForm4, maleForm5, maleForm6], window.femaleFormList = [femaleForm1, femaleForm2, femaleForm3, femaleForm4, femaleForm5, femaleForm6]; function hamburger(b) { var d = document.querySelector("#horizontal"); d.classList.toggle("hide") } function getParent(b, d) { if ((b.matches || b.matchesSelector).call(b, d)) return b; for (; (b = b.parentElement) && !(b.matches || b.matchesSelector).call(b, d);); return b } function hasClass(b, d) { return (" " + b.className + " ").indexOf(" " + d + " ") > -1 } function capitalizeFirstLetter(b) { return b.charAt(0).toUpperCase() + b.slice(1) } function isInArray(b, d) { return d.indexOf(b) > -1 } function rgb2hex(b) { return b = b.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i), b && b.length === 4 ? "#" + ("0" + parseInt(b[1], 10).toString(16)).slice(-2) + ("0" + parseInt(b[2], 10).toString(16)).slice(-2) + ("0" + parseInt(b[3], 10).toString(16)).slice(-2) : "" } function getPosition(b) { for (var d = 0, h = 0; b;)b.tagName != "BODY" && (d += b.offsetLeft - b.scrollLeft + b.clientLeft, h += b.offsetTop - b.scrollTop + b.clientTop), b = b.offsetParent; return { x: d, y: h } } function purgeHiddenLayers() { var b = document.querySelector("#content_1 .selected--option"); if (!b) return; for (var d = b.classList[2].slice(9), h = document.querySelectorAll("#content_1 .selected--option svg"), l = document.querySelector("#svg1 #character-container"), f = h.length, o, q = [], z = []; f--;)q.push(h[f].classList[1]); for (q = replaceMultilayer(q), f = q.length; f--;)o = l.querySelector("#" + q[f]), o != null && o.style.opacity === "0" && l.removeChild(o) } function showPupilObject(b, d) { for (var h = b.querySelectorAll(".pupil"), l = b.querySelectorAll(".pupil--" + d), f = h.length; f--;)h[f].classList.contains("pupil--" + d) ? h[f].style.opacity = 1 : h[f].style.opacity = 0; return b } function clearCharacter() { for (var b = document.querySelector("#svg1 .character-container"), d = document.querySelectorAll("#svg1 .character-container > g"), h = d.length; h--;)d[h].id != "male_silhouette" && d[h].id != "female_silhouette" && b.removeChild(d[h]) } function resetCharacterTemplate() { for (var b = document.querySelector("#svg1 .character-container"), d = b.querySelectorAll("*"), h = d.length, l = h; l--;)d[l].style.opacity !== 0 && (d[l].style.opactiy = "0", selements[l].style.pointerEvents = "none") } function findNextLayerInDom(b) { var d = c.choices.sex, h = document.querySelector("#svg1 .character-container"), l = null, f, o, q; for (d === "m" ? f = window.layersMale : f = window.layersFemale, o = f.length, q = f.indexOf(b); l === null;) { l = h.querySelector("#" + f[q + 1]); if (q > o) return; ++q } return l } function bodyTypesToLayers(b) { var d = []; return d.push("body_torso_" + b), d.push("body_leg_left_" + b), d.push("body_leg_right_" + b), d.push("body_foot_left"), d.push("body_foot_right"), d.push("body_arm_left_" + b), d.push("body_arm_right_" + b), d.push("body_forearm_left_" + b), d.push("body_forearm_right_" + b), d.push("body_hand_left"), d.push("body_hand_right"), d } function onAllLoaded() { var b = document.querySelector(".zoom-container"), d = document.getElementById("male_silhouette"), h = document.getElementById("female_silhouette"), l = document.querySelector(".sidebar-right"), f = document.querySelector(".sidebar-left"), o = document.querySelector("#downloadButton"), q, z = hash.get("sex"); z ? q = z : q = window.sex, o.classList.contains(".enabled") || (o.addEventListener("click", showDownloadOptions, !1), o.classList.add("enabled")), h.style.opacity = "0", d.style.opacity = "0", createForm(q, forms), f.classList.add("visible"), revealCharacter(), b.classList.add("zoom-container--show") } function processSection(b, d) { return (b === "body" || b === "ears" || b === "nose" || b === "eyes" || b === "age" || b === "freckles" || b === "sockets" || b === "scar" || b === "wings" && d === "devil") && (b = "skin"), b === "mouth" && (hash.get("mouthColor") != void 0 ? b = "mouth" : b = "skin"), (b === "facialhair" || b === "brows") && (b = "hair"), b } function onEachLoaded(b, d) { var h = d, l; toBeShown.indexOf(h.split("/")[2].split(".")[0]) > -1 ? l = 1 : l = 0; var f = h.split("/")[2].split("_")[0], o = h.split("/")[2].split("_")[1].split(".")[0]; f = processSection(f, o), b.select("*").attr({ opacity: l }) } Object.size = function (b) { var d = 0, h; for (h in b) b.hasOwnProperty(h) && d++; return d }; function choicesToList(b) { for (var d = [], h = b.choices.sex, l = Object.keys(b.choices).length, f, o, q; l--;)f = Object.keys(b.choices)[l], f.slice(-5) != "Color" && f.slice(-9, -4) != "Color" && (o = b.choices[f], q = f + "_" + o); return d } function choicesToLayers(b, d) { var h = [], l = fromEmotionGetLayers(b.choices.emotion), f = [], o = l.length, q = l.length, z, I, D, B, v; for (var J in b.choices) if (J.slice(-5) != "Color") if (J + "_" + b.choices[J] === "body_athletic" || J + "_" + b.choices[J] === "body_default" || J + "_" + b.choices[J] === "body_veiny" || J + "_" + b.choices[J] === "body_android-00") for (D = b.choices[J], B = bodyTypesToLayers(D), v = B.length; v--;)f.push(B[v]); else f.push(J + "_" + b.choices[J]); for (var A in f) if (f[A].slice(0, 7) === "emotion") for (I = fromEmotionGetLayers(f[A].split("_")[1]), z = I.length; z--;)h.push(I[z]); else for (I = getSectionsFromIdMultiLayer(d, "#" + f[A]), z = I.length; z--;)h.push(I[z].slice(1)); return b.choices.sex === "f" && h.push("nails_short_1_of_2", "nails_short_2_of_2"), h.indexOf("eyeballs_default") < 0 && h.push("eyeballs_default"), h } function fromEmotionGetLayers(b) { for (var d = [], h = "", l = ["brows", "eyes", "mouth", "lashes", "sockets"], f = l.length, o = f, q; o--;)q = f - o - 1, h = l[q] + "_" + b, d.push(h); return d } function trans(b) { if (c.choices.sex === b) return; var d = document.querySelector("#svg1 .character-container"); d.classList.add("character--hide"), hash.add({ sex: b }), hash.add({ emotion: "neutral" }), currentUser && currentUser.cc && currentUser.cc.personnages && currentUser.personnageActuel && (currentUser.cc.personnages[personnageActuel].sex = b), window.sex = b, buildCharacter(resetForms) } function buildCharacter(b) { var d = document.querySelector("#svg1"); setTimeout(function () { zoomFull(), clearForms(), clearCharacter(), interpretHash(), setTimeout(function () { d.classList.remove("character--hide"), b() }, 500) }, 500) } function hideForms() { hideSidebarLeft(), hideSidebarRight() } function clearForms() { clearSidebarLeft(), clearSidebarRight() } function resetForms() { hideForms(), createForm(), showSidebarLeft() } function Character(b) { this.choices = b || { emotion: "neutral", body: "default", eyeballs: "default", skinColor: this.skinTone, hairColor: "#ffe680", irisColor: "#2ad4ff", underwear: "plain", underwearColor: "#f2f2f2" }, this.choices.emotion = this.choices.emotion || "neutral", this.choices.body = this.choices.body || "default", this.skinTone && (this.choices.skinColor = this.skinTone), this.choices.hairColor = this.choices.hairColor || "#ffe680", this.choices.irisColor = this.choices.irisColor || "#2ad4ff", this.choices.underwear = this.choices.underwear || "plain", this.choices.underwearColor = this.choices.underwearColor || "#f2f2f2", b = this.choices, b.body_head || (b.body_head = "default"), b.ears || (b.ears = "default"), b.nose || (b.nose = "default") } function modCharacter(b, d) { b in c.choices && delete c.choices[b]; if (b === "brows" || b === "eyes" || b === "lashes" || b === "sockets") return; d != "" && (c.choices[b] = d), currentUser && currentUser.cc && currentUser.cc.personnages && currentUser.cc.personnageActuel && (currentUser.cc.personnages[currentUser.cc.personnageActuel][b] = d) } function createCharacter() { document.getElementById(sex + "Button").checked = !0; var b = [form1, form2, form3], d; for (var h in b) for (var l in b[h]) { var f = l, o = f.toLowerCase(), q = hash.get(o); if (q !== void 0) { var z = "#" + o + "_" + q; d = isInMultiLayerArray(z.slice(1), multiLayer); if (d > 0) for (var I = 1; I <= d; I++)idOf = z + "_" + I + "_of_" + d, viewport.selectAll(idOf).attr({ opacity: 1 }); else viewport.selectAll(z).attr({ opacity: 1 }) } } } function GetEmotionGetLayers(b) { var d = ["brows", "eyes", "mouth", "lashes", "sockets"]; return d } function getOptionsLogic(b) { var d = window.forms, b = capitalizeFirstLetter(b); for (i in d) { options = d[i][b]; if (options != void 0) return options } } function show(b, d) { var h = getMultiLayer(); if (typeof d === "string") var l = [d]; else var l = [d.split(" ")[1]]; var f = b, o = getOptionsLogic(l[0]), q = new Array(), z = "#" + l[0] + "_" + f; q[d] = b, b === "" ? (modCharacter(d, b), hash.remove(d)) : (modCharacter(d, b), hash.add(q)), currentUser && triggerSaveBtn(); if (l[0] === "emotion") { modCharacter(l[0], f), gaga("send", "event", "menu", "select", z), l = []; var I = GetEmotionGetLayers(f); for (emo in I) { var D = I[emo]; l.push(D) } } displaySections(l, o, f, h) } function displaySections(b, d, h, l) { for (section in b) d.forEach(function (f, o) { var q = "#" + b[section] + "_" + f; if (h != "" && f === h) { sectionShow(l, q); if (b[section] === "brows" || b[section] === "eyes" || b[section] === "mouth" || b[section] === "lashes" || b[section] === "sockets") modCharacter(b[section], h); else { var z = new Array(); z[b[section]] = h, hash.add(z), modCharacter(b[section], h), gaga("send", "event", "menu", "select", q) } } else for (lyr in l) sectionHide(l, q) }) } function sectionShow(b, d) { var h, l = document.querySelector("#svg1"), f; if (d === "#iris_default") return; f = isInMultiLayerArray(d.slice(1), b); if (d.slice(1, 7) === "pupils") h = d.slice(1).split("_")[1], showPupils(h); else if (d.slice(1, 5) === "body" && d.slice(6, 10) != "head") for (var o = d.split("_"), q = o[o.length - 1], z = getBodyLayers(q), I = z.length; I--;)idOf = "#" + z[I], l.querySelector(idOf).style.opacity = 1, l.querySelector(idOf).style.pointerEvents = "auto"; else if (f > 0) for (var D = 1; D <= f; D++)idOf = d + "_" + D + "_of_" + f, sectionToHide = l.querySelector(idOf), sectionToHide != null && (sectionToHide.style.opacity = 1, sectionToHide.style.pointerEvents = "auto"); else l.querySelector(d).style.opacity = 1, l.querySelector(d).style.pointerEvents = "auto"; d.slice(1).split("_")[0] === "eyes" && changeClipPathOnEyes(d) } function getBodyLayers(b) { var d = []; return d.push("body_torso_" + b), d.push("body_arm_right_" + b), d.push("body_arm_left_" + b), d.push("body_forearm_right_" + b), d.push("body_forearm_left_" + b), d.push("body_leg_right_" + b), d.push("body_leg_left_" + b), d } function getAllBodyLayers() { for (var b = getSectionLayersList("body"), d = b.length, h, l = []; d--;)h = getBodyLayers(b[d]), l = l.concat(h); return l } function showPupils(b) { for (var d = document.querySelector("#svg1 .character-container"), h = d.querySelectorAll(".pupil"), l = h.length; l--;)h[l].classList.contains("pupil--" + b) ? (h[l].style.opacity = 1, h[l].style.pointerEvents = "auto") : (h[l].style.opacity = 0, h[l].style.pointerEvents = "none") } function sectionHide(b, d) { var h = document.querySelector("#svg1"), l, f = isInMultiLayerArray(d.slice(1), b); if (f > 0) for (var o = 1; o <= f; o++)idOf = d + "_" + o + "_of_" + f, l = h.querySelector(idOf), l != null && (l.style.opacity = 0, l.style.pointerEvents = "none"); else if (d.slice(1, 5) === "body" && d.slice(6, 10) != "head") for (var q = d.split("_"), z = q[q.length - 1], I = getBodyLayers(z), D = I.length; D--;)idOf = "#" + I[D], h.querySelector(idOf).style.opacity = 0, h.querySelector(idOf).style.pointerEvents = "none"; else l = h.querySelector(d), l != null && (l.style.opacity = 0, l.style.pointerEvents = "none") } var myUsername = !1, currentUser = !1, personnages = {}, personnageActuel = !1, fetchDb = function () { var b = { credentials: "same-origin", headers: { accept: "application/json", "Content-Type": "application/json" } }, d = ["get", "delete", "head"], h = ["post", "put"], l = function (f, o, q) { var z = "/api/" + f, I = {}; !q && typeof o === "string" && (q = o, o = !1), o && (I.body = JSON.stringify(o), I.method = "post"), q && (I.method = q); if (typeof window.fetch === "function") return window.fetch(z, Object.assign(I, b)) }; return d.forEach(function (f) { l[f] = function (o) { return l(o, f) } }), h.forEach(function (f) { l[f] = function (o, q) { return l(o, q, f) } }), l.reject = function (f, o) { var q = new Error(o || f.statusText); return q.statusText = f.statusText, q.status = f.status, q.url = f.url, Promise.reject(q) }, l }(); fetch("../female/layers.json").then(function (b) { return b.json() }).then(function (b) { window.layersFemale = b }).catch(console.error), fetch("../male/layers.json").then(function (b) { return b.json() }).then(function (b) { window.layersMale = b }).catch(console.error), window.onload = function () { var b, d = document.querySelector("#aboutButton"), h = document.querySelector("#faqButton"), l = document.querySelector("#shopButton"), f = document.querySelector("#whoButton"), o = document.querySelector("#logoutButton"), q = document.querySelector("#loginButton"), z = document.querySelector("#registerButton"), I = document.querySelector(".js-register-link"), D = document.querySelector("#creditsButton"), B = document.querySelector(".hamburger-btn"), v = document.querySelector("#zoomLevel"), J = document.getElementById("male_silhouette"), A = document.getElementById("female_silhouette"), N = document.querySelector("#sidebar"), ba = N.cloneNode(!0), Q = document.querySelector("#svg1"), R = document.querySelector("#patreonButton"), ea = document.querySelector("#patreon-btn"), $ = document.querySelector("#brave-affiliate-btn"), t = document.querySelector("#new-char-btn"), E = document.querySelector("#load-char-btn"), M = document.querySelector("#nightModeButton"), P = document.querySelector("#bigRedButton"), S = document.querySelector("#proceed-download"), O = document.querySelector(".site-title"); O && typeof gotoNewChar === "function" && O.addEventListener("click", gotoNewChar, !1), d && typeof showAbout === "function" && d.addEventListener("click", showAbout, !1), h && typeof showFAQ === "function" && h.addEventListener("click", showFAQ, !1), l && typeof showShop === "function" && l.addEventListener("click", showShop, !1), f && typeof whoami === "function" && f.addEventListener("click", whoami, !1), o && typeof logout === "function" && o.addEventListener("click", logout, !1), q && typeof loginMenu === "function" && q.addEventListener("click", loginMenu, !1), z && typeof registerMenu === "function" && z.addEventListener("click", registerMenu, !1), I && typeof registerMenu === "function" && I.addEventListener("click", registerMenu, !1), D && typeof rollCredits === "function" && D.addEventListener("click", rollCredits, !1), B && typeof hamburger === "function" && B.addEventListener("click", hamburger, !1), v && typeof viewBoxZoom === "function" && v.addEventListener("change", viewBoxZoom, !1), J && typeof selectMale === "function" && J.addEventListener("click", selectMale, !1), A && typeof selectFemale === "function" && A.addEventListener("click", selectFemale, !1), Q && typeof clickSelect === "function" && Q.addEventListener("click", clickSelect, !1), Q && typeof layerHighlight === "function" && Q.addEventListener("mouseover", layerHighlight, !1), R && typeof tattle === "function" && R.addEventListener("click", tattle, !1), ea && typeof gotoPatreon === "function" && ea.addEventListener("click", gotoPatreon, !1), $ && typeof gotoBrave === "function" && $.addEventListener("click", gotoBrave, !1), t && typeof gotoNewChar === "function" && t.addEventListener("click", gotoNewChar, !1), E && typeof gotoLoadChar === "function" && E.addEventListener("click", gotoLoadChar, !1), M && typeof switchNightMode === "function" && M.addEventListener("click", switchNightMode, !1), P && typeof smartRandomSingle === "function" && P.addEventListener("click", smartRandomSingle, !1), S && typeof download === "function" && S.addEventListener("click", download, !1), startup() }; function checkNightMode() { var b = document.querySelector("BODY"), d = document.querySelector("#nightModeBox"); d.checked && !b.classList.contains("night") && b.classList.toggle("night") } function switchNightMode(b) { gaga("send", "event", { eventCategory: "Navigation", eventAction: "Dark/Light", eventLabel: "Switch between Dark mode and Light mode" }), b.preventDefault(); var d = document.querySelector("BODY"); hamburger(), d.classList === "" ? document.documentElement.setAttribute("data-theme", "darktheme") : d.classList === "night" && document.documentElement.setAttribute("data-theme", "lighttheme"), d.classList.toggle("night") } function tattle() { gaga("send", "event", { eventCategory: "Conversion", eventAction: "Navbar | Patreon", eventLabel: "Open Patreon page from the Navbar/Hamburger menu." }) } function gotoPatreon(b) { b && b.preventDefault(), gaga("send", "event", { eventCategory: "Conversion", eventAction: "Caboose | Patreon", eventLabel: "Open Patreon page from Caboose modal." }), closeAllOverlays(), setTimeout(function () { window.open("https://www.patreon.com/charactercreator") }, 500) } function gotoBrave(b) { b && b.preventDefault(), gaga("send", "event", { eventCategory: "Conversion", eventAction: "Caboose | Brave", eventLabel: "Open Brave Browser page from Caboose modal." }), closeAllOverlays(), setTimeout(function () { window.open("https://brave.com/cha553") }, 500) } function gotoNewChar(b) { b && b.preventDefault(), gaga("send", "event", { eventCategory: "Conversion", eventAction: "Caboose | New character", eventLabel: "Reset to new character from Caboose." }), closeAllOverlays(), window.location.hash = "", setTimeout(function () { resetCharacter() }, 500) } function resetCharacter() { var b = []; hideMenus(), fadeOutSVG(), removeGroups(), zoomFull(), resetSilhouettes(), c = new Character(b), setTimeout(function () { fadeInSVG() }, 300), relaunch() } function relaunch() { male = document.querySelector("#male_silhouette"), female = document.querySelector("#female_silhouette"), male.style.opacity = "1", female.style.opacity = "1" } function removeGroups() { for (var b = document.querySelector("#svg1 #character-container"), d = b.querySelectorAll("#svg1 #character-container > g"), h = d.length; h--;)d[h].id != "female_silhouette" && d[h].id != "male_silhouette" && b.removeChild(d[h]) } function hideMenus() { for (var b = document.querySelectorAll(".sidebar.visible"), d = b.length; d--;)b[d].classList.remove("visible") } function fadeOutSVG() { var b = document.querySelector("#svg1"), d = b.querySelector(".character-shadow.shine"), h = document.querySelector("#downloadButton.enabled"); d && d.classList.remove("shine"), h && (h.classList.remove("enabled"), h.removeEventListener("click", download)), b.classList.add("character--hide") } function fadeInSVG() { var b = document.querySelector("#svg1"); b.classList.remove("character--hide") } function resetSilhouettes() { var b = "#e35a4e", d = document.querySelector("#svg1"), h = d.querySelector("#path_male"), l = d.querySelector("#path_female"), f; d.classList.contains("select-female") ? (silhouette = d.querySelector("#female_silhouette"), f = d.querySelector("#male_silhouette")) : d.classList.contains("select-male") && (silhouette = d.querySelector("#male_silhouette"), f = d.querySelector("#female_silhouette")), d.classList = "", h.style.fill = b, l.style.fill = b, h && typeof selectMale === "function" && h.addEventListener("click", selectMale, !1), l && typeof selectFemale === "function" && l.addEventListener("click", selectFemale, !1) } function gotoLoadChar(b) { b && b.preventDefault(), closeAllOverlays() } function caboose() { var b = document.querySelector(".js-caboose"), d = b.querySelector(".close-btn"); closeAllOverlays(), b.classList.add("overlay--show"), b.addEventListener("click", closeOverlay, !0), d.addEventListener("click", closeOverlay, !1) } function layerHighlight(b) { var d = getGroupParent(b.target); if (!d) return; var h = document.querySelectorAll("#contour use"), l = h.length; if (!(h[0].getAttribute("xlink:href") === d.id)) if (d.id === "svg1") for (; l--;)h[l].setAttribute("xlink:href", ""); else for (; l--;)h[l].setAttribute("xlink:href", "#" + d.id) } function clickSelect(b) { var d = getGroupParent(b.target), h, l = document.querySelectorAll("section.accordeon__section-label"), f, o, q, z, I, D; if (c.choices.sex === void 0) return; q = fromItemGetPrefix(d.id), h = fromPrefixGetFormSection(q); if (q === "svg1") { zoomFull(); return } h > -1 && (o = l[h].querySelector(".accordeon__section-title__text").innerHTML, sectionZoom(o), f = l[h].nextSibling.classList.contains("section--hide"), closeSections(l[h]), f && showSection(l[h]), z = getSectionButton(h, q), z > -1 && (I = l[h].nextSibling.querySelectorAll("li.sbl__option"), D = I[z], hideColorPicker(), openThumbsLogic(D))) } function getSectionButton(b, d) { var h = 0; c.choices.sex === "m" ? formList = window.maleFormList : formList = window.femaleFormList; for (key in formList[b]) { if (d === key.toLowerCase()) return h; ++h } return -1 } function getLayers() { var b; if (c.choices.sex === "m") b = window.layersMale; else if (c.choices.sex === "f") b = window.layersFemale; else return document.querySelector("#svg1 #character-container"); return b } function getGroupParent(b) { var d = getLayers(); if (!d.indexOf) return; for (; d.indexOf(b.id) === -1 && b.tagName != "svg";)b = b.parentNode; return b } function getMultiLayer() { for (var b = [], d = getLayers(), h = d.length, l, f; h--;)f = isMultiLayer(d[h]), f > 0 && (l = [], l.push(d[h].slice(0, -7)), l.push(f), b.push(l)); return b } function isMultiLayer(b) { return b.slice(-6, -1) === "1_of_" ? parseInt(b.slice(-1), 10) : 0 } function isInMultiLayerArray(b, d) { for (entry in d) if (b === d[entry][0]) return d[entry][1]; return 0 } function getHairLayers() { for (var b = [], d = getLayers(), h = d.length; h--;)(d[h].slice(0, 5) === "hair_" || d[h].slice(0, 11) === "facialhair_" || d[h].slice(0, 6) === "brows_" || d[h].slice(0, 7) === "lashes_") && b.push(d[h]); return b } function getSkinLayers() { for (var b = [], d = getLayers(), h = d.length; h--;)(d[h].slice(0, 5) === "body_" || d[h].slice(0, 5) === "ears_" || d[h].slice(0, 5) === "nose_" || d[h].slice(0, 9) === "freckles_" || d[h].slice(0, 5) === "scar_" || d[h].slice(0, 11) === "wings_devil" || d[h].slice(0, 6) === "mouth_" || d[h].slice(0, 8) === "sockets_") && b.push(d[h]); return b } function fromItemGetPrefix(b) { var d = b.split("_"), h; return d[0] === "body" && d[1] === "head" ? h = "body_head" : h = d[0], h } function fromPrefixGetFormSection(b) { var d, h, l; for (c.choices.sex === "m" ? l = window.maleFormList : l = window.femaleFormList; d === void 0;) { for (h = l.length; h--;)for (key in l[h]) key.toLowerCase() === b && (d = h); d === void 0 && (d = -1) } return d } function startup() { var b; currentUser && currentUser.cc && currentUser.cc.personnages && currentUser.cc.personnageActuel && (b = currentUser.cc.personnages[currentUser.cc.personnageActuel]), window.c = new Character(b), interpretHash() } function launch() { c.choices.sex = hash.get("sex"); var b = c.choices.sex, d = getMultiLayer(), h = getHairLayers(), l = getSkinLayers(); if (b === "m") var f = maleForm1, o = maleForm2, q = maleForm3, z = maleForm4, I = maleForm5, D = maleForm6, B = layerDirectoryMale; else var f = femaleForm1, o = femaleForm2, q = femaleForm3, z = femaleForm4, I = femaleForm5, D = femaleForm6, B = layerDirectoryFemale; window.forms = [f, o, q, z, I, D], parseHash(c, forms, l, h), choicesToList(c), toBeShown = choicesToLayers(c, d), Promise.resolve().then(function () { loadFilesFromList(toBeShown) }).then(function () { onAllLoaded() }).then(function () { applyClipPath() }) } function displayPallette() { var b = hash.get("skinColor"); b != void 0 ? launch() : chooseSkinColor() } function chooseSkinColor() { var b = ["#FFDFC4", "#F0D5BE", "#EECEB3", "#E1B899", "#E5C298", "#FFDCB2", "#E5B887", "#E5A073", "#E79E6D", "#DB9065", "#CE967C", "#C67856", "#BA6C49", "#A57257", "#F0C8C9", "#DDA8A0", "#B97C6D", "#A8756C", "#AD6452", "#5C3836", "#CB8442", "#BD723C", "#704139", "#A3866A"], d = document.querySelector(".skin-color__container"); if (!d.firstChild) for (color in b) { var h = b[color], l = document.createElement("LI"); l.className = "skin-tone", l.style.cssText = "background-color:" + h + ";", d.appendChild(l), l.onclick = colorCutout, l.onmouseover = colorOnHover } d.classList.add("skin-color__container--show") } function defaultPupilShape() { c.choices.pupils = "round", hash.add({ pupils: "round" }) } function colorOnHover() { var b = document.getElementById("path_male"), d = document.getElementById("path_female"), h = this.style.backgroundColor; d.style.fill = h, b.style.fill = h } function colorSilhouette() { var b = document.getElementById("path_male"), d = document.getElementById("path_female"), h = hash.get("skinColor"); d.style.fill = h, b.style.fill = h, d.style.pointerEvents = "none", b.style.pointerEvents = "none" } function colorCutout(b) { var d = this.style.backgroundColor, b = rgb2hex(d), h = document.getElementsByClassName(".skin-tone"), l = document.getElementById("male_silhouette"), f = document.getElementById("female_silhouette"), o = document.getElementsByClassName("lg"), q = new Array(); q.skinColor = b; var z = document.querySelector(".skin-color__container"); z.classList.remove("skin-color__container--show"), hash.add(q), defaultEyeColor(b), defaultHairColor(b), defaultPupilShape(), gaga("send", "event", { eventCategory: "Navigation", eventAction: "Color", eventLabel: "Select color" }), addDecency(), addTopicalItem(), setTimeout(function () { launch() }, 300) } function selectMale(b) { c.choices.sex = "m"; var d = document.querySelector("#mButton"), h = document.querySelector("#svg1"), l = document.querySelector("#male_silhouette"), f = document.querySelector("#female_silhouette"), o = document.querySelector(".character-shadow"); f.removeEventListener("click", selectFemale), d && (d.checked = !0), l && l.removeEventListener("click", selectMale, !1), hash.add({ sex: "m" }); var q = document.getElementById("path_male"); h.classList.add("select-male"), o.classList.add("shine"), b && gaga("send", "event", { eventCategory: "Navigation", eventAction: "Male", eventLabel: "Select male template" }), setTimeout(function () { displayPallette() }, 350) } function addTopicalItem() { } function addDecency() { var b = c.choices.sex; b === "m" || b === "f" && hash.add({ bra: "bow" }) } function selectFemale(b) { c.choices.sex = "f"; var d = document.querySelector("#fButton"), h = document.querySelector("#svg1"), l = document.querySelector("#male_silhouette"), f = document.querySelector("#female_silhouette"), o = document.querySelector(".character-shadow"); l.removeEventListener("click", selectMale), d && (d.checked = !0), f && f.removeEventListener("click", selectFemale, !1), hash.add({ sex: "f" }); var f = document.getElementById("female_silhouette"), q = document.getElementById("path_female"); h.classList.add("select-female"), o.classList.add("shine"), b && gaga("send", "event", { eventCategory: "Navigation", eventAction: "Female", eventLabel: "Select female template" }), setTimeout(function () { displayPallette() }, 350) } function presentFaceStyles() { var b = c.choices.sex, d, h, l = document.querySelector(".face-styles"); colorSilhouette(), zoomTwoFaces(); var f, o; b === "m" ? (d = document.querySelector(".male-face-western-style"), h = document.querySelector(".male-face-anime-style"), f = document.querySelector(".female-face-anime-style"), o = document.querySelector(".female-face-anime-style")) : (d = document.querySelector(".female-face-western-style"), h = document.querySelector(".female-face-anime-style"), f = document.querySelector(".male-face-western-style"), o = document.querySelector(".male-face-anime-style")), f.classList.add("inactive-vector"), o.classList.add("inactive-vector"), d.classList.add("active-vector"), h.classList.add("active-vector"), d.style.opacity = 1, h.style.opacity = 1, d.style.transform = "translateX(-23px)", h.style.transform = "translateX(23px)", l.style.opacity = 1 } function selectStyleWestern() { } function selectStyleAnime() { } function closeAllOverlays() { for (var b = document.querySelectorAll(".overlay--show"), d = b.length; d--;)b[d].classList.remove("overlay--show") } function showAbout(b) { b.preventDefault(); var d = document.querySelector(".js-about"), h = d.querySelector(".close-btn"); hamburger(), closeAllOverlays(), d.classList.add("overlay--show"), d.addEventListener("click", closeOverlay, !0), h.addEventListener("click", closeOverlay, !1) } function showFAQ(b) { b.preventDefault(); var d = document.querySelector(".js-faq"), h = d.querySelector(".close-btn"); hamburger(), closeAllOverlays(), d.classList.add("overlay--show"), d.addEventListener("click", closeOverlay, !0), h.addEventListener("click", closeOverlay, !1) } function showDownloadOptions(b) { b.preventDefault(); var d = document.querySelector(".js-download-options"), h = d.querySelector(".close-btn"); hamburger(), closeAllOverlays(), d.classList.add("overlay--show"), d.addEventListener("click", closeOverlay, !0), h.addEventListener("click", closeOverlay, !1) } function logoutUI() { var b = document.querySelector(".logged"); b && (b.classList.remove("logged"), resetCharacters()) } function loginMenu(b) { b && b.preventDefault(); var d = document.querySelector(".js-login"), h = document.querySelector("#login-form"), l = d.querySelector(".first-input"), f = d.querySelector(".close-btn"); closeAllOverlays(), d.classList.add("overlay--show"), h.addEventListener("submit", login, !0), d.addEventListener("click", closeLogin, !0), l.focus(), f.addEventListener("click", closeOverlay, !1) } function closeLogin(b) { var d = document.querySelector(".js-login"), h = d.querySelector(".cancel-btn"), l = b.target; if (l === d || l === h) { var f = document.querySelector(".overlay--show"); f && (clearInputFields(), f.classList.remove("overlay--show")) } } function closeOverlay(b) { var d = document.querySelector(".overlay--show"); if (d === null) return; var h = d.querySelector(".cancel-btn"), l = d.querySelector(".close-btn"), f = b.target; (f === d || f === h || f === l) && (d && (hideNewCharacterInputField(), d.classList.remove("overlay--show"))) } function hideNewCharacterInputField() { var b = document.querySelector(".overlay--show"), d = b.querySelector(".overlay__char-new--create"); d && (clearInputFields(), d.classList.remove("overlay__char-new--create")) } function clearInputFields() { for (var b = document.querySelector(".overlay--show"), d = b.querySelectorAll("input"), h = d.length, l = b.querySelector(".overlay__error--show"); h--;)d[h].value = ""; l && l.classList.remove("overlay__error--show") } function clearInputUsername() { var b = document.querySelector(".overlay--show"), d = b.querySelectorAll(".overlay__input__username"); d[0].value = "" } function parseHash(b, d, h, l) { newParseHash(); for (var f = d.length, o = f, q, z, I, D, B; o--;) { var v = f - o - 1; for (var J in d[v]) { var A = J.toLowerCase(); A === "pupils" && modCharacter(A, N); if (A === "brows" || A === "eyes" || A === "mouth" || A === "lashes" || A === "sockets") { var N = hash.get("emotion"); N === void 0 && (N = "neutral") } else var N = hash.get(A); var ba = A + "_" + N; N != void 0 ? modCharacter(A, N) : (A === "brows" || A === "eyes" || A === "mouth" || A === "lashes" || A === "sockets") && modCharacter(A, "neutral"), ba in h || A === "body" ? A = "skin" : (ba in l || A === "hair") && (A = "hair"), q = hash.get(A + "Color"), z = hash.get(A + "Color-bet"), I = hash.get(A + "Color-gam"), D = hash.get(A + "Color-del"), B = hash.get(A + "Color-eps"), q != void 0 && q != "" && modCharacter(A + "Color", q), z != void 0 && z != "" && modCharacter(A + "Color-bet", z), I != void 0 && I != "" && modCharacter(A + "Color-gam", I), D != void 0 && D != "" && modCharacter(A + "Color-del", D), B != void 0 && B != "" && modCharacter(A + "Color-eps", B) } } } function newParseHash() { var b = hash.get(), d = Object.keys(b), h; for (h in b) b[h] === "" && hash.remove(h); b.irisColor != "" && modCharacter("irisColor", b.irisColor) } function hashCharacter() { var b = currentUser.cc.personnages[currentUser.cc.personnageActuel], d, h = []; for (d in b) h.push(encodeURIComponent(d) + "=" + encodeURIComponent(b[d])); h.length && personnageActuelToHash(currentUser) } function personnageActuelToHash(b) { var d = b.cc.personnageActuel, h, l, f, o, q, z, I = {}; if (d && d !== "") { for (h = b.cc.personnages[d], l = Object.keys(h), itemsListLength = l.length, itemsListCounter = itemsListLength; itemsListCounter--;)o = itemsListLength - itemsListCounter - 1, q = l[o], z = h[l[o]], I[q] = z, hash.add(I); clearCharacter(), interpretHash() } } function interpretHash() { var b = hash.get("sex"); b === "m" ? selectMale() : b === "f" && selectFemale() }  function hideArray(b) { for (section in b) { sectionOptions = getOptionsRandom(b[section]); for (option in sectionOptions) if (sectionOptions[option] != "") { optionId = "#" + b[section] + "_" + sectionOptions[option], hideId(optionId); var d = new Array(); d[b[section]] = "", hash.add(d), modCharacter(b[section], "") } } } function showId(b) { var d = [], h = document.querySelector("#svg1"), l = isInMultiLayerArray(b.slice(1), multiLayer); gaga("send", "event", "menu", "select", b); if (l > 0) for (var f = 1; f <= l; f++)idOf = b + "_" + f + "_of_" + l, d.push(idOf.slice(1)); else d.push(b.slice(1)); loadFilesFromList(d) } function hideId(b) { var d = document.querySelector("#svg1"), h, l = isInMultiLayerArray(b.slice(1), multiLayer); if (l > 0) for (var f = 1; f <= l; f++)idOf = b + "_" + f + "_of_" + l, h = d.querySelector(idOf), h != null && d.removeChild(h); else h = d.querySelector(b), h != null && d.removeChild(h) } function getOptionsRandom(b) { var d = []; for (form in window.forms) if (capitalizeFirstLetter(b) in window.forms[form]) return window.forms[form][capitalizeFirstLetter(b)] } function smartRandomStream() { } function smartRandomSingle(b) { gaga("send", "event", { eventCategory: "Secret function", eventAction: "smartRandomSingle()", eventLabel: "Secret Patreon reveal for new random function." }); var d, h = ["#FFDFC4", "#F0D5BE", "#EECEB3", "#E1B899", "#E5C298", "#FFDCB2", "#E5B887", "#E5A073", "#E79E6D", "#DB9065", "#CE967C", "#C67856", "#BA6C49", "#A57257", "#F0C8C9", "#DDA8A0", "#B97C6D", "#A8756C", "#AD6452", "#5C3836", "#CB8442", "#BD723C", "#704139", "#A3866A"], l = new Array(), f, o, q, z, I, D, B, v, J, A, N, ba, l = new Array(), d, Q, R, ea = { coat: 15, collar: 5, earings: 90, earpiece: 5, eyepatch: 10, glasses: 60, holster: 5, horns: 3, makeup: 80, mask: 5, necklace: 75, pet: 20, scarf: 10, shirt: 95, shoulderpads: 5, smoke: 20, suit: 5, tie: 15, veil: 5, vest: 5, warpaint: 5, wings: 3 }, $ = 50, t = !1, E = !1, M = !1, f, P, S = fabricPallette.length; hash.clear(), resetCharacter(); var d = Math.floor(Math.random() * 100); if (d <= 50) { selectFemale(); var O = femaleForm1, X = femaleForm2, da = femaleForm3, la = femaleForm4, ta = femaleForm5, na = femaleForm6 } else { selectMale(); var O = maleForm1, X = maleForm2, da = maleForm3, la = maleForm4, ta = maleForm5, na = maleForm6 } f = [O, X, da, la, ta, na], d = Math.floor(Math.random() * 24), I = l.skinColor = h[d].toLowerCase(), hash.add(l), defaultEyeColor(I), defaultHairColor(I), defaultPupilShape(), fabRoll = Math.floor(Math.random() * S), P = fabricPallette[fabRoll], setTimeout(function () { for (o = q = f.length; o--;) { ba = q - 1 - o, z = f[ba], D = Object.keys(z), v = B = D.length; if (ba === 0) for (; v--;) { J = z[D[B - 1 - v]], A = J.length; var oa = Math.floor(Math.random() * A), Y = D[B - 1 - v].toLowerCase(), sa = J[oa].toLowerCase(); Y === "hair" && sa != "" && (M = !0), l[Y] = sa, hash.add(l) } if (ba > 0) for (; v--;)N = "", J = z[D[B - 1 - v]], A = J.length, Y = D[B - 1 - v].toLowerCase(), Y != "pants" && Y != "underwear" && Y != "body" && Y != "cloak" && Y != "shoes" && Y != "bra" && Y != "mask" ? (ea[Y] != void 0 ? R = ea[Y] : R = $, oa = Math.floor(Math.random() * 100), oa <= R && (oa = Math.floor(Math.random() * (A - 1)) + 1, N = J[oa].toLowerCase(), M && ((Y === "hat" || Y === "veil") && (N = "")), (t || E) && ((Y === "suit" || Y === "dress" || Y === "coat" || Y === "top") && (N = "")), t && ((Y === "shorts" || Y === "dress" || Y === "skirt" || Y === "pants") && (N = "")), E && ((Y === "shirt" || Y === "top" || Y === "suit") && (N = ""))), N != "" && (Y === "suit" || Y === "dress" ? (N != "suit" && (t = !0), E = !0) : Y === "top" || Y === "shirt" || Y === "shirt" || Y === "jacket" ? E = !0 : (Y === "shorts" || Y === "skirt" || Y === "pants") && (t = !0))) : Y === "body" ? (oa = Math.floor(Math.random() * 100), oa < 40 ? oa = 0 : oa < 80 ? oa = 1 : oa < 95 ? oa = 2 : oa = 3, N = J[oa].toLowerCase()) : Y === "cloak" || Y === "bra" || Y === "underwear" || Y === "mask" ? N = "" : (oa = Math.floor(Math.random() * (A - 1)) + 1, N = J[oa].toLowerCase(), (t || E) && ((Y === "suit" || Y === "dress" || Y === "top") && (N = "")), t && ((Y === "shorts" || Y === "dress" || Y === "skirt" || Y === "pants") && (N = "")), E && ((Y === "shirt" || Y === "top" || Y === "suit") && (N = "")), N != "" && (Y === "suit" || Y === "dress" ? (t = !0, E = !0) : Y === "top" || Y === "shirt" || Y === "vest" || Y === "shirt" || Y === "jacket" ? E = !0 : (Y === "shorts" || Y === "skirt" || Y === "pants") && (t = !0))), l[Y] = N, (Y === "jacket" || Y === "vest" && N != "yellow" || Y === "pants" && (N === "suit" || N === "snowboard") || Y === "shorts" || Y === "skirt" || Y === "top" || Y === "suit" || Y === "dress") && (l[Y + "Color"] = P), hash.add(l) } !t && !E ? c.choices.sex === "f" ? coverAll(f) : coverBottom(f) : t ? c.choices.sex === "f" && !E && coverTop(f) : coverBottom(f), launch() }, 300) } function coverAll(b) { for (var d = ["suit", "dress"], h = formLen = b.length, l, f, o, q, z = new Array(), I = "dress"; h--;)l = formLen - 1 - h, f = b[l], o = Object.keys(f), q = keyLen = o.length, isInArray(capitalizeFirstLetter(I), o) && (items = f[capitalizeFirstLetter(I)], itemsLen = items.length, roll = Math.floor(Math.random() * (itemsLen - 1)) + 1, newItem = items[roll].toLowerCase(), z[I] = newItem, hash.add(z)) } function coverTop(b) { for (var d = ["top"], h = formLen = b.length, l, f, o, q, z = "top", I = new Array(); h--;)l = formLen - 1 - h, f = b[l], o = Object.keys(f), q = keyLen = o.length, isInArray(capitalizeFirstLetter(z), o) && (items = f[capitalizeFirstLetter(z)], itemsLen = items.length, roll = Math.floor(Math.random() * (itemsLen - 1)) + 1, newItem = items[roll].toLowerCase(), I[z] = newItem, hash.add(I)) } function coverBottom(b) { var d = c.choices.sex, h, l = formLen = b.length, f, o, q, z, I = new Array(); if (d === "m") { h = ["pants"]; var D = "pants" } else { h = ["shorts", "skirt", "pants"]; var D = "skirt" } for (; l--;)f = formLen - 1 - l, o = b[f], q = Object.keys(o), z = keyLen = q.length, isInArray(capitalizeFirstLetter(D), q) && (items = o[capitalizeFirstLetter(D)], itemsLen = items.length, roll = Math.floor(Math.random() * (itemsLen - 1)) + 1, newItem = items[roll].toLowerCase(), I[D] = newItem, hash.add(I)) } function showSidebarLeft() { var b = document.querySelector("#sidebar-left"); b.classList.add("visible") } function hideSidebarLeft() { var b = document.querySelector("#sidebar-left"); b.classList.remove("visible") } function clearSidebarLeft() { var b = document.querySelector("#sidebar-left"); b.innerHTML = "" } function showSidebarRight() { var b = document.querySelector("#sidebar"); b.classList.add("visible") } function hideSidebarRight() { var b = document.querySelector("#sidebar"); b.classList.remove("visible") } function clearSidebarRight() { var b = document.querySelector("#content_1"), d = document.querySelector("#sidebar"); d.classList.remove("visible"), b.innerHTML = "" } function openThumbs() { hideColorPicker(), openThumbsLogic(this) } function openThumbsLogic(b) { var d = b.innerHTML, h = getSectionLayersList(d), l = d.toLowerCase(), f = document.querySelector(".section--selected"); (l === "iris" || l === "pupils") && (l = "eyeballs", h = ["default"]), f != null && (purgeHiddenLayers(), f.classList.remove("section--selected")), loadSectionLayers(l, h, populateThumbs, !0), showThumbOptions(b), b.classList.add("section--selected"); var o = document.querySelector(".widget"), q = o.previousSibling, z = document.querySelector("#sidebar-left"), I = document.querySelector(".sidebar-right"); q.classList === void 0 && q.previousSibling.classList != void 0 && (q = q.previousSibling), q = q.querySelector(".accordeon__svg-container"), q.classList.contains("section-btn--hide") && q.classList.toggle("section-btn--hide"), o.classList.contains("section--hide") && o.classList.toggle("section--hide"), z.classList.contains("cherry") && (z.classList.remove("cherry"), I.classList.add("visible")), I.classList.add("visible") } function populateThumbs(b) { var d = document.querySelector("#content_1 .selected--option").classList[2] === "options__emotion", h = b.cloneNode(!0), l = h.id, f, o, q, z, I, D, B, v, J, A = ["round", "feline", "star"], I = A.length; h.style.opacity = 1; if (l.slice(-5, -1) === "_of_") { o = parseInt(l.slice(-6, -5)), f = parseInt(l.slice(-1)), l = l.slice(0, -7), q = document.querySelector("#content_1 ." + l); if (o === f || !q.firstChild) q.appendChild(h); else if (f === 2) q.insertBefore(h, q.firstChild); else { for (z = q.childNodes, I = z.length; I--;)D = parseInt(z[I].id.slice(-6, -5)), D > o && q.insertBefore(h, z[I]); o > z[z.length - 1].id.slice(-6, -5) && document.querySelector("#content_1 ." + l).appendChild(h) } } else if (d) B = l.split("_"), l != "eyeballs_default" && document.querySelector("#content_1 .emotion_" + B[B.length - 1]).appendChild(h); else if (l.slice(0, 4) === "body" && l.slice(5, 9) != "head") l.slice(-5) === "fault" ? document.querySelector("#content_1 .body_default").appendChild(h) : l.slice(-5) === "letic" ? document.querySelector("#content_1 .body_athletic").appendChild(h) : l.slice(-5) === "veiny" ? document.querySelector("#content_1 .body_veiny").appendChild(h) : l.slice(-5) === "id-00" && document.querySelector("#content_1 .body_android-00").appendChild(h); else if (l === "eyeball_right") { v = document.querySelector(".selected--option").classList, v.contains("options__iris") && (J = getPupilShape(), h = showPupilObject(h, J), l = "iris_default", document.querySelector("#content_1 ." + l).appendChild(h)); if (v.contains("options__pupils")) for (; I--;)pupilObject = showPupilObject(h, A[I]).cloneNode(!0), document.querySelector("#content_1 .pupils_" + A[I]).appendChild(pupilObject) } else document.querySelector("#content_1 ." + l).appendChild(h) } function showThumbOptions(b) { var b = b.target || b, d = document.querySelector(".options__" + b.innerHTML.toLowerCase()), h = document.querySelectorAll(".options__container"), l = h.length, f = document.querySelector(".section--selected"); if (f === null) { for (; l--;)h[l].classList.remove("selected--option"); d.classList.add("selected--option") } } function getViewBox(b, d) { var h = b + "_" + d, l = c.choices.sex; if (l === "m") var f = { armband_bandage_right: "181 235 81 81", armband_bandage_left: "296 239 81 81", body_athletic: "65 130 430 430", coat_biker: "160 124 230 230", coat_varsity: "160 124 230 230", coat_snowboard: "160 124 230 230", coat_fall_long: "130 124 290 290", coat_lab: "130 124 290 290", coat_trench: "130 124 290 290", earings_gold_rings: "258 113 46 46", earings_gold_ring_right: "258 130 11 11", earings_gold_ring_left: "292 130 11 11", earpiece_neurolink: "257 107 40 40", earpiece_scouter: "252 117 30 30", ears_plugged: "254 122 20 20", ears_unplugged: "254 121 20 20", glasses_fpv: "250 97 64 64", gloves_boxing: "191 283 73 73", gloves_lab: "191 283 73 73", hat_football: "243 86 80 80", hat_helmet_vietnam: "243 86 80 80", hat_jester: "208 54 140 140", hat_motorcycle: "243 86 80 80", hat_tuque: "243 85 80 80", hair_mohawk: "243 45 80 80", holster_revolver_hip: "220 240 130 130", horns_large: "235 58 90 90", kneepads_skate: "222 345 116 116", mask_horse: "233 80 100 100", mask_robin: "261 108 40 40", necklace_chain: "241 140 80 80", pet_canine: "82 403 150 150", pet_chicken: "45 403 150 150", pet_doge: "341 349 200 200", pet_feline: "381 439 128 128", pet_fox: "42 393 150 150", pet_gerbil: "125 475 64 64", pet_parrot: "203 116 80 80", pet_raven: "50 439 128 128", pet_rat: "300 439 128 128", pet_siamese_cat: "42 393 150 150", pet_vulture: "281 349 180 180", scar_horizontal_neck: "265 139 32 32", scar_horizontal_nose: "264 115 32 32", scar_vertical_heart: "249 164 64 64", scar_vertical_left: "264 110 32 32", scar_vertical_right: "264 110 32 32", scarf_drape: "185 140 190 190", shirt_kurta: "120 134 310 310", suit_borat: "189 150 181 181", tatoo_aum_chest: "248 165 64 64", tatoo_aum_left: "298 157 64 64", tatoo_aum_right: "198 154 64 64", tatoo_chaos_chest: "248 169 64 64", tatoo_chaos_left: "298 164 64 64", tatoo_chaos_right: "198 164 64 64", underwear_boxers: "224 258 120 120" }, o = { age: "261 109 40 40", belt: "185 135 190 190", body: "65 130 430 430", body_head: "249 95 64 64", button: "295 187 23 23", cloak: "0 0 560 560", coat: "95 134 360 360", earpiece: "280 125 25 25", ears: "254 120 20 20", earings: "256 87 50 50", emotion: "259 113 42 42", eyepatch: "261 109 40 40", facialhair: "261 124 40 40", freckles: "261 109 40 40", glasses: "261 109 40 40", gloves: "206 308 40 40", hat: "241 70 80 80", hair: "243 80 80 80", headband: "241 90 80 80", holster: "215 150 130 130", horns: "256 87 50 50", iris: "271.72 125.05 4 4", jacket: "170 130 220 220", mask: "243 93 80 80", necklace: "241 140 80 80", nose: "265 115 32 32", pants: "130 244 290 290", pupils: "271.72 125.05 4 4", scarf: "185 120 190 190", shirt: "190 140 190 190", shoes: "210 442 120 120", shoulderpads: "207 120 150 150", smoke: "252 132 32 32", socks: "210 442 120 120", suit: "65 130 430 430", tie: "241 140 80 80", underwear: "228 238 120 120", veil: "207 97 150 150", vest: "185 135 190 190", watch: "331 302 25 25", warpaint: "261 109 40 40", wings: "110 -30 350 350" }; else if (l === "f") var f = { armband_bandage_right: "186 238 81 81", armband_bandage_left: "301 229 81 81", armband_egyptian_right: "221 205 38 38", armband_egyptian_left: "313 206 38 38", body_athletic: "65 130 430 430", bracelet_wonder_right: "190 258 58 58", bracelet_wonder_left: "313 234 58 58", bracelet_band_right: "198 299 24 24", bracelet_band_left: "322 272 24 24", bracelet_egyptian_right: "190 258 58 58", bracelet_egyptian_left: "313 234 58 58", bracelet_ornamental_right: "200 294 24 24", bracelet_ornamental_left: "326 270 24 24", bracelet_perl_right: "198 299 24 24", bracelet_perl_left: "322 272 24 24", bracelet_rings_right: "192 271 43 43", bracelet_rings_left: "318 254 43 43", coat_lab: "125 140 280 280", coat_winter_tubecollar: "125 120 280 280", collar_egyptian: "240 143 75 75", collar_leather: "263 150 35 35", collar_metal: "250 146 59 59", dress_bobafett: "160 165 230 230", dress_corset: "175 180 200 200", dress_japanese_pleat: "105 140 340 340", dress_parisian_fall: "105 160 340 340", dress_german_expression: "75 160 400 400", dress_short: "175 180 200 200", dress_suit: "175 140 200 200", dress_waitress: "160 140 230 230", earings_gold_ring_left: "289 141 20 20", earpiece_neurolink: "257 118 41 41", earpiece_scouter: "253 126 30 30", glasses_fpv: "252 109 64 64", gloves_silk_fingerless_striped: "180 268 68 68", hat_football: "243 98 80 80", hat_helmet_vietnam: "243 98 80 80", hat_motorcycle: "243 98 80 80", hat_tiara: "262 98 40 40", hat_tuque: "243 97 80 80", hair_afro: "243 80 80 80", hair_mohawk: "243 57 80 80", holster_revolver_hip: "213 245 130 130", holster_revolver_thigh: "213 285 130 130", mask_horse: "233 92 100 100", mask_robin: "261 120 40 40", necklace_dogtags: "256 167 45 45", necklace_stethoscope: "237 154 70 70", "necklace_squared-circle": "237 166 77 77", pet_canine: "82 403 150 150", pet_chicken: "45 403 150 150", pet_doge: "341 349 200 200", pet_feline: "381 439 128 128", pet_fox: "42 393 150 150", pet_gerbil: "125 475 64 64", pet_parrot: "275 126 80 80", pet_raven: "50 439 128 128", pet_rat: "300 439 128 128", pet_siamese_cat: "42 393 150 150", pet_vulture: "281 349 180 180", scar_horizontal_neck: "265 139 32 32", scar_horizontal_nose: "264 115 32 32", scar_vertical_heart: "249 164 64 64", scar_vertical_left: "264 110 32 32", scar_vertical_right: "264 110 32 32", scarf_drape: "185 140 190 190", skirt_draped: "179 249 181 181", suit_asymetric: "175 140 200 200", suit_bands: "161 162 234 234", suit_onepiece: "175 140 200 200", tatoo_archeopteryx_left: "282 173 64 64", tatoo_aum_chest: "248 165 64 64", tatoo_aum_left: "298 157 64 64", tatoo_aum_right: "198 154 64 64", tatoo_chaos_chest: "248 175 48 48", tatoo_chaos_left: "298 170 48 48", tatoo_chaos_right: "210 164 48 48", tatoo_tribal_face: "258 105 50 50", top_tank: "215 165 120 120", top_tube_v: "223 170 120 120", underwear_boxers: "224 258 120 120" }, o = { age: "261 121 40 40", armband: "313 206 38 38", belt: "175 185 190 190", blouse: "173 159 205 205", body: "65 130 430 430", body_head: "249 107 64 64", bra: "220 160 100 100", bracelet: "316 252 48 48", button: "281 198 23 23", coat: "125 79 280 280", collar: "255 160 48 48", dress: "160 150 230 230", earpiece: "280 137 25 25", earings: "257 141 20 20", ears: "254 130 20 20", emotion: "261 125 42 42", eyepatch: "261 121 40 40", facialhair: "261 124 40 40", glasses: "263 121 40 40", gloves: "206 308 40 40", hat: "241 82 80 80", hair: "243 92 80 80", headband: "241 102 80 80", holster: "215 150 130 130", horns: "257 99 50 50", iris: "274.125 137.55 3.2 3.2", jacket: "170 130 220 220", kneepads: "237 369 77 77", leggings: "136 305 260 260", makeup: "267.5 123 30 30", mask: "243 105 80 80", nails: "200 327 25 25", necklace: "255 160 48 48", nose: "265 127 32 32", pants: "130 244 290 290", pupils: "274.125 137.55 3.2 3.2", scarf: "185 120 190 190", shirt: "190 140 190 190", shoes: "225 442 120 120", shorts: "215 245 120 120", skirt: "190 220 180 180", shoulderpads: "207 100 150 150", smoke: "255 144 32 32", socks: "225 442 120 120", suit: "80 130 400 400", tie: "241 140 80 80", top: "225 160 100 100", underwear: "232 258 90 90", veil: "207 97 150 150", vest: "185 135 190 190", wings: "110 -30 350 350" }; return f[h] && d != "" ? f[h] : o[b] && d != "" ? o[b] : "0 0 560 560" } function isLandscape() { var b = window, d = document, h = d.documentElement, l = d.getElementsByTagName("body")[0], f = b.innerWidth || h.clientWidth || l.clientWidth, o = b.innerHeight || h.clientHeight || l.clientHeight, q; return f > o ? q = !0 : q = !1, q } function zoomIn() { var b = c.choices.sex, d; shape = document.getElementById("svg1"), b == "m" ? d = "140 73 290 290" : d = "225 86 110 110", animateZoom(d) } function zoomOut() { var b = c.choices.sex; shape = document.getElementById("svg1"), animateZoom(newViewBox) } function zoomFace() { var b = isLandscape(), d = c.choices.sex, h; shape = document.getElementById("svg1"), d == "m" ? h = "242.6 99 80 80" : h = "243 109 80 80", animateZoom(h) } function zoomTwoFaces() { var b = isLandscape(), d = c.choices.sex, h; shape = document.getElementById("svg1"), d == "m" ? h = "242.6 90 80 80" : h = "243 100 80 80", animateZoom(h) } function zoomTorso() { var b = c.choices.sex, d; shape = document.getElementById("svg1"), b == "m" ? d = "204 85 150 150" : d = "207 97 150 150", animateZoom(d) } function zoomBody() { var b = c.choices.sex, d; shape = document.getElementById("svg1"), b == "m" ? d = "136 73 290 290" : d = "140 84 290 290", animateZoom(d) } function zoomFull() { var b = c.choices.sex, d; shape = document.getElementById("svg1"), d = "10 50 540 540", animateZoom(d) } function viewBoxZoom(b) { var d = b.target.value; d == 3 ? zoomFace() : d == 2 ? zoomTorso() : d == 1 ? zoomBody() : d == 0 && zoomFull() } function sectionZoom(b) { var d = document.querySelector("#zoomLevel"); b === "Head" && (d.value = 3, zoomFace()), b === "Accessories" && (d.value = 3, zoomFace()), b === "Torso" && (d.value = 2, zoomTorso()), b === "Body" && (d.value = 1, zoomBody()), b === "Legs" && (d.value = 0, zoomFull()), b === "Feet" && (d.value = 0, zoomFull()) } function animateZoom(b) { var d = document.querySelector("#svg1"), h = d.viewBox.baseVal, l, f = 350, o = Date.now(), q, z, I = h.x, D = h.y, B = h.width, v = h.height, J, A, N, ba, Q, R, ea, $, t, E; b != "10 50 540 540" && !d.classList.contains("zoomed") ? d.classList.add("zoomed") : b === "10 50 540 540" && d.classList.contains("zoomed") && d.classList.remove("zoomed"), b = b.split(" "), J = b[0] - h.x, A = b[1] - h.y, N = b[2] - h.width, ba = b[3] - h.height; function M() { q = Date.now(), z = q - o, Q = z / f, Q > 1 && (Q = 1), R = I + J * Q, ea = D + A * Q, $ = B + N * Q, t = v + ba * Q, E = R + " " + ea + " " + $ + " " + t, d.setAttribute("viewBox", E); if (z >= f) { cancelAnimationFrame(l); return } l = requestAnimationFrame(M) } l = requestAnimationFrame(M) }