<html lang="en">

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="description"
        content="Create realistic characters for fun or for use in creative projects. Choose from a series of options to build your full body avatar in vector graphics.">
    <meta name="author" content="Frederic Guimont">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Character Customisation</title>
    <link rel="stylesheet" href="../styles/characterstyle.css">
    <link rel="canonical" href="https://charactercreator.org">
    <link href="https://unpkg.com/tabulator-tables@4.6.3/dist/css/tabulator.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.6.3/dist/js/tabulator.min.js"></script>
    <meta prefix="og: http://ogp.me/ns#" property="og:title" content="Character Customisation>
    <meta property=" og:description" content="Create characters from scenes to create a realistic visual novel.">
    <meta prefix="og: http://ogp.me/ns#" property="og:url"
        content="https://amaye02.lampt.eeecs.qub.ac.uk/VisualNovelTemplates/char.html">
    <script async="" src="//www.google-analytics.com/analytics.js"></script>
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
        ga('create', 'UA-47040938-1', 'charactercreator.org');
        ga('require', 'displayfeatures');
        ga('send', 'pageview');



    </script>
    <style id="criticalCSS">
        body {
            margin-left: 20px;
            margin-right: 20px;
            margin-bottom: 20px;
        }
    </style>
    <!-- Add above the fold styles for faster load time. -->


</head>

<body data-gr-c-s-loaded="true">

    <h2>Visual Novel</h2>

    <div class="embed-responsive embed-responsive-16by9"
        style="border: 1px solid rgba(0,0,0,.1); border-radius: 0.25rem; min-height: 400px;">
        <iframe class="embed-responsive-item" src="http://aoibheannamy.github.io/visualnovel/iframenovel.html"></iframe>
    </div>



    <div id="example-table" style="width: 90%; margin-bottom: 30px;"></div>

    <script type="text/javascript">
        document.getElementById("done").onclick = function () { myFunction() };

        var sex, skinColour, irisColour, charHairColour, pupils, charFacialHair, hair, emotion, charShirt, charTie, charVest,
            charJacket, charPants, charShoes, charBlouse, charDress, charSkirt, charGlasses, charHat, charEarrings, charMakeup, charTattoo, charScar;

        function myFunction() {
            const queryString = window.location.hash;
            console.log(queryString);
            const urlParams = new URLSearchParams(queryString);

            const
                //keys = urlParams.keys(),
                //values = urlParams.values(),
                entries = urlParams.entries();

            //for (const key of keys) console.log(key);
            //for (const value of values) console.log(value);

            for (const entry of entries) {
                // set paramters to variables to use to fill in table
                if (entry[0] == "#sex") {
                    sex = entry[1];
                    console.log("Sex:" + sex);
                    if (sex == "m") {
                        sex == "male";
                    } else if (sex == "f") {
                        sex == "female";
                    }
                }
                if (entry[0] == "skinColor") {
                    skinColour = entry[1];
                    console.log("Skin colour:" + skinColour);
                }
                if (entry[0] == "irisColor") {
                    irisColour = entry[1];
                    console.log("Iris colour:" + irisColour);
                }
                if (entry[0] == "hairColor") {
                    charHairColour = entry[1];
                    console.log("Hair colour:" + charHairColour);
                }
                if (entry[0] == "pupils") {
                    pupils = entry[1];
                    console.log("Pupils:" + pupils);
                }
                if (entry[0] == "facialHair") {
                    charFacialHair = entry[1];
                    console.log("Facial Hair:" + charFacialHair);
                }
                if (entry[0] == "hair") {
                    hair = entry[1];
                    console.log("Hair:" + hair);
                }
                if (entry[0] == "emotion") {
                    emotion = entry[1];
                    console.log("Emotion:" + emotion);
                }
                if (entry[0] == "shirt") {
                    charShirt = entry[1];
                    console.log("Shirt:" + charShirt);
                }
                if (entry[0] == "tie") {
                    charTie = entry[1];
                    console.log("Tie:" + charTie);
                }
                if (entry[0] == "vest") {
                    charVest = entry[1];
                    console.log("Vest:" + charVest);
                }
                if (entry[0] == "jacket") {
                    charJacket = entry[1];
                    console.log("Jacket:" + charJacket);
                }
                if (entry[0] == "pants") {
                    charPants = entry[1];
                    console.log("Pants:" + charPants);
                }
                if (entry[0] == "shoes") {
                    charShoes = entry[1];
                    console.log("Shoes:" + charShoes);
                }
                if (entry[0] == "blouse") {
                    charBlouse = entry[1];
                    console.log("Blouse:" + charBlouse);
                }
                if (entry[0] == "dress") {
                    charDress = entry[1];
                    console.log("Dress:" + charDress);
                }
                if (entry[0] == "skirt") {
                    charSkirt = entry[1];
                    console.log("Skirt:" + charSkirt);
                }
                if (entry[0] == "glasses") {
                    charGlasses = entry[1];
                    console.log("Glasses:" + charGlasses);
                }
                if (entry[0] == "hat") {
                    charHat = entry[1];
                    console.log("Hat:" + charHat);
                }
                if (entry[0] == "earings") {
                    charEarrings = entry[1];
                    console.log("Earrings:" + charEarrings);
                }
                if (entry[0] == "makeup") {
                    charMakeup = entry[1];
                    console.log("Makeup:" + charMakeup);
                }
                if (entry[0] == "tatoo") {
                    charTattoo = entry[1];
                    console.log("Tattoo:" + charTattoo);
                }
                if (entry[0] == "scar") {
                    charScar = entry[1];
                    console.log("Scar:" + charScar);
                }



                var tableData = [
                    { numberOfCharacters: 1, gender: sex, complexion: skinColour, eyeColour: irisColour, colourHair: charHairColour, hairStyle: hair, shirt: charShirt, blouse: charBlouse, dress: charDress, tie: charTie, vest: charVest, jacket: charJacket, pants: charPants, skirt: charSkirt, shoes: charShoes, glasses: charGlasses, hat: charHat, earrings: charEarrings, makeup: charMakeup, tattoos: charTattoo, scars: charScar, facial_hair: charFacialHair },
                    { numberOfCharacters: 2 }
                ]
                table.setData(tableData);



            }
            alert("Thank you for creating this avatar. The final step is to copy and paste the data in the table below into the form on Amazon's mechanical turk page.");
        }



        //var local_data = data;  //name inside json file -->	
        var table = new Tabulator("#example-table", {
            // data: local_data,
            pagination: "local",
            paginationSize: 5,
            layout: "fitColumns",
            placeholder: "No Data Available",
            columns: [
                { title: "Character", field: "numberOfCharacters", editor: "input" },
                { title: "Gender", field: "gender", editor: "input" },
                { title: "Complexion", field: "complexion", editor: "input" },
                { title: "Eye Colour", field: "eyeColour", editor: "input" },
                { title: "Hair Colour", field: "colourHair", editor: "input" },
                { title: "Hair Style", field: "hairStyle", editor: "input" },
                { title: "Facial Hair", field: "facial_hair", editor: "input" },
                { title: "Shirt", field: "shirt", editor: "input" },
                { title: "Blouse", field: "blouse", editor: "input" },
                { title: "Dress", field: "dress", editor: "input" },
                { title: "Tie", field: "tie", editor: "input" },
                { title: "Vest", field: "vest", editor: "input" },
                { title: "Jacket", field: "jacket", editor: "input" },
                { title: "Trousers", field: "pants", editor: "input" },
                { title: "Skirt", field: "skirt", editor: "input" },
                { title: "Shoes", field: "shoes", editor: "input" },
                {
                    title: "Distinctive Features", //create column group
                    columns: [
                        { title: "Glasses", field: "glasses", hozAlign: "right" },
                        { title: "Hat", field: "hat", hozAlign: "center" },
                        { title: "Earrings", field: "earrings", hozAlign: "center", },
                        { title: "Makeup", field: "makeup", hozAlign: "center", },
                        { title: "Tattoos", field: "tattoos", hozAlign: "center", },
                        { title: "Scars", field: "scars", hozAlign: "center", },
                    ],
                },

            ],


        });
        for (var loop = 1; loop < 10; loop++) {
            table.addRow({ numberOfCharacters: loop }, false);
        }


    </script>

    <script>
        let bg;
        let img;
        //let fontsize = 30;
        let textWords = "";
        let myFont;
        let charSpeaking = "";


        //function preload() {
        //    myFont = loadFont('fonts/MontserratAlternates-Medium.otf');
        //}

        function setup() {
            // create the canvas
            var canvas = createCanvas(5 * windowWidth / 6, windowHeight);
            // position canvas
            canvas.position(50, 50);
            // display as block
            canvas.style('display', 'block');

            // set background as image
            bg = loadImage('Images/MeetingRoom.jpg');
            // any additional images loaded here
            img = loadImage('https://raw.githubusercontent.com/aoibheannamy/MScProject/master/Images/Joker.png?token=APCQXYVECEQKVFIN6BHR2SS7EAUB2');

            // set font size
            //textSize(fontsize);
            // align text
            //textAlign(CENTER, CENTER);
            // define where canvas is to be placed
            canvas.parent('sketch-holder');

            //textFont(myFont);
            //textSize(22);
            textAlign(CENTER, CENTER);

        }


        function draw() {
            clear();
            // set/insert background
            if (rowLocIndex >= 1) {
                background(bg);
            }
            // insert image
            // start blank
            if (rowIndex >= 1) {
                image(img, 0, height / 2, img.width / 2, img.height / 2);
            }
            // align text
            //textAlign(CENTER);
            // call drawWords function
            drawWords(width * 0.5);
        }

        function drawWords() {
            if (rowIndex >= 1) {
                drawSpeechBubble();
                fill(0);
                stroke(0);
                strokeWeight(2);
                textSize(20);
                text(textWords, 330, 80, 200, 200);
                textSize(16);
                fill(0);
                stroke(0);
                strokeWeight(1);
                text(charSpeaking, 430, 130);
            }



        }

        function drawSpeechBubble() {
            fill(290);
            stroke(0);
            ellipse(430, 150, 250, 160);

        }

    </script>


    <!--
<div class="row">
    <div class='container' id="appearanceTable">
        <h4>Physical Appearance of Characters</h4>
        <div id="example-table"></div>
        
        <script type="text/javascript">
            var local_data = data;  //name inside json file 
            var appearanceTable = new Tabulator("#example-table", {
                data: local_data,
                pagination: "local",
                paginationSize: 10,
                layout: "fitColumns",
                placeholder: "No Data Available",
                columns: [
                    { title: "Character", field: "Number of characters", editor: "input" },
                    { title: "Gender", field: "Gender", editor: "input" },
                    { title: "Build", field: "Build", editor: "input" },
                    { title: "Height", field: "Height", editor: "input" },
                    { title: "Race", field: "Race", editor: "input" },
                    { title: "Complexion", field: "Complexion", editor: "input" },
                    { title: "Attractiveness", field: "Rate Attractiveness", editor: "input" },
                    { title: "Eye Colour", field: "Eye Colour", editor: "input" },
                    { title: "Hair Colour", field: "Hair Colour", editor: "input" },
                    { title: "Hair Length", field: "Hair Length", editor: "input" },
                    { title: "Hair Style", field: "Hair Style", editor: "input" },
                    { title: "Attire", field: "Attire", editor: "input" },
                    { title: "Distinctive Features", field: "Distinctive Features", editor: "input" },
                    { title: "Social Class", field: "Social Class", editor: "input" },

                ],
            });					
        </script>
     
    </div>
</div>
-->

    <div class="container" id="table">
        <h4>Location/Background of Scene</h4>
        <div id="example-table-loc"></div>
        <script type="text/javascript">
            //var loc_data = location_data;
            var rowLocIndex = 0;
            var locTable = new Tabulator("#example-table-loc", {
                index: "ID",
                selectable: 1,
                //data: loc_data,
                pagination: "local",
                paginationSize: 10,
                layout: "fitColumns",
                //selectable: true,
                placeholder: "No Data Available",
                columns: [
                    {
                        title: "ID", field: "ID", editor: "input", cellClick: function (e, cell) {
                            var cellValue = cell.getValue();
                            // console.log(cellValue);
                            var data = cell.getData();
                            //console.log("Data: "+data.toString());
                        }
                    },
                    {
                        title: "Location", field: "Location", editor: "select", editorParams: {
                            values: {
                                "BoardRoom": "Board Room", "Forest": "Forest", "Beach": "Beach", "Office": "Office", "Warehouse": "Warehouse", "Club/Bar": "Club/Bar", "Supermarket": "Supermarket", "Bedroom": "Bedroom", "Street": "Street", "Prison": "Prison"
                            }, cellClick: function (e, cell) {
                                var loccellValue = cell.getValue();
                                console.log(loccellValue);
                                var locdata = cell.getData();
                                console.log("Data: " + locdata.toString());

                                if (locdata == "BoardRoom") {
                                    bg = loadImage('https://raw.githubusercontent.com/aoibheannamy/MScProject/master/Images/MeetingRoom.jpg?token=APCQXYUESEDSP6NUMJJCLY27EK4EU');

                                    draw();
                                }
                            }
                        }

                    },

                ],
                rowClick: function (e, row) {
                    rowLocIndex = row.getIndex();
                    // displays index
                    console.log("Row index: " + rowLocIndex);
                    var rowLocData = row.getData();
                    // displays row data for that index
                    console.log(rowLocData);

                    // get number of rows
                    var rowLocCount = table.getDataCount();
                    console.log("Number of rows: " + rowLocCount);

                    // need to find the character number for each frame index
                    // and then display whichever one it represents
                    // then need to iterate through the frame number/index
                    // and repeat


                    for (var loop = rowLocIndex; loop <= rowLocCount; loop++) {
                        var location = row.getData().Location;
                        var selectedLoc = locTable.getSelectedData();

                        if (selectedLoc == "BoardRoom") {
                            bg = loadImage('https://raw.githubusercontent.com/aoibheannamy/MScProject/master/Images/MeetingRoom.jpg?token=APCQXYUESEDSP6NUMJJCLY27EK4EU');

                            draw();
                        } else if (location == "Forest") {
                            bg = loadImage('https://raw.githubusercontent.com/aoibheannamy/MScProject/master/Images/forest.jpg?token=APCQXYTFTFDXSCQWFRPD6427EK4JK');

                            draw();
                        } else if (location == "Beach") {
                            bg = loadImage('https://raw.githubusercontent.com/aoibheannamy/MScProject/master/Images/beach.jpg?token=APCQXYTQDZM5IRAWKSJIL6C7EK4GA');

                            draw();
                        } else if (location == "Office") {
                            bg = loadImage('https://raw.githubusercontent.com/aoibheannamy/MScProject/master/Images/office.jpg?token=APCQXYSAZBC5DATTEB4FIHK7EK4JU');

                            draw();
                        } else if (location == "Warehouse") {
                            bg = loadImage('https://raw.githubusercontent.com/aoibheannamy/MScProject/master/Images/warehouse.jpg?token=APCQXYUQBTMXCQ44YD4CT527EK4N2');

                            draw();
                        } else if (location == "Club/Bar") {
                            bg = loadImage('https://raw.githubusercontent.com/aoibheannamy/MScProject/master/Images/club.jpg?token=APCQXYSWUWYXMD2Z52R4DJK7EK4JC');

                            draw();
                        } else if (location == "Supermarket") {
                            bg = loadImage('https://raw.githubusercontent.com/aoibheannamy/MScProject/master/Images/supermarket.jpg?token=APCQXYTBBBAOIWDW3V23MRK7EK4NQ');

                            draw();
                        } else if (location == "Bedroom") {
                            bg = loadImage('https://raw.githubusercontent.com/aoibheannamy/MScProject/master/Images/bedroom.jpg?token=APCQXYQIHD5LQYEB5FCBHR27EK4G6');

                            draw();
                        } else if (location == "Street") {
                            bg = loadImage('https://raw.githubusercontent.com/aoibheannamy/MScProject/master/Images/street.jpg?token=APCQXYXOCBPUFMSMTUMU4ES7EK4NI');

                            draw();
                        } else if (location == "Prison") {
                            bg = loadImage('https://raw.githubusercontent.com/aoibheannamy/MScProject/master/Images/prison.jpg?token=APCQXYXACXG5LEW2WJVLD7S7EK4RC');

                            draw();
                        }
                    }
                }

            });

            locTable.addRow({ ID: 1 }, false);

        </script>
    </div>


    <div class='container'>
        <h4>Frame by Frame</h4>
        <div id="example-table2"></div>
        <!-- ---------------------------------------------------------------- -->
        <script type="text/javascript">
            var local_data = esp_data;  //name inside json file -->	
            var rowIndex = 0;
            var table = new Tabulator("#example-table2", {
                index: "FrameNumber",
                selectable: 1,
                data: local_data,
                pagination: "local",
                paginationSize: 10,
                layout: "fitColumns",
                placeholder: "No Data Available",
                columns: [
                    {
                        title: "Frame", field: "FrameNumber", editor: "input", cellClick: function (e, cell) {
                            var cellValue = cell.getValue();
                            // console.log(cellValue);
                            var data = cell.getData();
                            //console.log("Data: "+data.toString());
                        }
                    },
                    { title: "Character", field: "CharacterNumber", editor: "input" },
                    { title: "Niceness", field: "Agreeableness/Niceness", editor: "input" },
                    { title: "Confidence", field: "Confidence", editor: "input" },
                    { title: "Facial Expression", field: "FacialExpression", editor: "input" },
                    { title: "Eyes/Brows", field: "Eyes/Brows", editor: "input" },
                    { title: "Nose", field: "Nose", editor: "input" },
                    { title: "Mouth", field: "Mouth", editor: "input" },
                    { title: "Skin", field: "Skin", editor: "input" },
                    { title: "Whole-Face Expression", field: "WholeFace", editor: "input" },
                    { title: "Head Movement", field: "HeadMovement", editor: "input" },
                    { title: "Emotion", field: "Emotion", editor: "input" },
                    { title: "Is a Character Speaking?", field: "CharacterSpeaking", editor: "input" },
                    { title: "What are they saying?", field: "WhatDoTheySay", editor: "input" },
                    { title: "Inflection?", field: "Inflection", editor: "input" },
                    { title: "Action", field: "Action", editor: "input" },
                    { title: "Sound Effects", field: "SoundEffects", editor: "input" },
                    { title: "Props", field: "Props", editor: "input" },
                ],
                rowClick: function (e, row) {
                    rowIndex = row.getIndex();
                    // displays index
                    console.log("Row index: " + rowIndex);
                    var rowData = row.getData();
                    // displays row data for that index
                    console.log(rowData);

                    // get number of rows
                    var rowCount = table.getDataCount();
                    console.log("Number of rows: " + rowCount);

                    // need to find the character number for each frame index
                    // and then display whichever one it represents
                    // then need to iterate through the frame number/index
                    // and repeat


                    for (var loop = rowIndex; loop <= rowCount; loop++) {
                        var charNo = row.getData().CharacterNumber;
                        if (charNo == "1") {
                            img = loadImage('https://raw.githubusercontent.com/aoibheannamy/MScProject/master/Images/Joker.png?token=APCQXYVECEQKVFIN6BHR2SS7EAUB2');

                            draw();
                        } else if (charNo == "2") {
                            img = loadImage('https://raw.githubusercontent.com/aoibheannamy/MScProject/master/Images/Gangster1.png?token=APCQXYSCPDMMHSXIMWMJ2MC7EAUOI');

                            draw();
                        } else if (charNo == "3") {
                            img = loadImage('https://raw.githubusercontent.com/aoibheannamy/MScProject/master/Images/Gangster2.png?token=APCQXYQ7H3VJIZPO7OWW36S7EAUPA');

                            draw();
                        } else if (charNo == "4") {
                            img = loadImage('https://raw.githubusercontent.com/aoibheannamy/MScProject/master/Images/Gangster3.png?token=APCQXYT7QKMVODACD62FNC27EAUSE');

                            draw();
                        } else if (charNo == "5") {
                            img = loadImage('https://raw.githubusercontent.com/aoibheannamy/MScProject/master/Images/Gangster4.png?token=APCQXYVP4M7URD4YQNNU3JK7EAUTC');

                            draw();
                        }


                        // is the character speaking and who is it?
                        var charSpeak = row.getData().CharacterSpeaking;
                        // what do they say?
                        var spokenWords = row.getData().WhatDoTheySay;
                        // set text variable to words in table
                        textWords = spokenWords;
                        // call drawWords() to print to screen
                        if (charSpeak == "1") {
                            charSpeaking = "Character " + charSpeak + " is speaking:";
                        } else if (charSpeak == "2") {
                            charSpeaking = "Character " + charSpeak + " is speaking:";
                        } else if (charSpeak = "3") {
                            charSpeaking = "Character " + charSpeak + " is speaking:";
                        } else if (charSpeak = "4") {
                            charSpeak = "Character " + charSpeak + " is speaking:";
                        } else if (charSpeak == "0") {
                            charSpeaking = "No Character is speaking.";
                        }
                        rowIndex++;
                    }

                },
            });


        </script>
        <!-- -------------------------------------------------------------------- -->
    </div>
    </div>
    </div>






</body>

</html>